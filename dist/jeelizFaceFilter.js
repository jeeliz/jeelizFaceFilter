 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEEFACEFILTERAPI=(function(){window.JEEFACEFILTERAPIGEN=function(){function zb(){var a=null,c=null,d=null,e=0;this.md=function(f){return a[f]};this.Ld=function(f){var k=null;e=f.length;a=f.map(function(l,n){l=Object.assign({},l,{index:n,parent:this,Ra:k,vd:n===e-1});return k=n=0===n?Lb.instance(l):Mb.instance(l)});c=a[0];d=a[e-1];a.forEach(function(l,n){0!==n&&l.Gd()})};this.J=function(f,k){var l=k;a.forEach(function(n){l=n.J(l,f)});return l};this.Vb=function(){return c.A()};this.Xb=function(){return d.nd()};this.Nd=function(f){d.Xc(f)};
this.Ub=function(){return d.Ub()};this.h=function(){a&&(a.forEach(function(f){f.h()}),d=c=a=null,e=0)}}var Ma,Na,Oa,Wa,Xa,Pa,Ya,Za,$a,ab,ib,jb,kb,lb;function mb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Nb(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,e=c.n;var f="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var k=f.length;c=new Uint8Array(k);for(var l=0;l<k;++l)c[l]=f.charCodeAt(l);f=new Float32Array(e);k=new Float32Array(d);l=a+d+1;for(var n=0;n<e;++n){for(var q=
l*n,x=0===mb(c,q)?1:-1,m=q+1,p=1,y=0,z=m+a-1;z>=m;--z)y+=p*mb(c,z),p*=2;m=y;q=q+1+a;p=k.length;y=0;for(z=q;z<q+p;++z)k[y]=mb(c,z,!0),++y;for(p=q=0;p<d;++p)q+=k[p]*Math.pow(2,-p-1);f[n]=0===q&&0===m?0:x*(1+q)*Math.pow(2,1+m-Math.pow(2,a-1))}return f}function nb(){return-1!==[ba.play,ba.pause].indexOf(ea)}function Ob(a){if(ea!==ba.pause){var c=ea===ba.play?I.Ea:H.Hc;bb=setTimeout(Ab.bind(null,a),c)}}function ob(){if(ea===ba.play)return!1;ea=ba.play;Q.timestamp=Date.now();Qa&&window.cancelAnimationFrame(Qa);
Ab(0)}function Bb(){if(ea!==ba.play)return!1;bb&&(clearTimeout(bb),bb=null);Qa&&(window.cancelAnimationFrame(Qa),Qa=null);ea=ba.pause;return!0}function Da(a,c,d,e,f){a=4*(3*c+a)+d;return e+(U.buffer[a]/255+U.buffer[a+12]/65025)*(f-e)}function pb(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);ta.V();R.reset();S.reset();u.la();u.Nb();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);R.pa();u.za()}function Ab(){if(ea!==ba.pause){u.Nb();R.reset();R.pa();b.disable(b.DEPTH_TEST);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!1);ta.V();u.za();if(!t.mb)a:{if(t.lb){if(!t.element.needsUpdate)break a;t.X.Zd(t.element.arrayBuffer);t.element.needsUpdate=!1}else{var a=t.element.currentTime,c=a-t.Sa;0>c&&(t.Sa=a);if(1E3*c<H.ae)break a;t.Sa+=c;t.X.refresh()}u.set("s48");t.Y.M();t.X.b(0);R.g(!1,!1)}if(E.L.length>Q.G)E.L.splice(0,E.L.length-Q.G);else for(;E.L.length<Q.G;)E.L.push(0);if(1!==E.i)if(ma.every(qb)){for(var d=a=c=0;d<ma.length;++d)ma[d].detected>c&&(c=ma[d].detected,a=0);for(c=0;c<Q.G;++c)E.L[c]=a}else{a=E.fc;c=0;for(d=
!1;c<Q.G;++c){if(qb(ma[a]))if(d){do++a===E.i&&(a=0);while(qb(ma[a]))}else d=!0;E.L[c]=a++;a>=E.i&&(a=0)}E.fc=a}for(a=0;a<Q.G;++a)E.ba=E.L[a],E.rb=(.5+E.ba)/E.i,E.cc=E.L.lastIndexOf(E.ba)===a,u.set("s49"),I.ia&&u.B("u36",ma[E.ba].rz),1!==E.i&&u.B("u35",E.rb),V.va.M(),t.Y.b(0),U.Aa.b(1),R.g(!1,!1),V.va.b(0),za.J(!1,V.va);a=Date.now();Q.sa=a-Q.timestamp;Q.timestamp=a;-1!==W.nDetectsPerLoop?Q.G=W.nDetectsPerLoop:(a=H.Va,Q.jc=Q.pb/Q.sa,Q.kc=Q.jc*a+Q.kc*(1-a),Q.mc=1E3/Q.sa,Q.ja=Q.mc*H.Va+Q.ja*(1-H.Va),
Q.ja>H.ga[1]?(a=H.Ca[1],1<E.i&&(++a,c=ma.filter(Pb).length,a*=Math.max(1,c)),Q.G=Math.min(Q.G+1,a),Q.ja=(H.ga[0]+H.ga[1])/2):Q.ja<H.ga[0]&&(Q.G=Math.max(Q.G-1,H.Ca[0]),Q.ja=(H.ga[0]+H.ga[1])/2));ta.H();b.viewport(0,0,3,2*E.i);u.set("s47");U.Aa.b(0);R.g(!1,!1);b.readPixels(0,0,3,2*E.i,b.RGBA,b.UNSIGNED_BYTE,U.buffer);for(a=0;a<E.i;++a)if(-1!==E.L.indexOf(a)){var e=a;c=Ta[e];var f=[e];d=ma[e];var k=rb[e],l=2*e;c.Ha=Da(1,l,3,0,1);d.detected=pa.R(d.detected,c.Ha,H.Ec);if(c.Ha<H.ob)I.ia&&(d.rz=0);else{var n=
U.Ba;c.x=Da(0,l,1,-1,1);c.y=Da(0,l,2,-1,1);c.U=Da(0,l,3,0,1);c.ub=Da(1,l,0,-n[0],n[0]);c.vb=Da(1,l,1,-n[1],n[1]);c.xa=Da(1,l,2,-n[2],n[2]);for(n=0;n<U.S;++n)c.Pb[n]=U.ua[n](Da(2,l,n,0,1));f.ab=c.x-d.x;f.bb=c.y-d.y;f.$a=c.U-d.s;f.Xa=c.ub-d.rx;f.Ya=c.vb-d.ry;f.Za=I.ia?c.xa:c.xa-d.rz;f=(1-cb.Ma(ua.translationFactorRange[0],ua.translationFactorRange[1],Math.sqrt(f.ab*f.ab+f.bb*f.bb+f.$a*f.$a)/Q.sa))*(1-cb.Ma(ua.rotationFactorRange[0],ua.rotationFactorRange[1],Math.sqrt(f.Xa*f.Xa+f.Ya*f.Ya+f.Za*f.Za)/
Q.sa))*cb.Ma(ua.qualityFactorRange[0],ua.qualityFactorRange[1],c.Ha);e=k[++sb[e]%k.length]=f;for(l=0;l<k.length;++l)e=Math.min(e,k[l]);e=Math.max(.5,e);f=Math.min(e,f);k=pa.R(ua.alphaRange[1],ua.alphaRange[0],Math.pow(f,H.Gc));d.x=pa.R(d.x,c.x,k);d.y=pa.R(d.y,c.y,k);d.s=pa.R(d.s,c.U,k);d.rx=pa.R(d.rx,c.ub,k);d.ry=pa.R(d.ry,c.vb,k);d.rz=I.ia?d.rz+k*c.xa:pa.R(d.rz,c.xa,k);k=Math.max(k,H.Fc);for(e=0;e<U.S;++e)d.expressions[e]=pa.R(d.expressions[e],c.Pb[e],k);++c.Pa}}ta.Yd();ta.reset();S.reset();b.enable(b.DEPTH_TEST);
I.Ga&&(1===E.i?I.Ga(ma[0]):I.Ga(ma));b.disable(b.BLEND);ea===ba.play&&(Qa=window.requestAnimationFrame(Ob))}}function Cb(){t.Y||(t.Y=S.instance({isPot:!1,isLinear:!0,isFloat:!1,width:V.N,height:V.P}));V.va=S.instance({isPot:!0,isFloat:!1,width:za.Vb()});for(var a=H.uc,c=E.i,d=new Float32Array([0,W.borderWidth,W.borderHeight,0,0,0,0,0,0,0,0,0]),e=new Float32Array(d.length*E.i),f=0,k;f<E.i;++f)for(k=0;k<d.length;++k)e[f*d.length+k]=d[k];U.Aa=Qb.instance({width:a,height:c,isFloat:!0,isPot:!1,array:e})}
function Rb(){function a(c){for(var d=[],e=0;e<E.i;++e)d.push(JSON.parse(JSON.stringify(c)));return d}U.buffer=new Uint8Array(8*H.uc*E.i);Ta=a({Ha:0,x:0,y:0,U:1,ub:0,vb:0,xa:0,Pb:new Float32Array(U.S),Pa:0});ma=a({detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,expressions:new Float32Array(U.S)});a({ab:0,bb:0,$a:0,Xa:0,Ya:0,Za:0})}function tb(){u.K("s49",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u33",value:1},{type:"2f",name:"u34",value:V.u},{type:"1f",name:"u35",value:.5},{type:"1f",name:"u36",value:0}]);
u.K("s50",[{type:"1i",name:"u37",value:0},{type:"1i",name:"u33",value:1},{type:"1f",name:"u40",value:H.Wd},{type:"1f",name:"u41",value:H.Bc},{type:"1f",name:"u42",value:H.Ac},{type:"3f",name:"u39",value:[U.ea[0]*V.u[0],U.ea[1]*V.u[1],U.ea[2]]},{type:"1f",name:"u35",value:.5},{type:"1f",name:"u43",value:1},{type:"1f",name:"u36",value:0}]);var a=[{type:"1i",name:"u37",value:0}];u.K("s51",a);u.K("s52",a);u.K("s47",[{type:"1i",name:"u33",value:0},{type:"1f",name:"u46",value:V.u[0]},{type:"2f",name:"u45",
value:[0,.5/E.i]}])}function ub(){var a=za.Vb(),c=V.N/a;Pa=W.minScale*c;Ya=W.maxScale*c;Za=(1-2*W.borderWidth)/W.nStepsX;$a=(1-2*W.borderHeight)/W.nStepsY;ab=(Ya-Pa)/W.nStepsScale;ib=W.borderWidth;jb=W.borderHeight;kb=1-W.borderWidth;lb=1-W.borderHeight;V.u[0]=a/V.N;V.u[1]=a/V.P;Ma=W.borderWidth;Na=W.borderHeight;Oa=Pa;Wa=W.borderWidth;Xa=W.borderHeight;vb=Pa}function Sb(a){if(I.ma)Db("string"===typeof I.ma?JSON.parse(I.ma):I.ma,a);else{var c=I.Ab;"JSON"!==c.toUpperCase().split(".").pop()&&(c+=H.save);
Eb.get(c,function(d){d=JSON.parse(d);Db(d,a)})}}function Db(a,c){if(a.exportData){var d=a.exportData;d.thetaXYZfactor&&(U.Ba=d.thetaXYZfactor);d.trackingDxysFactor&&(U.ea=d.trackingDxysFactor);"undefined"!==typeof d.nExpressions&&(U.S=d.nExpressions)}U.S||(U.S=H.lc);if(!U.ua)for(U.ua=[],d=0;d<U.S;++d)U.ua.push(H.gd);c(a)}function Tb(){if(Aa.o({Wa:I.W,width:V.N,height:V.P,debug:!1,nc:function(){Ea("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0})){if(Aa.sd())return!0;Ea("GL_INCOMPATIBLE");return!1}Ea("GL_INCOMPATIBLE");
return!1}function qb(a){return a.detected<=H.ob}function Pb(a){return a.detected>H.ob}function Fb(a,c,d,e){return d>a?Math.max(0,a+c/2-(d-e/2)):Math.max(0,d+e/2-(a-c/2))}function Ub(){return Ta.some(function(a,c){if(c===E.ba)return!1;c=Ta[E.ba];if(c.Pa>a.Pa||3>a.Pa||Fb(c.x,c.U,a.x,a.U)<H.hc*c.U)return!1;var d=V.N/V.P;return Fb(c.y,c.U*d,a.y,a.U*d)>H.hc*c.U*d})}function Vb(){var a=E.ba;U.Aa.Pd(1);1!==E.i&&(b.viewport(0,0,3,E.i),u.set("s0"),u.tc("u1",1),R.g(!1,!1),u.tc("u1",0));b.viewport(0,a,1,1);
u.set("s50");I.ia&&u.B("u36",ma[a].rz);1!==E.i&&u.B("u35",E.rb);if(1<E.i){var c=Ub()?0:1;u.B("u43",c)}u.Rd("u38",Wa,Xa,vb);R.g(!1,!1);E.cc&&(b.viewport(1,a,1,1),u.set("s51"),R.g(!1,!1),b.viewport(2,a,1,1),u.set("s52"),R.g(!1,!1));Oa+=ab;Oa>Ya&&(Ma+=Za,Oa=Pa,Ma>kb&&(Ma=ib,Na+=$a,Na>lb&&(Na=jb)));Wa=Ma+.5*(Math.random()-.5)*Za;Xa=Na+.5*(Math.random()-.5)*$a;vb=Oa+.5*(Math.random()-.5)*ab}function Gb(){t.X&&t.X.remove();t.lb=t.element.isFakeVideo?!0:!1;t.X=S.instance(Object.assign({isPot:!1,isFloat:!1},
t.lb?{isFlipY:!1,array:t.element.arrayBuffer,width:t.element.videoWidth,height:t.element.videoHeight,isKeepArray:!0}:{D:t.element}))}function Ga(){u.K("s48",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u32",value:t.m}])}function Ha(){t.C[0]=.5;t.C[1]=.5;var a=t.u[1]/t.u[0],c=Aa.O()/Aa.A();90===Math.abs(ha.rotate)&&(a=1/a);a>c?t.C[1]*=c/a:t.C[0]*=a/c;u.K("s50",[{name:"u44",type:"1f",value:c}]);t.m[0]=0;t.m[1]=0;t.m[2]=0;t.m[3]=0;switch(ha.rotate){case 0:t.m[0]=t.C[0];t.m[3]=t.C[1];break;case 180:t.m[0]=
-t.C[0];t.m[3]=-t.C[1];break;case 90:t.m[1]=t.C[0];t.m[2]=-t.C[1];break;case -90:t.m[1]=-t.C[0],t.m[2]=t.C[1]}ha.flipX&&(t.m[0]*=-1,t.m[2]*=-1)}function wb(){var a=t.element.videoWidth,c=t.element.videoHeight,d=t.u[0]!==a||t.u[1]!==c;d&&(t.u[0]=a,t.u[1]=c);return d}function db(a,c){if(ea===ba.error)return!1;t.element=a;wb();c&&c();return!0}function Hb(a,c,d){a&&a();t.ra={video:{facingMode:{ideal:ha.facingMode},width:{min:ha.minWidth,max:ha.maxWidth,ideal:ha.idealWidth},height:{min:ha.minHeight,max:ha.maxHeight,
ideal:ha.idealHeight}},audio:!1};ha.deviceId&&(t.ra.deviceId=ha.deviceId);T.get(t.element?t.element:T.pd(),function(e){c&&c(e);d(e)},function(){Ea("WEBCAM_UNAVAILABLE")},t.ra)}function Ea(a){ea!==ba.error&&(ea=ba.error,I.qa&&I.qa(a))}var pa={Ve:function(a){return Math.ceil(Math.log2(a))},yd:function(a){return Math.log2(a)},hf:function(a){return 0===Math.log2(a)%1},je:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},ke:function(a,c,d){return Math.min(Math.max(a,
c),d)},pe:function(a){return a*Math.PI/180},qf:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},rf:function(a){return Math.round(1E6*a)/1E6},We:function(a,c){return(100*a/c).toFixed(3)},R:function(a,c,d){return a*(1-d)+c*d},bd:function(a,c){return pa.Tc(a-c)},Tc:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},re:function(a,c){return Math.abs(pa.bd(a,c))},be:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},Eb={get:function(a,
c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},Re:function(a,c){Eb.get(a,function(d){c(JSON.parse(d))})},mf:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};
e.send(c)},Ie:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},cb={Cf:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},Ma:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},Ce:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},Gf:function(){return 0},lf:function(){return 1},kf:function(a){return a},ze:function(a){return a*a},Ee:function(a){return a*(2-a)},we:function(a){return.5>
a?2*a*a:-1+(4-2*a)*a},ue:function(a){return a*a*a},De:function(a){return--a*a*a+1},ve:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Ae:function(a){return a*a*a*a},Fe:function(a){return 1- --a*a*a*a},xe:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},Be:function(a){return a*a*a*a*a},Ge:function(a){return 1+--a*a*a*a*a},ye:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},Wb={jd:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+
c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},u=function(){function a(g,w){g=b.createShader(g);b.shaderSource(g,w);b.compileShader(g);return b.getShaderParameter(g,b.COMPILE_STATUS)?g:!1}function c(g,w){g=a(b.VERTEX_SHADER,g);w=a(b.FRAGMENT_SHADER,w);f.push(g,w);var A=b.createProgram();
b.attachShader(A,g);b.attachShader(A,w);b.linkProgram(A);return A}function d(g){void 0===g.fa&&(g.fa="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===g.Fa&&(g.Fa=["a0"]);void 0===g.na&&(g.na=[2]);if(void 0===g.precision||"highp"===g.precision)g.precision=x;g.id=n++;void 0!==g.Kd&&g.Kd.forEach(function(A,Z){g.a=g.a.replace(A,g.Ta[Z])});g.zb=0;g.na.forEach(function(A){g.zb+=4*A});g.wa=c(g.fa,"precision "+g.precision+" float;\n"+
g.a);g.j={};g.c.forEach(function(A){g.j[A]=b.getUniformLocation(g.wa,A)});g.attributes={};g.oa=[];g.Fa.forEach(function(A){var Z=b.getAttribLocation(g.wa,A);g.attributes[A]=Z;g.oa.push(Z)});if(g.f){b.useProgram(g.wa);l=g;k=g.id;for(var w in g.f)b.uniform1i(g.j[w],g.f[w])}g.jb=!0}function e(g){Ia.Qd(G);k!==g.id&&(G.la(),k=g.id,l=g,b.useProgram(g.wa),g.oa.forEach(function(w){0!==w&&b.enableVertexAttribArray(w)}))}var f=[],k=-1,l=null,n=0,q=!1,x="highp",m=["u1"],p=["u0"],y={u1:0},z={u0:0},O={u1:0,u2:1},
N={u3:0},F={s0:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:m,f:y},s1:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:m,f:y,precision:"lowp"},s2:{a:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",c:["u1","u2"],f:O},s3:{a:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
c:m,f:y},s4:{a:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",c:["u1","u2"],f:O},s5:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",c:m,f:y},s6:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",c:m,f:y},s7:{a:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",
c:["u0","u4"],f:z},s8:{a:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",c:["u0","u4"],f:z},s9:{a:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",c:m,f:y},s10:{a:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",
c:["u1","u5","u6"],f:{u1:0,u5:1}},s11:{a:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",c:["u1","u7"],f:y},s12:{a:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
c:["u1","u8"],f:y},s13:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",c:p,f:z},s14:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",c:p,f:z},s15:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",c:p,f:z},s16:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",
c:p,f:z},s17:{a:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",c:["u0","u6","u9"],f:{u0:0,u6:1,u9:2}},s18:{a:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",c:p,f:z},s19:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",
c:p,f:z},s20:{a:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",c:["u0","u10","u11"],f:{u0:0,u10:1}},s21:{a:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
c:["u1","u12"],f:y},s22:{a:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",c:["u13","u14","u15"],f:{u14:0,u13:1,u15:2}},s23:{a:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",c:["u14","u13","u16"],f:{u14:0,u13:1}},s24:{a:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
c:"u13 u14 u16 u20 u17 u18 u19".split(" "),f:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6}},s25:{a:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",c:"u13 u14 u16 u22 u23 u24 u21".split(" "),f:{u14:0,
u13:1,u21:2}},s26:{a:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",c:["u13","u14"],f:{u14:0,u13:1}},s27:{a:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",c:["u1","u21","u25"],f:{u1:0,u21:1}},s28:{a:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
c:m,f:y,precision:"lowp"},s29:{a:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",c:["u1","u26"],f:y,precision:"lowp"},s30:{a:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
c:["u1","u26"],f:y,precision:"lowp"},s31:{a:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
c:["u1","u2","u27"],f:O},s32:{a:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",c:["u1","u2","u27"],f:O},s33:{a:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
c:["u3","u7"],f:N},s34:{a:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",c:["u3","u7"],f:N},s35:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
c:["u1"],f:y,precision:"lowp"},s36:{a:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",c:["u7","u1"],f:y,precision:"lowp"},s37:{a:"uniform sampler2D u1,u28,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u28,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
c:["u1","u28","u29"],f:{u1:0,u28:1,u29:2}}},C={s38:{a:"uniform float u16,u30;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:["u16","u13","u14","u21","u30"],Ta:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{a:"uniform float u16,u30,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:"u16 u24 u13 u14 u21 u30".split(" "),Ta:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},G={La:function(){return q},o:function(){if(!q){x="highp";for(var g in F)d(F[g],g);u.set("s0");b.enableVertexAttribArray(0);q=!0;return Ua.o()}},Dc:function(g){g.forEach(function(w){G.Cb(w)})},Cb:function(g){F[g.id]=g;d(g,g.id)},Zb:function(g,w,A){w||(w=g);F[w]=Object.create(C[g]);F[w].ud=!0;C[g].Ta&&C[g].Ta.forEach(function(Z,na){F[w].a=F[w].a.replace(new RegExp(Z,"g"),A[na])});d(F[w],w)},set:function(g){e(F[g])},
fd:function(g){return"undefined"===typeof F[g]?!1:F[g].jb},la:function(){-1!==k&&(k=-1,l.oa.forEach(function(g){0!==g&&b.disableVertexAttribArray(g)}))},xb:function(){var g=0;l.oa.forEach(function(w,A){A=l.na[A];b.vertexAttribPointer(w,A,b.FLOAT,!1,l.zb,g);g+=4*A})},Nb:function(){b.enableVertexAttribArray(0)},za:function(){b.vertexAttribPointer(l.oa[0],2,b.FLOAT,!1,8,0)},tc:function(g,w){b.uniform1i(l.j[g],w)},B:function(g,w){b.uniform1f(l.j[g],w)},ya:function(g,w,A){b.uniform2f(l.j[g],w,A)},wf:function(g,
w){b.uniform2fv(l.j[g],w)},xf:function(g,w){b.uniform3fv(l.j[g],w)},Rd:function(g,w,A,Z){b.uniform3f(l.j[g],w,A,Z)},yf:function(g,w,A,Z,na){b.uniform4f(l.j[g],w,A,Z,na)},wb:function(g,w){b.uniform4fv(l.j[g],w)},zf:function(g,w){b.uniformMatrix2fv(l.j[g],!1,w)},Af:function(g,w){b.uniformMatrix3fv(l.j[g],!1,w)},Bf:function(g,w){b.uniformMatrix4fv(l.j[g],!1,w)},K:function(g,w){G.set(g);w.forEach(function(A){switch(A.type){case "4f":b.uniform4fv(l.j[A.name],A.value);break;case "3f":b.uniform3fv(l.j[A.name],
A.value);break;case "2f":b.uniform2fv(l.j[A.name],A.value);break;case "1f":b.uniform1f(l.j[A.name],A.value);break;case "1i":b.uniform1i(l.j[A.name],A.value);break;case "mat2":b.uniformMatrix2fv(l.j[A.name],!1,A.value);break;case "mat3":b.uniformMatrix3fv(l.j[A.name],!1,A.value);break;case "mat4":b.uniformMatrix4fv(l.j[A.name],!1,A.value)}})},Ue:function(){return"lowp"},h:function(){b.disableVertexAttribArray(0);G.la();for(var g in F){var w=F[g];w.jb&&(w.jb=!1,b.deleteProgram(w.wa));w.ud&&delete F[g]}f.forEach(function(A){b.deleteShader(A)});
f.splice(0);n=0;q=!1}};return G}(),b=null,Aa=function(){function a(m){console.log("ERROR in ContextFeedForward: ",m);return!1}function c(){if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream)return!0;if(/(Mac)/i.test(navigator.platform)){var m;(m=navigator.userAgent)?(m=m.match(/Mac OS X (\d+)_(\d+)/)||m.match(/Mac OS X (\d+).(\d+)/),m=!m||3>m.length?!1:[parseInt(m[1],10),parseInt(m[2],10)]):m=!1;if(m&&10===m[0]&&
15===m[1])return!0}return!1}var d=null,e=null,f=null,k=null,l=!0,n=null,q=null,x={A:function(){return d.width},O:function(){return d.height},Le:function(){return d},Ke:function(){return b},F:function(){return l},flush:function(){b.flush()},ld:function(){n||(n=new Uint8Array(d.width*d.height*4));b.readPixels(0,0,d.width,d.height,b.RGBA,b.UNSIGNED_BYTE,n);return n},Ne:function(){return d.toDataURL("image/jpeg")},Oe:function(){ta.H();e||(e=document.createElement("canvas"),f=e.getContext("2d"));e.width=
d.width;e.height=d.height;for(var m=x.ld(),p=f.createImageData(e.width,e.height),y=e.width,z=e.height,O=p.data,N=0;N<z;++N)for(var F=z-N-1,C=0;C<y;++C){var G=4*(N*y+C),g=4*(F*y+C);O[G]=m[g];O[G+1]=m[g+1];O[G+2]=m[g+2];O[G+3]=m[g+3]}f.putImageData(p,0,0);return e.toDataURL("image/png")},Me:function(m){!e&&m&&(e=document.createElement("canvas"),f=e.getContext("2d"));var p=m?e:document.createElement("canvas");p.width=d.width;p.height=d.height;(m?f:p.getContext("2d")).drawImage(d,0,0);return p},o:function(m){m.Yc&&
!m.Wa?d=document.getElementById(m.Yc):m.Wa&&(d=m.Wa);d||(d=document.createElement("canvas"));d.width=m&&void 0!==m.width?m.width:512;d.height=m&&void 0!==m.height?m.height:512;"undefined"===typeof m&&(m={});void 0===m.premultipliedAlpha&&(m.premultipliedAlpha=!1);void 0===m.bc&&(m.bc=!0);void 0===m.antialias&&(m.antialias=!1);if(!b){var p={antialias:m.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:m.premultipliedAlpha,stencil:!1,depth:m.bc};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(p.antialias=!1);c()||(b=d.getContext("webgl2",p));b?l=!0:((b=d.getContext("webgl",p))||(b=d.getContext("experimental-webgl",p)),l=!1)}if(!b)return a("WebGL1 and 2 are not enabled");(k=b.getExtension("WEBGL_lose_context"))&&m.nc&&(q=m.nc,d.addEventListener("webglcontextlost",q,!1));if(!aa.o())return a("Not enough capabilities");if(!aa.Nc()&&l)return a("Your configuration cannot process color buffer float");b.clearColor(0,0,0,0);b.disable(b.DEPTH_TEST);b.disable(b.BLEND);b.disable(b.DITHER);b.disable(b.STENCIL_TEST);
b.disable(b.SCISSOR_TEST);b.GENERATE_MIPMAP_HINT&&b.hint(b.GENERATE_MIPMAP_HINT,b.FASTEST);b.disable(b.SAMPLE_ALPHA_TO_COVERAGE);b.disable(b.SAMPLE_COVERAGE);return!0},sd:function(){if(!u.o())return!1;b.depthFunc(b.LEQUAL);b.clearDepth(1);return!0},h:function(){b&&aa.h();k&&q&&(d.removeEventListener("webglcontextlost",q,!1),q=null);n=f=e=d=null}};return x}(),Ia=function(){var a="undefined"===typeof u?null:u;return{Qd:function(c){a!==c&&(a&&a.la(),a=c)},La:function(){return a.La()},za:function(){a.za()},
xb:function(){a.xb()},la:function(){a.la()},set:function(c){a.set(c)},h:function(){a.h&&a.h()}}}(),ka=function(){var a=null,c=null,d=0,e=-2,f=-2,k=!1,l=[],n={reset:function(){f=e=-2},o:function(){k||(a=b.createBuffer(),b.bindBuffer(b.ARRAY_BUFFER,a),b.bufferData(b.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),b.STATIC_DRAW),c=b.createBuffer(),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),b.STATIC_DRAW),n.pa(),k=!0)},instance:function(q){var x=
d++,m=q.da?q.da.length:0,p="undefined"===typeof q.mode?b.STATIC_DRAW:q.mode,y=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,y);b.bufferData(b.ARRAY_BUFFER,q.zc instanceof Float32Array?q.zc:new Float32Array(q.zc),p);e=x;var z=null,O=null,N=null;if(q.da){z=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,z);var F=null;65536>q.da.length?(F=Uint16Array,O=b.UNSIGNED_SHORT,N=2):(F=Uint32Array,O=b.UNSIGNED_INT,N=4);b.bufferData(b.ELEMENT_ARRAY_BUFFER,q.da instanceof F?q.da:new F(q.da),p);f=x}var C={Mc:function(G){e!==
x&&(b.bindBuffer(b.ARRAY_BUFFER,y),e=x);G&&Ia.xb()},Jc:function(){f!==x&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,z),f=x)},bind:function(G){C.Mc(G);C.Jc()},se:function(){b.drawElements(b.TRIANGLES,m,O,0)},te:function(G,g){b.drawElements(b.TRIANGLES,G,O,g*N)},remove:function(){b.deleteBuffer(y);q.da&&b.deleteBuffer(z);C=null}};l.push(C);return C},pa:function(){-1!==e&&(b.bindBuffer(b.ARRAY_BUFFER,a),e=-1);-1!==f&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c),f=-1)},g:function(q,x){q&&ka.pa();x&&Ia.za();b.drawElements(b.TRIANGLES,
3,b.UNSIGNED_SHORT,0)},Tb:function(){b.deleteBuffer(a);b.deleteBuffer(c)},h:function(){n.Tb();l.forEach(function(q){q.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);n.reset();k=!1;l.splice(0);d=0}};return n}(),Y=function(){var a=null,c=null,d=null,e=!1,f=[],k={v:-2,Qb:1},l={La:function(){return e},o:function(){if(!e){a=b.createFramebuffer();var n=aa.F();c=n&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=n&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;
e=!0}},Qe:function(){return c},fb:function(){return d},ca:function(){return b.FRAMEBUFFER},Xe:function(){return k},Je:function(){return a},instance:function(n){void 0===n.ac&&(n.ac=!1);var q=n.X?n.X:null,x=n.width,m=void 0!==n.height?n.height:n.width,p=a,y=null,z=!1,O=!1,N=0;q&&(x=x?x:q.A(),m=m?m:q.O());var F={sc:function(){z||(p=b.createFramebuffer(),z=!0,N=k.Qb++)},Cc:function(){F.sc();F.l();y=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,y);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,
x,m);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,y);b.clearDepth(1)},bind:function(C,G){N!==k.v&&(b.bindFramebuffer(c,p),k.v=N);q&&q.l();G&&b.viewport(0,0,x,m);C&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},ee:function(){N!==k.v&&(b.bindFramebuffer(c,p),k.v=N)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},le:function(){b.clear(b.COLOR_BUFFER_BIT)},me:function(){b.clear(b.DEPTH_BUFFER_BIT)},Sd:function(){b.viewport(0,0,x,m)},l:function(){N!==k.v&&(b.bindFramebuffer(c,
p),k.v=N)},rtt:function(C){q=C;k.v!==N&&(b.bindFramebuffer(b.FRAMEBUFFER,p),k.v=N);C.l()},H:function(){b.bindFramebuffer(c,null);k.v=-1},resize:function(C,G){x=C;m=G;y&&(b.bindRenderbuffer(b.RENDERBUFFER,y),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,x,m))},remove:function(){p===a||O||(b.bindFramebuffer(c,p),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),y&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(p),
y&&b.deleteRenderbuffer(y));O=!0}};n.ac&&F.Cc();f.push(F);return F},H:function(){b.bindFramebuffer(c,null);k.v=-1},Yd:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,aa.A(),aa.O());k.v=-1},reset:function(){k.v=-2},V:function(){0!==k.v&&(b.bindFramebuffer(c,a),k.v=0)},clear:function(){b.viewport(0,0,aa.A(),aa.O());b.clear(b.COLOR_BUFFER_BIT)},h:function(){l.H();f.forEach(function(n){n.remove()});b.deleteFramebuffer(a);l.reset();e=!1;f.splice(0);k.v=
-2;k.Qb=1}};return l}(),Ca=function(){function a(r){b.bindTexture(b.TEXTURE_2D,r)}function c(r){la[0]=r;r=ca[0];var D=r>>16&32768,h=r>>12&2047,J=r>>23&255;return 103>J?D:142<J?D|31744|((255==J?0:1)&&r&8388607):113>J?(h|=2048,D|(h>>114-J)+(h>>113-J&1)):D=(D|J-112<<10|h>>1)+(h&1)}function d(r){var D=new Uint16Array(r.length);r.forEach(function(h,J){D[J]=c(h)});return D}function e(){if(null!==oa.hb)return oa.hb;var r=k(d([1,1,1,1]));return null===r?!0:oa.hb=r}function f(){if(null!==oa.ib)return oa.ib;
var r=k(new Uint8Array([255,255,255,255]));return null===r?!0:oa.ib=r}function k(r){if(!Ia.La()||!N)return null;var D=null;try{var h=b.getError();D=B.instance({isFloat:!1,I:!0,array:r,width:1});h=b.getError();if(h!==b.NO_ERROR)return!1}catch(J){return!1}Y.H();b.viewport(0,0,1,1);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);Ia.set("s0");D.Eb(0);ka.g(!1,!0);r=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,r);r=.9<r[0];D.remove();Y.V();return r}var l=0,n=null,q=0,x=null,m=null,p=
null,y=null,z=null,O=null,N=!1,F=[],C={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,D:null,td:!1,I:!1,aa:null,Oa:4,nb:0},G=!1,g=null,w=null,A=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],Z=!1,na=!1,la=new Float32Array(1),ca=new Int32Array(la.buffer),oa={hb:null,ib:null},B={o:function(){if(!N){z=[b.RGB,!1,b.RGB,b.RGBA];O=[b.RGB,!1,b.RGB,b.RGBA];n=[b.TEXTURE0,b.TEXTURE1,
b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7];Z="undefined"!==typeof JEContext;na="undefined"!==typeof aa;Z&&JEContext.jf()&&n.push(b.TEXTURE8,b.TEXTURE9);x=[-1,-1,-1,-1,-1,-1,-1,-1];y=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT];if(!m){for(var r=new Float32Array(16384),D=0;16384>D;++D)r[D]=2*Math.random()-1;m={random:B.instance({isFloat:!0,isPot:!0,array:r,width:64}),yc:B.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}N=!0}},rd:function(){B.$d()},af:function(){return m.yc},
$d:function(){y[1]=aa.Ja()},Md:function(){O=z=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},pf:function(r,D){u.set("s1");Y.H();var h=r.A(),J=r.O();b.viewport(0,0,h,J);r.b(0);ka.g(!1,!1);b.readPixels(0,0,h,J,b.RGBA,b.UNSIGNED_BYTE,D)},Rb:function(r,D,h,J,qa){b.activeTexture(b.TEXTURE0);var va=b.createTexture();a(va);var ra=aa.F()&&b.RGBA32F?b.RGBA32F:b.FLOAT;J=J instanceof Float32Array?J:new Float32Array(J);0!==pa.yd(J.length)%1&&(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,
b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,qa);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,D,h,0,b.RGBA,ra,J);a(null);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Y.V();u.set("s0");b.viewport(0,0,D,h);b.framebufferTexture2D(Y.ca(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,r,0);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);a(va);ka.g(!0,!1);b.deleteTexture(va);x[0]=-1;
p=null;l=0},instance:function(r){function D(){a(sa);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,wa);h.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,h.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,h.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));h.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.Pe().TEXTURE_MAX_ANISOTROPY_EXT,
JESETTINGS.ce);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,h.isLinear?b.LINEAR:b.NEAREST);h.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,h.isMipmap&&!Ja?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,h.isMipmap&&!Ja?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);fa=z[h.Oa-1];ia=O[h.Oa-1];ja=y[qa];if(aa.F()){var v=b.RGBA32F;fa===b.RGBA&&ja===b.FLOAT&&v&&(ia=v);fa===b.RGB&&ja===b.FLOAT&&v&&(ia=v,fa=b.RGBA)}if(h.I&&!h.isFloat||h.isFloat&&h.isMipmap&&Ua.xd())(v=
b.RGBA16F)&&(ia=v),ja=aa.Ja();h.nb&&(eb=h.nb);h.isSrgb&&4===h.Oa&&(fa=JEContext.Ze());if(h.D)b.texImage2D(b.TEXTURE_2D,0,ia,fa,ja,h.D);else if(h.url)b.texImage2D(b.TEXTURE_2D,0,ia,fa,ja,Fa);else if(xa){try{b.getError(),b.texImage2D(b.TEXTURE_2D,0,ia,K,L,0,fa,ja,xa),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,ia,K,L,0,fa,ja,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,K,L,0,b.RGBA,b.UNSIGNED_BYTE,null))}catch(gc){b.texImage2D(b.TEXTURE_2D,0,ia,K,L,0,fa,ja,null)}h.isKeepArray||
(xa=null)}else b.texImage2D(b.TEXTURE_2D,0,ia,K,L,0,fa,ja,null);if(h.isMipmap)if(!Ja&&X)X.eb(),fb=!0;else if(Ja){v=Math.log(Math.min(K,L))/Math.log(2);Ra=Array(1+v);Ra[0]=sa;for(var M=1;M<=v;++M){var da=Math.pow(2,M),P=K/da;da=L/da;var Ka=b.createTexture();a(Ka);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,ia,P,da,0,fa,ja,null);a(null);Ra[M]=Ka}fb=!0}a(null);x[l]=-1;wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!1);gb=!0;h.aa&&X&&(h.aa(X),h.aa=null)}var h=Object.assign({},C,r),J=q++;null===h.isFlipY&&(h.isFlipY=h.url||h.array?!0:!1);h.data&&(h.array="string"===typeof h.data?Nb(h.data):h.isFloat?new Float32Array(h.data):new Uint8Array(h.data),h.isFlipY=!1);var qa=0,va=h.D?!0:!1,ra=null,Sa=null,Ib=!1,xb=null;h.I=h.I||h.isFloat;h.I&&(qa=1);h.td||aa.F()||!h.isFloat||!na||aa.Gb()||(h.isFloat=!1);h.isFloat&&(qa=2);h.isAnisotropicFiltering&&Z&&!JEContext.cf()&&(h.isAnisotropicFiltering=!1);var sa=b.createTexture(),
Fa=null,xa=!1,K=0,L=0,gb=!1,hb=!1,ya=null,Ba=null,yb=null,Va=null,ia=null,fa=null,ja=null,wa=h.isFlipY,Ja=h.I&&h.isMipmap&&"undefined"!==typeof Ua&&!Ua.Pc()?!0:!1,Ra=null,eb=-1,fb=!1,La={dc:!1,Fb:null,Sb:null};h.width&&(K=h.width,L=h.height?h.height:K);var X={get:function(){return sa},A:function(){return K},O:function(){return L},bf:function(){return h.url},df:function(){return h.isFloat},ff:function(){return h.I},gf:function(){return h.isLinear},eb:function(){b.generateMipmap(b.TEXTURE_2D)},Lc:function(v,
M){Ja?(v||(v=X.Wb()),X.Ua(M),a(Ra[v]),x[M]=-1):X.b(M)},Wb:function(){-1===eb&&(eb=Math.log(K)/Math.log(2));return eb},hd:function(v){if(Ja){v||(v=X.Wb());u.set("s11");X.Ua(0);for(var M=K,da=L,P=1;P<=v;++P)M/=2,da/=2,u.ya("u7",.25/M,.25/da),b.viewport(0,0,M,da),a(Ra[P-1]),b.framebufferTexture2D(Y.ca(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ra[P],0),ka.g(!1,1===P);x[0]=-1}else X.eb()},Ua:function(v){v!==l&&(b.activeTexture(n[v]),l=v)},b:function(v){if(!gb)return!1;X.Ua(v);if(x[v]===J)return!1;a(sa);x[v]=
J;return!0},Eb:function(v){b.activeTexture(n[v]);l=v;a(sa);x[v]=J},l:function(){p=X;b.framebufferTexture2D(Y.ca(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,sa,0)},M:function(){p=X;b.viewport(0,0,K,L);b.framebufferTexture2D(Y.ca(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,sa,0)},yb:B.yb,resize:function(v,M){K=v;L=M;D()},clone:function(v){v=B.instance({width:K,height:L,I:h.I,isFloat:h.isFloat,isLinear:h.isLinear,isMirrorY:h.isMirrorY,isFlipY:v?!wa:wa,isPot:h.isPot});Ia.set("s0");Y.V();v.l();b.viewport(0,0,K,L);X.b(0);
ka.g(!0,!0);return v},Sd:function(){b.viewport(0,0,K,L)},remove:function(){b.deleteTexture(sa);F.splice(F.indexOf(X),1);X=null},refresh:function(){X.Eb(0);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);va?b.texImage2D(b.TEXTURE_2D,0,ia,fa,b.UNSIGNED_BYTE,h.D):b.texImage2D(b.TEXTURE_2D,0,ia,K,L,0,fa,ja,xa);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Kb:function(){var v=K*L*4;Ba=[new Uint8Array(v),new Uint8Array(v),new Uint8Array(v),new Uint8Array(v)];ya=[new Float32Array(Ba[0].buffer),new Float32Array(Ba[1].buffer),
new Float32Array(Ba[2].buffer),new Float32Array(Ba[3].buffer)];yb=new Uint8Array(4*v);Va=new Float32Array(yb.buffer);hb=!0},rc:function(){hb||X.Kb();b.readPixels(0,0,K,4*L,b.RGBA,b.UNSIGNED_BYTE,yb);for(var v=K*L,M=2*v,da=3*v,P=0;P<v;++P)ya[0][P]=Va[P],ya[1][P]=Va[P+v],ya[2][P]=Va[P+M],ya[3][P]=Va[P+da];return ya},Id:function(){La.dc||(La.Fb=new Uint8Array(K*L*4),La.Sb=new Float32Array(La.buffer),La.dc=!0);b.readPixels(0,0,K,L,b.RGBA,b.UNSIGNED_BYTE,La.Fb);return La.Sb},Lb:function(v){Y.H();u.set("s12");
X.b(0);if(v)b.viewport(0,0,K,L),u.wb("u8",.25,.25,.25,.25),ka.g(!1,!0);else for(v=0;4>v;++v)b.viewport(0,L*v,K,L),u.wb("u8",A[v]),ka.g(!1,0===v)},Zd:function(v){var M=ja===y[0]&&!f();a(sa);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);M?(Ib||(ra=document.createElement("canvas"),ra.width=K,ra.height=L,Sa=ra.getContext("2d"),xb=Sa.createImageData(K,L),Ib=!0),xb.data.set(v),Sa.putImageData(xb,0,0),b.texImage2D(b.TEXTURE_2D,0,ia,fa,ja,ra)):b.texImage2D(b.TEXTURE_2D,0,ia,K,L,0,fa,ja,v);x[l]=J;wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,
!1)},Ef:function(v,M){a(sa);M&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,ia,fa,ja,v);x[l]=J;M&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},uf:function(v,M){var da=K*L,P=4*da;v=h.I?v?"RGBE":"JSON":"RGBA";M&&(v=M);M=aa.F()&&!1;var Ka=null;switch(v){case "RGBE":Ka="s40";break;case "JSON":Ka=M?"s0":"s12";break;case "RGBA":case "RGBAARRAY":Ka="s6"}hb||("RGBA"===v||"RGBE"===v||"RGBAARRAY"===v?(Ba=new Uint8Array(P),hb=!0):"JSON"!==v||M||X.Kb());Y.H();u.set(Ka);X.b(0);P=null;if("RGBA"===
v||"RGBE"===v||"RGBAARRAY"===v){b.viewport(0,0,K,L);ka.g(!0,!0);b.readPixels(0,0,K,L,b.RGBA,b.UNSIGNED_BYTE,Ba);if("RGBAARRAY"===v)return{data:Ba};G||(g=document.createElement("canvas"),w=g.getContext("2d"),G=!0);g.width=K;g.height=L;da=w.createImageData(K,L);da.data.set(Ba);w.putImageData(da,0,0);P=g.toDataURL("image/png")}else if("JSON"===v)if(M)P=new Float32Array(da),b.viewport(0,0,K,L),ka.g(!0,!0),b.readPixels(0,0,K,L,b.RGBA,b.FLOAT,P);else{for(P=0;4>P;++P)b.viewport(0,L*P,K,L),u.wb("u8",A[P]),
ka.g(!P,!P);X.rc();P=Array(da);for(M=0;M<da;++M)P[4*M]=ya[0][M],P[4*M+1]=ya[1][M],P[4*M+2]=ya[2][M],P[4*M+3]=ya[3][M]}return{format:v,data:P,width:K,height:L,isMirrorY:h.isMirrorY,isFlipY:"RGBA"===v?h.isFlipY:!h.isFlipY}}};h.isMipmap&&!Ja&&gb&&!fb&&(X.eb(),fb=!0);if(h.url)a(sa),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Fa=new Image,Fa.qe="Anonymous",Fa.crossOrigin="Anonymous",Fa.src=h.url,Fa.onload=function(){K=Fa.width;L=Fa.height;D()};else if(h.D){var Jb=function(){K=
void 0!==h.D.videoWidth?h.D.videoWidth:h.D.width;L=void 0!==h.D.videoHeight?h.D.videoHeight:h.D.height;K?D():setTimeout(Jb,1)};Jb()}else h.array?(h.I&&!h.isFloat?h.array instanceof Uint16Array?(xa=h.array,D()):e()?(xa=d(h.array),D()):(D(),B.Rb(sa,X.A(),X.O(),h.array,wa)):(xa=h.isFloat?h.array instanceof Float32Array?h.array:new Float32Array(h.array):h.array instanceof Uint8Array?h.array:new Uint8Array(h.array),D()),h.isKeepArray||(xa&&xa!==h.array&&(xa=null),delete h.array)):D();X.Ye=X.A;h.aa&&gb&&
(h.aa(X),h.aa=null);F.push(X);return X},H:function(r){r!==l&&(b.activeTexture(n[r]),l=r);x[r]=-1;a(null)},ge:function(r){m.random.b(r)},yb:function(){p=null;b.framebufferTexture2D(Y.ca(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){for(var r=0;r<n.length;++r)x[r]=-1;l=-1},sf:function(){l=-1},Xd:function(){for(var r=0;r<n.length;++r)B.H(r)},Tb:function(){m&&(m.random.remove(),m.yc.remove())},Df:function(r,D){if("RGBA"===r.format||"RGBE"===r.format){var h=new Image;h.src=r.data;h.onload=
function(){B.instance({isMirrorY:r.isMirrorY,isFlipY:r.isFlipY,isFloat:!1,D:h,aa:function(J){if("RGBA"===r.format)D(J);else{var qa=r.width,va=r.height,ra=B.instance({isMirrorY:r.isMirrorY,isFloat:!0,width:qa,height:va,isFlipY:r.isFlipY});Y.V();b.viewport(0,0,qa,va);u.set("s41");ra.l();J.b(0);ka.g(!0,!0);B.H(0);D(ra);b.flush();setTimeout(J.remove,50)}}})}}else"JSON"===r.format?D(B.instance({isFloat:!0,isFlipY:r.isFlipY,width:r.width,height:r.height,array:new Float32Array(r.data)})):D(!1)},h:function(){p&&
(ta.V(),B.yb(),ta.H());B.Xd();F.slice(0).forEach(function(r){r.remove()});F.splice(0);N=!1;q=0;Ua.h()}};return B}(),Qb=function(){return{instance:function(a){var c=[Ca.instance(a),Ca.instance(a)],d=[c[1],c[0]],e=d,f={Pd:function(k){e[1].l();e[0].b(k);f.vc()},vf:function(k){e[1].M();e[0].b(k);f.vc()},vc:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},b:function(k){e[0].b(k)},fe:function(k){e[1].b(k)},Se:function(){return e[0]},remove:function(){e[0].remove();e[1].remove();
e=null}};return f}}}(),aa=function(){function a(){c="undefined"===typeof Aa?JEContext:Aa;d=!0}var c=null,d=!1,e=!1,f=null,k=null,l=!1,n=null,q=!1,x=null,m=!1,p=null,y=!1,z=!0,O=!0,N=!0,F=null,C="undefined"===typeof window?{}:window,G={o:function(){if(d)return!0;a();G.Ob();G.cb();G.dd();G.ed();Y.o();Ca.o();if(!G.Zc())return!1;ka.o();Ca.rd();return!0},A:function(){d||a();return c.A()},O:function(){d||a();return c.O()},F:function(){d||a();return c.F()},dd:function(){y=(p=b.getExtension("EXT_color_buffer_float")||
b.getExtension("WEBGL_color_buffer_float")||b.getExtension("OES_color_buffer_float"))?!0:!1;C.GL_EXT_COLORBUFFERFLOAT=p},ed:function(){b.getExtension("EXT_color_buffer_half_float")||b.getExtension("WEBGL_color_buffer_half_float")||b.getExtension("OES_color_buffer_half_float")},Ob:function(){if(!e){f=b.getExtension("OES_texture_float")||b.getExtension("MOZ_OES_texture_float")||b.getExtension("WEBKIT_OES_texture_float");if((l=(C.GL_EXT_FLOAT=f)?!0:!1)||this.F())k=b.getExtension("OES_texture_float_linear")||
b.getExtension("MOZ_OES_texture_float_linear")||b.getExtension("WEBKIT_OES_texture_float_linear"),C.GL_EXT_FLOATLINEAR=k;e=!0}},cb:function(){if(!m){if(n=b.getExtension("OES_texture_half_float")||b.getExtension("MOZ_OES_texture_half_float")||b.getExtension("WEBKIT_OES_texture_half_float"))F=n.HALF_FLOAT_OES,q=!0;!F&&b.HALF_FLOAT&&(F=b.HALF_FLOAT);!F&&b.FLOAT&&(F=b.FLOAT);C.GL_EXT_HALFFLOAT=n;if(q||this.F())x=b.getExtension("OES_texture_half_float_linear")||b.getExtension("MOZ_OES_texture_half_float_linear")||
b.getExtension("WEBKIT_OES_texture_half_float_linear"),C.GL_EXT_HALFFLOATLINEAR=x;m=!0}},Ja:function(){G.cb();return F},Gb:function(){return z},Oc:function(){return O},he:function(){return N},Nc:function(){return y},ad:function(){O=z=!0;var g=b.createFramebuffer();b.bindFramebuffer(b.FRAMEBUFFER,g);var w=b.createTexture();b.bindTexture(b.TEXTURE_2D,w);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,
0,G.F()&&b.RGBA32F?b.RGBA32F:b.RGBA,1,1,0,b.RGBA,b.FLOAT,null);b.framebufferTexture2D(Y.ca(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,w,0);var A=b.checkFramebufferStatus(Y.fb());A!==b.FRAMEBUFFER_COMPLETE&&(z=!1);b.texImage2D(b.TEXTURE_2D,0,G.F()&&b.RGBA16F?b.RGBA16F:b.RGBA,1,1,0,b.RGBA,G.Ja(),null);b.framebufferTexture2D(Y.ca(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,w,0);A=b.checkFramebufferStatus(Y.fb());A!==b.FRAMEBUFFER_COMPLETE&&(O=!1);b.bindTexture(b.TEXTURE_2D,null);b.bindFramebuffer(b.FRAMEBUFFER,null);
b.deleteTexture(w);b.deleteFramebuffer(g)},$c:function(){var g=Y.instance({width:1});g.sc();var w=Ca.instance({width:1,isFloat:!0,Oa:3});g.l();w.l();b.flush();b.checkFramebufferStatus(Y.fb())!==b.FRAMEBUFFER_COMPLETE?(Ca.Md(),N=!1):N=!0;g.remove();w.remove()},Zc:function(){G.ad();if(!z&&!O)return!1;G.$c();return!0},h:function(){Ca.h();Ia.h();Y.h();ka.h();d=!1}};return G}(),R=ka,ta=Y,S=Ca,Ua=function(){function a(z,O,N,F){b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,F?b.NEAREST_MIPMAP_NEAREST:
b.LINEAR);var C=null;if(null!==N)try{if(C=b.getError(),C!==b.NO_ERROR&&console.log("GLERR in test_mipmapping():",C),b.texImage2D(b.TEXTURE_2D,0,z,2,2,0,b.RGBA,O,N),C=b.getError(),C!==b.NO_ERROR)return!1}catch(G){return!1}F&&b.generateMipmap(b.TEXTURE_2D);R.pa();R.g(!1,!0);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,l);C=b.getError();C===b.INVALID_OPERATION&&"undefined"!==typeof b.PIXEL_PACK_BUFFER&&(b.bindBuffer(b.PIXEL_PACK_BUFFER,null),b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,l),C=b.getError());
return C!==b.NO_ERROR?!1:0!==l[0]}function c(z){return aa.Gb()&&a(m,b.FLOAT,new Float32Array(q),z)?(k=f.Bb,!0):!1}function d(z,O){if(!aa.Oc())return!1;if(a(p,aa.Ja(),new Uint16Array(q),z)||a(p,b.FLOAT,new Float32Array(q),z))return k=f.Da,!0;b.bindTexture(b.TEXTURE_2D,O);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null);Ca.Rb(O,1,1,new Float32Array(q),!1);b.bindTexture(b.TEXTURE_2D,O);return a(p,null,null,z)?(k=f.Da,!0):!1}var e=!1,f={Bb:3,Da:2,RGBA8:0},k=f.RGBA8,l=new Uint8Array(4),
n=[.8,1,.8,1],q=n.concat(n,n,n),x=!0,m=null,p=null,y={o:function(){aa.Ob();aa.cb();p=m=b.RGBA;if(Aa.F()){var z=b.RGBA32F;z&&(m=z);(z=b.RGBA16F)&&(p=z)}R.o();ta.reset();ta.H();b.viewport(0,0,1,1);u.set("s0");e=!0;z=b.createTexture();b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,z);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);if(d(!0,z)||c(!0))return!0;x=!1;if(d(!1,
z)||c(!1))return!0;if(Aa.F()){p=m=b.RGBA;if(d(!0)||c(!0))return!0;x=!1;if(d(!1)||c(!1))return!0}return!1},Pc:function(){return x},Te:function(){return k},ef:function(){e||y.o();return k===f.Bb},xd:function(){e||y.o();return k===f.Da},h:function(){e=!1;k=f.RGBA8;x=!0}};return y}(),Xb=function(){return{instance:function(a){var c=S.instance(a.alpha),d=S.instance(a.beta);return{cd:function(){c.b(1);d.b(2)}}}}}(),Lb=function(){return{instance:function(a){var c=null,d=!1,e=!1,f=null,k=!1,l=!1,n=null,q=
"undefined"===typeof a.preprocessing?!1:a.preprocessing,x="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,H&&void 0!==H.Ic&&(a.mask=H.Ic+a.mask),c=S.instance({isFloat:!1,url:a.mask}));var m=!1;a.customInputShader&&(m="s42",u.Cb({name:"_",id:m,a:a.customInputShader,c:["uSource"],precision:"lowp"}),u.K(m,[{type:"1i",name:"_",value:0}]));switch(q){case "sobel":n="s31";k=!0;break;case "meanNormalization":n="s32";k=!0;break;case "grayScale":n="s28";k=!1;break;case "grayScaleTilt":n=
"s29";l=!0;k=!1;break;case "rgbGrayTilt":n="s30";l=!0;k=!1;break;case "copy":n=m?m:"s0";break;case "inputLightRegulation":n=m?m:"s28";f=Yb.instance({$b:x,pc:a.size,ic:a.nBlurPass,wd:!1});e=!0;break;case "direct":case "none":n=!1;break;default:n="s3"}l&&u.K(n,[{name:"u26",type:"1f",value:a.tilt}]);d&&(n+="Mask");var p=S.instance({isFloat:!1,isPot:!1,width:a.size}),y={A:function(){return x},gb:function(){return y.A()},nd:function(){return e?f.Xb():p},J:function(){ta.V();n&&(u.set(n),k&&u.B("u27",1/
a.size),p.M(),d&&c.b(1),R.g(!1,!1),p.b(0),e&&f.process(p))},h:function(){p.remove();d&&c.remove()}};return y}}}(),Mb=function(){return{instance:function(a){"undefined"===typeof a.disableNormalize&&(a.disableNormalize=!1);var c={input:null,ha:null,kb:null,T:null,Qa:null,sb:null,tb:null},d=null,e=[],f=[],k=!1,l=null,n=!0,q=-1,x=a.isReorganize?a.isReorganize:!1,m=a.kernelsNumber?!0:!1,p=a.dynPelu?Xb.instance(a.dynPelu):!1,y=p?!0:!1,z={isEnabled:!1};a.vd?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:
a.Ra.gb(),n=!1):"full"===a.connectivityUp&&(a.sparsity=a.Ra.gb());var O={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[a.activation],N=a.sparsity*a.sparsity,F=!1,C=a.size,G="";if(a.maxPooling){switch(a.maxPooling.size){case 2:G="s33";break;case 4:G="s34"}F=!0;C/=a.maxPooling.size;c.sb=S.instance({isFloat:!0,isPot:!1,width:C})}var g=void 0!==a.Ed&&a.Ed?!0:!1,w=null,A=null,Z=null;if(g){w="s43"+a.index.toString();u.Zb("s43",w,[((a.normalization.n-
1)/2).toFixed(1)]);u.K(w,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u31",value:a.normalization.k}]);var na={isFloat:!0,isPot:!0,width:a.size};A=S.instance(na);Z=S.instance(na)}var la=-1,ca=null;n&&(c.T=S.instance({isFloat:!0,isPot:!1,width:a.size}));c.ha=S.instance(a.bias);var oa={A:function(){return a.size},gb:function(){return C},Ub:function(){return a.classesCount},
Kc:function(B){d.b(B)},Gd:function(){a.remap&&a.remap.isEnabled&&(z={isEnabled:!0,Ad:S.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),layers:a.remap.layers.map(function(B){return a.parent.md(B)}),depth:a.remap.depth})},Od:function(){switch(a.connectivityUp){case "direct":ca=Zb.instance(a.connectivity);break;case "square":ca=$b.instance(a.connectivity);break;case "squareFast":ca=ac.instance(a.connectivity,a.activation);break;
case "full":ca=bc.instance(a.connectivity);break;case "conv":q=a.kernelsNumber,ca=cc.instance(a.connectivity),x&&(c.Qa=S.instance({width:C,isFloat:!0,isFlipY:!1,isPot:!1}))}if(ca.ka){var B=a.size*a.sparsity;la=Math.log(B/a.size)/Math.log(2);c.input=S.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:B,nb:la});c.kb=S.instance({isFloat:!0,isPot:!0,width:a.size})}},J:function(B){d=B;ca.ka?(c.input.M(),m&&c.ha.b(2),ca.J(z),c.input.b(0),c.input.hd(la),c.kb.M(),m?u.set("s0"):(u.set("s27"),u.B("u25",N),c.ha.b(1)),
c.input.Lc(la,0),R.g(!1,!1),u.set(O),g?A.l():c.T.l(),c.kb.b(0),y&&p.cd(),R.g(!1,!1)):(c.T.M(),c.ha.b(1),ca.J());g&&(u.set(w),Z.l(),A.b(0),R.g(!1,!1),u.set("s44"),u.B("u6",1),c.T.l(),Z.b(1),R.g(!1,!1));if(n)return F?(c.sb.M(),c.T.b(0),u.set(G),u.ya("u7",1/a.size,1/a.size),R.g(!1,!1),B=c.sb):B=c.T,B.b(0),x&&(c.Qa.l(),u.set("s21"),u.ya("u12",q,C/q),R.g(!1,!1),B=c.Qa,c.Qa.b(0)),B;B=c.T;a.disableNormalize||(u.set("gpuRawAvg"===k?"s8":"s7"),u.B("u4",1/a.size),c.tb.M(),c.T.b(0),R.g(!1,!1),B=c.tb);switch(k){case "cpuRGBA2Float":B.Lb(!1);
B=oa.Hd(B);l(B);break;case "cpuMeanFloat":B.Lb(!0);B=B.Id();l(B);break;case "gpuRawAvg":case "gpuRaw":B.b(0);case "none":l(B)}return!1},Xc:function(B){B&&"undefined"!==typeof B.oc&&(k=B.oc,l=B.Fd);c.T=S.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});B="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var r=0,D=0,h=0;r<B;++r)e.push(D+(a.size-1-h)*a.size),f.push([-1,-1,-1,-1]),++D,D===a.size&&(D=0,++h);a.disableNormalize||(c.tb=S.instance({isFloat:!0,isPot:!0,
width:a.size}))},Hd:function(B){var r=B.rc();e.forEach(function(D,h){f[h][0]=r[0][D];f[h][1]=r[1][D];f[h][2]=r[2][D];f[h][3]=r[3][D]});return f},h:function(){for(var B in c){var r=c[B];r&&r.remove()}ca&&(ca.h(),ca=null)}};a.Ra&&oa.Od(a.Ra);return oa}}}();zb.Mb=function(a){a.forEach(function(c){c.Vc&&S.Mb(c.Vc.Ff);c.ha&&S.Mb(c.ha)})};var Zb=function(){return{instance:function(a){var c=S.instance(a.weights);delete a.weights.data;return{ka:!0,Ia:function(){return 1},h:function(){c.remove()},qd:function(){return c},
J:function(){u.set("s26");c.b(1);R.g(!1,!1)}}}}}(),bc=function(){return{instance:function(a){var c=a.fromLayerSize,d=S.instance(a.weights);delete a.weights.data;return{ka:!0,Ia:function(){return c},h:function(){d.remove()},J:function(e){if(e.isEnabled){u.set("s24");e.Ad.b(3);var f,k=Math.min(e.layers.length,e.depth);for(f=0;f<k;++f)e.layers[f].Kc(4+f)}else u.set("s23");u.B("u16",a.toLayerSize);d.b(1);R.g(!1,!1)}}}}}(),$b=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,
e=a.toSparsity,f=e*d,k=f/c,l=c/d,n=0,q=0,x=0,m=Array(e*d*e*d*4),p=Array(e*d*e*d*4),y=Array(c*c),z=0;z<y.length;++z)y[z]=0;z=Math.floor(e/2);for(var O=.5/d,N=.5/c,F=.5/f,C=0;C<d;++C)for(var G=Math.round(C*l),g=0;g<d;++g){var w=Math.round(g*l),A=C/d,Z=g/d;A+=O;Z+=O;for(var na=0;na<e;++na){var la=G+na-z;0>la&&(la+=c);la>=c&&(la-=c);for(var ca=0;ca<e;++ca){var oa=n/f,B=q/f,r=w+ca-z;0>r&&(r+=c);r>=c&&(r-=c);var D=la/c,h=r/c;B=1-B-1/f;D+=N;h+=N;oa+=F;B+=F;var J=C*e+na,qa=g*e+ca;qa=d*e-qa-1;J=qa*d*e+J;m[4*
J]=oa;m[4*J+1]=B;m[4*J+2]=D;m[4*J+3]=h;h=y[r*c+la]++;J=h%k;D=la*k+J;r=r*k+(h-J)/k;r=c*k-1-r;r=r*c*k+D;p[4*r]=oa;p[4*r+1]=B;p[4*r+2]=A;p[4*r+3]=Z;++n>=f&&(n=0,++q);++x}}}y=null;var va=S.instance(a.weights);delete a.weights.data;var ra=S.instance({width:f,isFloat:!0,array:new Float32Array(p),isPot:!0});p=null;var Sa=S.instance({width:f,isFloat:!0,array:new Float32Array(m),isPot:!0});m=null;return{ka:!0,Ia:function(){return k},h:function(){ra.remove();Sa.remove();va.remove()},J:function(){u.set("s22");
va.b(1);Sa.b(2);R.g(!1,!1)}}}}}(),cc=function(){return{instance:function(a){var c=a.kernelsNumber,d=a.toSparsity,e=d*a.toLayerSize/a.fromLayerSize,f=S.instance(a.weights);delete a.weights.data;return{ka:!0,Ia:function(){return e},$e:function(){return d},qd:function(){return f},h:function(){f.remove()},J:function(){u.set("s25");u.B("u22",c);u.B("u23",d);u.B("u16",a.toLayerSize);u.B("u24",a.fromLayerSize);f.b(1);R.g(!1,!1)}}}}}(),ac=function(){return{instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,
f=a.toSparsity,k=a.stride?a.stride:1,l=f*e/d,n=e<d,q=d/e,x=S.instance(a.weights);delete a.weights.data;var m="s45"+[d.toString(),e.toString(),f.toString(),k.toString(),c].join("_");u.fd(m)||(a=Wb.jd(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u16",value:e},{type:"1f",name:"u30",value:k}],n&&e.push({type:"1f",name:"u24",value:d}),d=[(n?l:f).toFixed(1),a],n&&d.push(q.toFixed(1)),u.Zb(n?"s39":"s38",m,d),u.K(m,e.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",
name:"u13",value:3}])));return{ka:!1,Ia:function(){return l},h:function(){x.remove()},J:function(){u.set(m);x.b(3);R.g(!1,!1)}}}}}(),Yb=function(){return{instance:function(a){var c=a.ic?a.ic:3,d=a.$b?a.$b:64,e=a.pc?a.pc:64,f=a.wd?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var k=S.instance(a),l=S.instance(a),n=S.instance(a),q=S.instance(a),x=S.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),m=1/d;return{process:function(p){u.set("s35");q.l();R.g(f,!1);u.set("s36");for(var y=0;y<c;++y)k.l(),
u.ya("u7",m,0),R.g(f,!1),n.l(),q.b(0),R.g(f,!1),l.l(),k.b(0),u.ya("u7",0,m),R.g(f,!1),q.l(),n.b(0),R.g(f,!1),y!==c-1&&l.b(0);u.set("s37");x.l();p.b(0);l.b(1);q.b(2);R.g(f,!1);x.b(0)},Xb:function(){return x}}}}}(),T={pd:function(){return T.Jb()?document.createElement("video"):!1},ta:function(a,c){a[c]=!0;a.setAttribute(c,"true")},Sc:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},Hb:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},kd:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},ec:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},Rc:function(){return T.Ib()||T.Hb()},Ib:function(){var a=navigator.userAgent.toLowerCase();return-1!==
a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},He:function(){return T.Sc()?T.ec()?window.innerHeight/window.innerWidth*45:45:45},Jb:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},tf:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},Uc:function(a){if(!a)return a;var c=!1;if(a.video){var d=function(e){var f={};"undefined"!==typeof e.min&&(f.min=e.min);"undefined"!==typeof e.max&&
(f.max=e.max);"undefined"!==typeof e.ideal&&(f.ideal=e.ideal);return f};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=a.video.facingMode)}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&(c.deviceId=a.deviceId);return c},wc:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},Wc:function(a){function c(p){return[480,
576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(y,z){return Math.abs(y-p)-Math.abs(z-p)})}function d(p){var y=T.Uc(a);e.push(p(y))}var e=[];if(!a||!a.video)return e;if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var f=c(a.video.width.ideal).slice(0,3),k=c(a.video.height.ideal).slice(0,3),l={},n=0;for(l.$=void 0;n<f.length;l={$:l.$},++n){l.$=f[n];var q={},x=0;for(q.Z=void 0;x<k.length;q={Z:q.Z},++x)if(q.Z=k[x],l.$!==a.video.width.ideal||q.Z!==a.video.height.ideal){var m=
Math.max(l.$,q.Z)/Math.min(l.$,q.Z);m<4/3-.1||m>16/9+.1||d(function(p,y){return function(z){z.video.width.ideal=p.$;z.video.height.ideal=y.Z;return z}}(l,q))}}}d(function(p){return T.wc(p)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(p){delete p.video.width.ideal;delete p.video.height.ideal;return p}),d(function(p){delete p.video.width;delete p.video.height;return p}));a.video.facingMode&&(d(function(p){delete p.video.facingMode;return p}),a.video.width&&
a.video.height&&d(function(p){T.wc(p);delete p.video.facingMode;return p}));e.push({audio:a.audio,video:!0});return e},Vd:function(a){if(T.ec()){if(!a||!a.video)return!1;var c=a.video.width,d=a.video.height;if(!c||!d)return!1;if(c.ideal&&d.ideal&&c.ideal>d.ideal)return a.video.height=c,a.video.width=d,!0}return!1},Na:function(a){a.volume=0;T.ta(a,"muted");if(T.Ib()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,
!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;T.ta(a,"muted")},5)}},xc:function(a,c,d){return new Promise(function(e,f){if(a.srcObject&&a.srcObject.getVideoTracks){var k=a.srcObject.getVideoTracks();1!==k.length?f("INVALID_TRACKNUMBER"):(k=k[0],c?T.get(a,e,f,d):(k.stop(),e()))}else f("BAD_IMPLEMENTATION")})},Yb:function(a,c,d,e){function f(l){k||(k=!0,d(l))}var k=!1;return navigator.mediaDevices.getUserMedia(e).then(function(l){function n(){setTimeout(function(){if(a.currentTime){var q=
a.videoWidth,x=a.videoHeight;if(0===q||0===x)f("VIDEO_NULLSIZE");else{q&&(a.style.width=q.toString()+"px");x&&(a.style.height=x.toString()+"px");q={Qc:null,Td:null,Bd:null};try{var m=l.getVideoTracks()[0];m&&(q.Bd=m,q.Qc=m.getCapabilities(),q.Td=m.getSettings())}catch(p){}T.Rc()?a.parentNode&&null!==a.parentNode?(k||c(a,l,q),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),T.Na(a),k||c(a,l,q),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";
a.style.bottom="0px";a.style.right="0px";T.Na(a);setTimeout(function(){a.play()},100)},80)):k||c(a,l,q)}}else f("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof a.srcObject?a.srcObject=l:(a.src=window.URL.createObjectURL(l),a.videoStream=l);T.Na(a);a.addEventListener("loadeddata",function(){var q=a.play();T.Na(a);"undefined"===typeof q?n():q.then(function(){n()}).catch(function(){f("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(l){f(l)})},get:function(a,c,d,e){if(!a)return d&&d("VIDEO_NOTPROVIDED"),
!1;if(!T.Jb())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;if(e&&e.video){if(T.Hb()){var f=T.kd();(12>f[0]||12===f[0]&&2>f[1])&&T.Vd(e)}e.video.width&&e.video.width.ideal&&(a.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(a.style.height=e.video.height.ideal+"px")}T.ta(a,"autoplay");T.ta(a,"playsinline");e&&e.audio?a.volume=0:T.ta(a,"muted");T.Yb(a,c,function(){function k(n){if(0===n.length)d("INVALID_FALLBACKCONSTRAINTS");else{var q=n.shift();T.Yb(a,c,function(){k(n)},q)}}
var l=T.Wc(e);k(l)},e)},od:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},ie:function(a,c,d){var e={};e[c]=d;c=[];c.push(e);a.applyConstraints({advanced:c}).catch(function(){})}},
H={save:"NNC.json",Db:0,Hc:25,Va:.2,ga:[45,55],de:1/3.5,Ca:[2,7],Jd:{minScale:.15,maxScale:.6,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,nDetectsPerLoop:-1},Wd:50,hc:.5,ob:.4,Cd:8,Bc:.8,Ac:1,Ud:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,.98],alphaRange:[.05,1]},Ba:[.65,1,.262],ea:[.092,.092,.3],Ec:.2,Gc:2,Fc:.1,Dd:8,lc:1,gd:cb.Ma.bind(null,.3,.7),ae:20,uc:3},ha={facingMode:"user",idealWidth:800,
idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,rotate:0,flipX:!1},ba={qb:-3,zd:-1,error:-2,play:1,pause:2},ea=ba.qb,t=null,dc={mb:!1,element:null,X:null,Y:null,u:[0,0],C:[.5,.5],m:[.5,0,0,.5],Sa:0,ra:null,lb:!1},I=null,ec={qa:null,Ga:null,Ab:"./",ma:null,W:null,Ea:H.Db,qc:H.Db,Ka:!1,ia:!1},za=null,W=null,ua=null;var vb=Oa=Xa=Wa=Na=Ma=Ya=Pa=lb=kb=jb=ib=ab=$a=Za=0;var V=null,fc={N:0,P:0,u:[0,0],va:null},U={Aa:null,buffer:null,ea:null,Ba:null,S:H.lc,ua:null},Ta=null,ma=null,
bb=null,Qa=null,E={i:1,ba:0,L:null,cc:!1,fc:0,rb:0},Q={sa:0,timestamp:0,jc:0,kc:0,G:H.Ca[0],pb:H.Ca[0],mc:0,ja:0,oe:1},rb=[],sb=[],Kb={VERSION:"1.3.1",init:function(a){function c(){ea!==ba.error&&2===++e&&(Ha(),Gb(),Ga(),I.qa&&(I.qa(!1,{GL:b,canvasElement:I.W,videoTexture:t.Y.get(),maxFacesDetected:E.i,videoElement:t.element}),pb()),ob())}if(ea!==ba.qb)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;ea=ba.zd;t=Object.assign({},dc);I=Object.assign({},ec);V=Object.assign({},fc);E.L=
[0];U.ea=H.ea.slice(0);U.Ba=H.Ba.slice(0);a.callbackReady&&(I.qa=a.callbackReady);a.callbackTrack&&(I.Ga=a.callbackTrack);a.nExpressions&&(U.S=a.nExpressions);a.expressionsEasings&&(U.ua=a.expressionsEasings);"undefined"!==typeof a.animateDelay&&(I.Ea=a.animateDelay);"undefined"!==typeof a.NNCpath&&(I.Ab=a.NNCpath);"undefined"!==typeof a.NNC&&(I.ma=a.NNC);"undefined"!==typeof a.maxFacesDetected&&(E.i=Math.max(1,a.maxFacesDetected));"undefined"!==typeof a.followZRot&&(I.ia=a.followZRot?!0:!1);if(E.i>
H.Cd)return Ea("MAXFACES_TOOHIGH"),!1;if(!a.canvasId&&!a.canvas)return Ea("NO_CANVASID"),!1;I.W=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!I.W)return Ea("INVALID_CANVASID"),!1;V.N=I.W.width;V.P=I.W.height;if(!V.N||!V.P)return Ea("INVALID_CANVASDIMENSIONS"),!1;for(var d=0;d<E.i;++d)rb.push(new Float32Array(H.Dd)),sb.push(0);W=Object.create(H.Jd);a.scanSettings&&(Object.assign(W,a.scanSettings),-1!==W.nDetectsPerLoop&&(Q.G=W.nDetectsPerLoop,Q.pb=W.nDetectsPerLoop));ua=Object.create(H.Ud);
a.stabilizationSettings&&Object.assign(ua,a.stabilizationSettings);var e=0;a.videoSettings&&a.videoSettings.videoElement?db(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(ha,a.videoSettings),Hb(a.onWebcamAsk,a.onWebcamGet,function(f){db(f,c)}));Sb(function(f){if(!Tb())return!1;za=new zb({});za.Ld(f.layers);za.Nd({oc:"gpuRawAvg",Fd:Vb});u.Dc([{id:"s48",name:"_",fa:"attribute vec2 a0;uniform mat2 u32;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u32*a0*vec2(1.,-1.);}",
Fa:["a0"],na:[2],a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1","u32"],precision:"lowp"},{id:"s49",name:"_",a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",fa:"attribute vec2 a0;uniform sampler2D u33;uniform vec2 u34;uniform float u35,u36;varying vec2 vv0;void main(){vec4 a=texture2D(u33,vec2(.17,u35));vec2 d=a.gb,f=a.a*u34;float b=cos(u36),c=sin(u36);vec2 g=mat2(b,c,-c,b)*a0;vv0=d+g*.5*f,gl_Position=vec4(a0,0.,1.);}",
Fa:["a0"],na:[2],c:["u1","u33","u34","u35","u36"],precision:"lowp"},{id:"s50",name:"_",a:"uniform sampler2D u37,u33;uniform vec3 u38,u39;uniform float u40,u41,u42,u35,u43,u36,u44;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 f=texture2D(u37,vec2(.625,.625)),g=texture2D(u37,vec2(.875,.625)),a=texture2D(u33,vec2(.17,u35));float b=dot(f,e),h=dot(g,e);bool i=b>u41&&b>h+u42;i?a.r=2.:a.r>u40?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u43;if(a.r<.9)a=vec4(1.,u38);else{a.r*=step(1.9,a.r);float j=dot(e,texture2D(u37,vec2(.875,.875))),k=dot(e,texture2D(u37,vec2(.125,.625))),l=dot(e,texture2D(u37,vec2(.375,.625))),c=cos(u36),d=sin(u36);vec2 m=mat2(c,d*u44,-d/u44,c)*vec2(j,k);a.gba+=vec3(m,l)*u39*a.a;}gl_FragColor=a;}",
fa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"u37 u33 u38 u40 u39 u43 u36 u44 u41 u42 u35".split(" ")},{id:"s51",name:"_",fa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",a:"uniform sampler2D u37;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u37,vec2(.125,.875))),b=dot(e,texture2D(u37,vec2(.375,.875))),c=dot(e,texture2D(u37,vec2(.625,.875))),d=dot(e,texture2D(u37,vec2(.625,.625)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
c:["u37"]},{id:"s52",name:"_",fa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",a:"uniform sampler2D u37;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u37,vec2(.375,.375))),b=dot(e,texture2D(u37,vec2(.625,.375))),c=dot(e,texture2D(u37,vec2(.875,.375))),d=dot(e,texture2D(u37,vec2(.125,.125)));gl_FragColor=vec4(a,b,c,d);}",c:["u37"]},{id:"s47",name:"_",a:"uniform sampler2D u33;uniform vec2 u45;uniform float u46;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u33,vv0+u45);a.a=mix(a.a*u46,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
c:["u33","u46","u45"]}]);Cb();Rb();ub();tb();c()});return!0},destroy:function(){return new Promise(function(a,c){Kb.toggle_pause(!0,!0).catch(function(){c()}).then(function(){za&&za.h();Aa.h();za=ma=Ta=null;rb.splice(0);sb.splice(0);ea=ba.qb;a()})})},toggle_pause:function(a,c){if(!nb())return Promise.reject();var d=null;d=c?T.xc(t.element,!a,t.ra):Promise.resolve();a?Bb():d.then(function(){ob()});return d},update_videoSettings:function(a){Bb();return new Promise(function(c){T.xc(t.element,!1,t.ra).then(function(){Object.assign(ha,
a);Hb(null,null,function(d){db(d,function(){Ha();Ga();ob();c()})})})})},toggle_slow:function(a){nb()&&ea===ba.play&&(a&&!I.Ka?(I.qc=I.Ea,W.nDetectsPerLoop=1,this.set_animateDelay(100),I.Ka=!0):!a&&I.Ka&&(W.nDetectsPerLoop=-1,this.set_animateDelay(I.qc),I.Ka=!1))},set_animateDelay:function(a){I.Ea=a},resize:function(){var a=I.W.width,c=I.W.height;if(!wb()&&a===V.N&&c===V.P)return!1;V.N=a;V.P=c;ub();tb();Ha();Ga();t.Y&&t.Y.resize(V.N,V.P);return!0},set_inputTexture:function(a,c,d){t.u[0]=c;t.u[1]=d;
t.mb=!0;Ha();pb();Ga();u.set("s48");t.Y.M();b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,a);R.g(!0,!0)},reset_GLState:function(){pb();V.va.remove();U.Aa.remove();Cb()},reset_inputTexture:function(){wb();t.mb=!1;Ha();Ga()},get_videoDevices:function(a){return T.od(a)},set_scanSettings:function(a){Object.assign(W,a);-1!==W.nDetectsPerLoop&&(Q.G=W.nDetectsPerLoop,Q.pb=W.nDetectsPerLoop);ub();tb()},set_stabilizationSettings:function(a){Object.assign(ua,a)},set_videoOrientation:function(a,c){nb()&&
(ha.flipX=c,ha.rotate=a,Ha(),Ga())},update_videoElement:function(a,c){db(a?a:t.element,function(){Gb();Ha();Ga();c&&c()})}};return Kb};window.JEEFACEFILTERAPI=window.JEEFACEFILTERAPIGEN();
;return JEEFACEFILTERAPI||window.JEEFACEFILTERAPI;})();