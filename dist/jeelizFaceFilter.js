 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZFACEFILTER=(function(){window.JEELIZFACEFILTERGEN=function(){function Kb(a){var c=null,d=null,h=null,k=0,p=this,q=null,n={ab:[],Ib:"none",Ac:!1,Hb:null,grid:null};this.A=function(){this.Fe(q.ab);h.kg({Ib:q.Ib,Ac:q.Ac,Hb:q.Hb})};this.qf=function(l){return c[l]};this.Tb=function(l){["s32","s34","s27"].forEach(function(r){F.T(r,[{type:"2f",name:"u20",value:l}])});c&&c.forEach(function(r){r.Tb(l)})};this.Fe=function(l){var r=null;k=l.length;var w=null!==q.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),y=w?q.grid:[1,1];
w&&this.Tb(y);c=l.map(function(x,A){x=Object.assign({},x,{index:A,parent:p,Kb:r,Ef:A===k-1,Ya:w,Y:y});return r=A=0===A?Lb.instance(x):Mb.instance(x)});d=c[0];h=c[k-1];c.forEach(function(x,A){0!==A&&x.Tf()})};this.U=function(l){l.h(0);var r=l;c.forEach(function(w){r=w.U(r,!1)});return r};this.pf=function(){return d.mf()};this.Wa=function(){return h.sf()};this.vd=function(){return h.vd()};this.m=function(){c&&(c.forEach(function(l){l.m()}),h=d=c=null,k=0)};"undefined"!==typeof a&&(q=Object.assign({},
n,a),this.A())}function fb(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function tb(a,c,d){var h=1,k=0;for(d=c+d-1;d>=c;--d)k+=h*fb(a,d),h*=2;return k}function ub(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),h=0;h<c;++h)d[h]=a.charCodeAt(h);return d}function gb(a){return"string"===typeof a?JSON.parse(a):a}function Nb(a){if("undefined"===typeof gb(a).nb){var c=gb(a);a=c.ne;var d=c.nf,h=c.n;c=ub(c);for(var k=new Float32Array(h),
p=new Float32Array(d),q=a+d+1,n=0;n<h;++n){var l=q*n,r=0===fb(c,l)?1:-1,w=tb(c,l+1,a);l=l+1+a;for(var y=p.length,x=0,A=l;A<l+y;++A)p[x]=fb(c,A,!0),++x;for(y=l=0;y<d;++y)l+=p[y]*Math.pow(2,-y-1);k[n]=0===l&&0===w?0:r*(1+l)*Math.pow(2,1+w-Math.pow(2,a-1))}a=k}else if(h=gb(a),a=h.nb,0===a)a=new Uint8Array(h.nb);else{d=h.n;h=ub(h);c=new Uint32Array(d);for(k=0;k<d;++k)c[k]=tb(h,k*a,a);a=c}return a}function Za(){return-1!==[ja.ready,ja.play,ja.pause].indexOf(na)}function hb(){if(na===ja.play)return!1;na=
ja.play;Ma.stop();vb(0)}function wb(){if(na!==ja.play)return!1;qa.stop();Ma.stop();na=ja.pause;return!0}function Fa(a,c,d,h,k){a=4*(3*c+a)+d;return h+(V.buffer[a]/255+V.buffer[a+12]/65025)*(k-h)}function ib(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ha.vf()}function Ob(){var a=da.sa();va.P();b.viewport(0,0,3,2*a);F.set("s62");V.za.h(0);Q.l(!1,!1);return ba.enableAsyncReadPixels?aa.Mb(0,0,3,2*a,V.buffer,xb,1):aa.be(0,0,3,2*a,V.buffer)}function vb(){na!==ja.pause&&(ba.isCleanGLStateAtEachIteration&&
(F.kd(),Q.reset(),Q.Ca(),b.disable(b.DEPTH_TEST),b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1),F.Ja()),qa.Fc(Pb,Ob,Qb,xb,Rb,ba.animateProcessOrder))}function Pb(){va.fa();if(!J.Ab)if(J.zb)J.element.needsUpdate&&(J.D.ie(J.element.videoWidth,J.element.videoHeight),J.D.Sb(J.element.arrayBuffer),J.element.needsUpdate=!1);else{var a=J.element.currentTime,c=a-J.Lb;0>c&&(J.Lb=a,c=0);1E3*c<ea.ug||(J.Lb+=c,J.D.refresh())}a=qa.rf();da.update(a,Ba);for(c=0;c<a;++c){da.Qb(c);F.set("s64");var d=Ba[da.wd()];F.H("u45",
1+Na.Gc*(Math.cos(d.ry)-1));S.Da&&F.H("u44",d.rz);da.re("u43");var h=Oa.pf();d=yb.Ye(Y.u,d,h);Y.Xa.L(d,h);J.D.h(0);V.za.h(1);Q.l(!1,!1);Oa.U(Y.Xa)}qa.Qb()}function xb(){va.rg();ba.isCleanGLStateAtEachIteration&&(va.reset(),Z.reset(),b.enable(b.DEPTH_TEST));S.Wb&&S.Wb(da.Nd()?Ba:Ba[0]);ba.isCleanGLStateAtEachIteration&&(b.disable(b.BLEND),Q.reset(),Q.Ca())}function Qb(){for(var a=0;a<da.sa();++a)if(da.Jf(a)){var c=a,d=Sa[c],h=[c],k=Ba[c],p=jb[c],q=2*c;d.kb=Fa(1,q,3,0,1);k.detected=wa.aa(k.detected,
d.kb,ea.xe);d.x=Fa(0,q,1,-1,1);d.y=Fa(0,q,2,-1,1);d.ca=Fa(0,q,3,0,1);if(d.kb<ba.multiDetectionThresholdFactors[0]*ba.threshold)d.va=Math.floor(d.va/2),S.Da&&(k.rz=0,k.ry=0);else{var n=V.bb;d.rx=Fa(1,q,0,-n[0],n[0]);d.ry=Fa(1,q,1,-n[1],n[1]);d.ya=Fa(1,q,2,-n[2],n[2]);for(n=0;n<V.ba;++n)d.rd[n]=V.Va[n](Fa(2,q,n,0,1));q=d.ca*V.ee;h.dx=d.x-k.xRaw;h.dy=d.y-k.yRaw;h.ec=q-k.sRaw;h.bc=d.rx-k.rx;h.cc=d.ry-k.ry;h.dc=S.Da?d.ya:d.ya-k.rz;n=qa.ff();h=(1-$a.Fb(sa.translationFactorRange[0],sa.translationFactorRange[1],
Math.sqrt(h.dx*h.dx+h.dy*h.dy+h.ec*h.ec)/n))*(1-$a.Fb(sa.rotationFactorRange[0],sa.rotationFactorRange[1],Math.sqrt(h.bc*h.bc+h.cc*h.cc+h.dc*h.dc)/n))*$a.Fb(sa.qualityFactorRange[0],sa.qualityFactorRange[1],d.kb);c=p[++kb[c]%p.length]=h;for(n=0;n<p.length;++n)c=Math.min(c,p[n]);c=Math.max(.5,c);h=Math.min(c,h);p=wa.aa(sa.alphaRange[1],sa.alphaRange[0],Math.pow(h,ea.ze));k.xRaw=wa.aa(k.xRaw,d.x,p);k.yRaw=wa.aa(k.yRaw,d.y,p);k.sRaw=wa.aa(k.sRaw,q,p);k.rx=wa.aa(k.rx,d.rx,p);k.ry=wa.aa(k.ry,d.ry,p);k.rz=
S.Da?k.rz+sa.followZRotAlphaFactor*p*d.ya:wa.aa(k.rz,d.ya,p);c=k.sRaw*Na.ac*Math.sin(k.ry);q=Math.sin(k.rz)*c/Pa;k.x=k.xRaw+Math.cos(k.rz)*c;k.y=k.yRaw+q;k.s=k.sRaw;p=Math.max(p,ea.ye);for(c=0;c<V.ba;++c)k.expressions[c]=wa.aa(k.expressions[c],d.rd[c],p);++d.va}}}function Rb(){na===ja.play&&Ma.Fc(vb)}function zb(){Y.Xa=yb.instance({});var a={width:ea.oe,height:da.sa(),isFloat:!0,isPot:!1,array:da.Ue(new Float32Array([0,.5,.5,0,0,0,0,0,0,0,0,0]))};V.za=Sb.instance(a)}function lb(){F.T("s64",[{type:"1i",
name:"u1",value:0},{type:"1i",name:"u41",value:1},{type:"2f",name:"u42",value:Y.G},{type:"1f",name:"u43",value:.5},{type:"1f",name:"u44",value:0}]);F.T("s65",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u41",value:1},{type:"1f",name:"u49",value:ea.pg},{type:"1f",name:"u50",value:ba.threshold},{type:"3f",name:"u48",value:[V.O[0]*Y.G[0],V.O[1]*Y.G[1],V.O[2]]},{type:"1f",name:"u43",value:.5},{type:"1f",name:"u51",value:1},{type:"1f",name:"u44",value:0}]);var a=[{type:"1i",name:"u46",value:0}];F.T("s66",
a);F.T("s67",a);F.T("s62",[{type:"1i",name:"u41",value:0},{type:"1f",name:"u54",value:Y.G[0]},{type:"2f",name:"u53",value:[0,.5/da.sa()]}])}function mb(){Y.G[0]=1;Y.G[1]=Y.u/Y.M;Ta.A({Jb:ba.overlapFactors,Vd:ba.nScaleLevels,u:Y.u,M:Y.M,de:ba.scale0Factor,O:V.O,Hc:ba.scanCenterFirst})}function Tb(a){if(S.Ma)Ab("string"===typeof S.Ma?JSON.parse(S.Ma):S.Ma,a);else{var c=S.Xc;"JSON"!==c.toUpperCase().split(".").pop()&&(c+=ea.neuralNetworkPath);ab.get(c,function(d){d=JSON.parse(d);Ab(d,a)})}}function Ab(a,
c){if(a.exportData){var d=a.exportData;d.rotationEulerAnglesFactors&&(V.bb=d.rotationEulerAnglesFactors);if(d.translationScalingFactors){var h=d.translationScalingFactors,k=ba.translationScalingFactors;V.O[0]=h[0]*k[0];V.O[1]=h[1]*k[1];V.O[2]=h[2]*k[2]}"undefined"!==typeof d.nExpressions&&(V.ba=d.nExpressions);V.ee=d.dsMean?1+d.dsMean:1;Na.Gc=.4;Na.ac=.7;"undefined"!==typeof d.fgScaleXFactor&&(Na.Gc=d.fgScaleXFactor);"undefined"!==typeof d.fgDisplaceXFactor&&(Na.ac=d.fgDisplaceXFactor)}V.ba||(V.ba=
ea.Ud);if(!V.Va)for(V.Va=[],d=0;d<V.ba;++d)V.Va.push(ea.$e);c(a)}function Ub(){if(Ha.A({jb:S.ha,width:Y.u,height:Y.M,debug:!1,zc:function(){Ia("GLCONTEXT_LOST")},antialias:S.antialias,premultipliedAlpha:!0}))return!0;Ia("GL_INCOMPATIBLE");return!1}function Vb(){var a=da.wd(),c=Ba[a];V.za.ag(1);b.viewport(0,a,1,1);F.set("s65");S.Da&&F.H("u44",c.rz);da.re("u43");var d=1,h=da.lg(Sa,Ba,Y.u/Y.M);da.Nd()&&(h&&(d=0,Sa[a].va=0,c.isDetected=!1,c.detected=0),F.H("u51",d));F.gg("u47",Ta.get(a));Q.l(!1,!1);if(da.Md()||
h)b.viewport(1,a,1,1),F.set("s66"),F.H("u51",d),Q.l(!1,!1);da.Md()&&(b.viewport(2,a,1,1),F.set("s67"),Q.l(!1,!1));V.za.sync()}function Bb(){J.D&&J.D.remove();J.zb=J.element.isFakeVideo?!0:!1;if(J.zb){var a=Cb();a={isFlipY:!1,array:J.element.arrayBuffer,width:a.w,height:a.Fa,isKeepArray:!0}}else a={I:J.element};J.Mc=Z.instance(Object.assign({isPot:!1,isLinear:!0,isFloat:!1},a));J.D=J.Mc}function Ja(){var a=[{type:"mat2",name:"u40",value:J.B}];F.T("s63",[{type:"1i",name:"u1",value:0}].concat(a));F.T("s64",
a)}function Ka(){var a=[.5,.5],c=J.G[1]/J.G[0];Pa=Ha.W()/Ha.K();90===Math.abs(pa.rotate)&&(c=1/c);c>Pa?a[1]*=Pa/c:a[0]*=c/Pa;F.T("s65",[{name:"u52",type:"1f",value:Pa}]);J.B[0]=0;J.B[1]=0;J.B[2]=0;J.B[3]=0;switch(pa.rotate){case 0:J.B[0]=a[0];J.B[3]=a[1];break;case 180:J.B[0]=-a[0];J.B[3]=-a[1];break;case 90:J.B[1]=a[0];J.B[2]=-a[1];break;case -90:J.B[1]=-a[0],J.B[2]=a[1]}pa.flipX&&(J.B[0]*=-1,J.B[2]*=-1);J.Ab||(J.B[1]*=-1,J.B[3]*=-1)}function Cb(){var a={w:J.element.videoWidth||J.element.width,Fa:J.element.videoHeight||
J.element.height};if(!a.w||!a.Fa||4>a.w||4>a.Fa)throw Error("INVALID VIDEO DIMENSIONS - width = "+a.w+" height = "+a.Fa);return a}function nb(){var a=Cb(),c=J.G[0]!==a.w||J.G[1]!==a.Fa;c&&(J.G[0]=a.w,J.G[1]=a.Fa);return c}function bb(a,c){if(na===ja.error)return!1;J.element=a;nb();c&&c();return!0}function Db(a,c,d){a&&a();J.Ra={video:{facingMode:{exact:pa.facingMode},width:{min:pa.minWidth,max:pa.maxWidth,ideal:pa.idealWidth},height:{min:pa.minHeight,max:pa.maxHeight,ideal:pa.idealHeight}},audio:!1};
X.Zc(J.Ra,pa.deviceId);X.get(J.element?J.element:X.Ad(),function(h){c&&c(h);d(h)},function(){Ia("WEBCAM_UNAVAILABLE")},J.Ra)}function Ia(a){na!==ja.error&&(na=ja.error,S.Qa&&S.Qa(a))}var wa={xh:function(a){return Math.ceil(Math.log2(a))},Th:function(a){return Math.log2(a)},Ph:function(a){return 0===Math.log2(a)%1},Gg:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},Hg:function(a,c,d){return Math.min(Math.max(a,c),d)},Kg:function(a){return a*
Math.PI/180},$h:function(a,c){c=Math.pow(10,c);return Math.round(a*c)/c},ai:function(a){return Math.round(1E6*a)/1E6},yh:function(a,c){return(100*a/c).toFixed(3)},aa:function(a,c,d){return a*(1-d)+c*d},Uh:function(a,c){return a[0]*(1-c)+a[1]*c},Te:function(a,c){return wa.Le(a-c)},Le:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Pg:function(a,c){return Math.abs(wa.Te(a,c))},vg:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},ab=
{get:function(a,c,d){var h=new XMLHttpRequest;h.open("GET",a,!0);h.withCredentials=!1;h.onreadystatechange=function(){4===h.readyState&&(200===h.status||0===h.status?c(h.responseText):"undefined"!==typeof d&&d(h.status))};h.send()},tf:function(a){return new Promise(function(c,d){ab.get(a,c,d)})},uh:function(a,c,d){a+=d?"?"+ab.Xe(d):"";ab.get(a,function(h){c(JSON.parse(h))})},Wh:function(a,c,d){var h=new XMLHttpRequest;h.open("POST",a,!0);h.setRequestHeader("Content-type","application/x-www-form-urlencoded");
h.onreadystatechange=function(){4!==h.readyState||200!==h.status&&0!==h.status||d(h.responseText)};h.send(c)},Xe:function(a){return"string"===typeof a?a:Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},ih:function(a,c){var d=new XMLHttpRequest;d.open("POST",a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},Wb={create:function(a,c){for(var d=Array(c),h=0;h<c;++h)d[h]=a;return d},Lg:function(a,c){for(var d=0;d<a.length;++d)c[d]=
a[d]},clone:function(a){for(var c=Array(a.length),d=0;d<a.length;++d)c[d]=a[d];return c},di:function(a,c,d){a.forEach(function(h,k){c[k]=h*d})},mi:function(a){for(var c=a.length-1;0<c;--c){var d=Math.floor(Math.random()*(c+1)),h=a[c];a[c]=a[d];a[d]=h}},oi:function(a){return a.sort(function(c,d){return c-d})},og:function(a){return Array.isArray(a)||a.constructor===Float32Array||a.constructor===Uint8Array}},ob={Zb:function(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===
c||-1===c?-1:c-1;for(var d in a)a[d]=ob.Zb(a[d],c);return a},Og:function(a){return JSON.parse(JSON.stringify(a))}},$a={ni:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},Fb:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},$g:function(a,c,d,h){return Math.pow(Math.min(Math.max((h-a)/(c-a),0),1),d)},ui:function(){return 0},Vh:function(){return 1},Sh:function(a){return a},Xg:function(a){return a*a},bh:function(a){return a*(2-a)},Ug:function(a){return.5>a?2*a*a:-1+
(4-2*a)*a},Sg:function(a){return a*a*a},ah:function(a){return--a*a*a+1},Tg:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Yg:function(a){return a*a*a*a},dh:function(a){return 1- --a*a*a*a},Vg:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},Zg:function(a){return a*a*a*a*a},eh:function(a){return 1+--a*a*a*a*a},Wg:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},Xb={cf:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.),"+
c+",step(0.,"+c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},F=function(){function a(f,m,I){m=f.createShader(m);f.shaderSource(m,I);f.compileShader(m);return f.getShaderParameter(m,f.COMPILE_STATUS)?m:null}function c(f,m,I){m=a(f,f.VERTEX_SHADER,m);I=a(f,f.FRAGMENT_SHADER,I);f===b&&n.push(m,I);var M=f.createProgram();f.attachShader(M,m);
f.attachShader(M,I);f.linkProgram(M);return M}function d(f){return["float","sampler2D","int"].map(function(m){return"precision "+f+" "+m+";\n"}).join("")}function h(f,m){m.o=m.o?!0:!1;if(!m.o){m.Aa=m.Aa||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";m.ib=m.ib||["a0"];m.Oa=m.Oa||[2];m.precision=m.precision||x;m.id=w++;void 0!==m.ge&&(m.ge.forEach(function(P,fa){m.g=m.g.replace(P,m.Nb[fa])}),m.ge.splice(0));m.Tc=0;m.Oa.forEach(function(P){m.Tc+=
4*P});var I=d(m.precision);m.xa=c(f,I+m.Aa,I+m.g);m.C={};m.i.forEach(function(P){m.C[P]=f.getUniformLocation(m.xa,P)});m.attributes={};m.Pa=[];m.ib.forEach(function(P){var fa=f.getAttribLocation(m.xa,P);m.attributes[P]=fa;m.Pa.push(fa)});if(m.j){f.useProgram(m.xa);r=m;l=m.id;for(var M in m.j)f.uniform1i(m.C[M],m.j[M])}m.ua=!0}}function k(f){xa.eg(N);l!==f.id&&(N.R(),l=f.id,r=f,b.useProgram(f.xa),f.Pa.forEach(function(m){0!==m&&b.enableVertexAttribArray(m)}))}function p(f,m,I){h(f,m,I);f.useProgram(m.xa);
f.enableVertexAttribArray(m.attributes.a0);l=-1;return r=m}function q(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var n=[],l=-1,r=null,w=0,y=!1,x="highp",A=["u1"],v=["u0"],D={u1:0},e={u0:0},B={u1:0,u2:1},K={u1:0,u3:1},z=["u1","u3","u4"],C={u5:0},g=["u6","u7","u8","u9"],t={u6:0,u7:1},G={s0:q(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:A,j:D,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
i:["u1","u2"],j:B},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],j:D,o:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",i:A,j:D},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:B},
s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:A,j:D},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:A,j:D},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",i:["u0","u10"],j:e},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",
i:["u0","u10"],j:e},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:A,j:D},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",i:["u1","u12","u13"],j:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",
i:["u1","u14"],j:D},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",i:A,j:D,o:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:A,j:D,o:!0},
s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],j:D},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:v,j:e,o:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:v,j:e,o:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:v,j:e,o:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:v,j:e,o:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:v,j:e},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:v,j:e},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:v,j:e,o:!0},s23:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],j:{u0:0,u16:1},o:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],j:D},s25:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],j:Object.assign({u19:2},t),o:!0},s26:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:g,j:t},s27:{g:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(g),j:t,o:!0},s28:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(g),j:Object.assign({u25:3,u22:4,u23:5,u24:6},t),o:!0},s29:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(g),j:Object.assign({u3:2},t)},s30:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],j:t,o:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:z,j:K},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(z),j:K,o:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:z,j:K,o:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(z),j:K,o:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:z,j:K,o:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:A,j:D,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],j:D,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],j:D,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],j:B,o:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],j:B,o:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],j:C},s42:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
j:C,o:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:D,precision:"lowp",o:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
j:D,precision:"lowp",o:!0},s45:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],j:{u1:0,u16:1,u31:2},o:!0}},L={s46:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],Nb:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),Nb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},u=null,O=null,N={Cb:function(){return y},A:function(){if(!y){u=ob.Zb(G,2);O=ob.Zb(L,2);x="highp";b.getShaderPrecisionFormat&&(b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.MEDIUM_FLOAT),b.getShaderPrecisionFormat(b.FRAGMENT_SHADER,b.LOW_FLOAT));for(var f in u)h(b,u[f],f);F.set("s0");b.enableVertexAttribArray(0);y=!0}},fb:function(f){f.forEach(function(m){N.$c(m)})},$c:function(f){u[f.id]=f;h(b,f,f.id)},xf:function(f,
m,I){m||(m=f);u[m]=Object.create(O[f]);u[m].Df=!0;O[f].Nb&&O[f].Nb.forEach(function(M,P){u[m].g=u[m].g.replace(new RegExp(M,"g"),I[P])});h(b,u[m],m)},set:function(f){var m=u[f];m.o&&(m.o=!1,h(b,m,f));k(m)},cb:function(f){return p(f,q(),"s48")},Kc:function(f){return p(f,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:x},"s49")},Ze:function(f){return"undefined"===typeof u[f]?!1:u[f].ua},R:function(){-1!==l&&(l=-1,r.Pa.forEach(function(f){0!==f&&b.disableVertexAttribArray(f)}))},Lc:function(){var f=
0;r.Pa.forEach(function(m,I){I=r.Oa[I];b.vertexAttribPointer(m,I,b.FLOAT,!1,r.Tc,f);f+=4*I})},kd:function(){b.enableVertexAttribArray(0)},Ja:function(){N.Ob(b)},Ob:function(f){f.vertexAttribPointer(r.Pa[0],2,f.FLOAT,!1,8,0)},hi:function(f,m){b.uniform1i(r.C[f],m)},H:function(f,m){b.uniform1f(r.C[f],m)},V:function(f,m,I){b.uniform2f(r.C[f],m,I)},fg:function(f,m){b.uniform2fv(r.C[f],m)},gg:function(f,m){b.uniform3fv(r.C[f],m)},ii:function(f,m,I,M){b.uniform3f(r.C[f],m,I,M)},hg:function(f,m,I,M,P){b.uniform4f(r.C[f],
m,I,M,P)},le:function(f,m){b.uniform4fv(r.C[f],m)},ji:function(f,m){b.uniformMatrix2fv(r.C[f],!1,m)},ki:function(f,m){b.uniformMatrix3fv(r.C[f],!1,m)},li:function(f,m){b.uniformMatrix4fv(r.C[f],!1,m)},T:function(f,m){N.set(f);m.forEach(function(I){switch(I.type){case "4f":b.uniform4fv(r.C[I.name],I.value);break;case "3f":b.uniform3fv(r.C[I.name],I.value);break;case "2f":b.uniform2fv(r.C[I.name],I.value);break;case "1f":b.uniform1f(r.C[I.name],I.value);break;case "1i":b.uniform1i(r.C[I.name],I.value);
break;case "mat2":b.uniformMatrix2fv(r.C[I.name],!1,I.value);break;case "mat3":b.uniformMatrix3fv(r.C[I.name],!1,I.value);break;case "mat4":b.uniformMatrix4fv(r.C[I.name],!1,I.value)}})},wh:function(){return"lowp"},m:function(){N.R();b.disableVertexAttribArray(0);for(var f in u){var m=u[f];m.ua&&(m.ua=!1,b.deleteProgram(m.xa));m.Df&&delete u[f]}n.forEach(function(I){b.deleteShader(I)});n.splice(0);w=0;y=!1;r=null;l=-1}};return N}(),b=null,Ha=function(){function a(v){console.log("ERROR in ContextFF: ",
v);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(v,D,e){v.setAttribute("width",D);v.setAttribute("height",e)}function h(v){function D(){Ca.m();aa.reset();B.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var e=document.createElement("canvas");d(e,5,5);var B=null;try{B=e.getContext("webgl2",v)}catch(K){return!1}if(!B)return!1;k(B);aa.ld(B);v=aa.$b(B);if(!v.ka&&!v.ma)return D(),!1;v=Ca.ad(B,v);D();return v?!0:!1}function k(v){v.clearColor(0,
0,0,0);v.disable(v.DEPTH_TEST);v.disable(v.BLEND);v.disable(v.DITHER);v.disable(v.STENCIL_TEST);v.disable(v.CULL_FACE);v.GENERATE_MIPMAP_HINT&&v.FASTEST&&v.hint(v.GENERATE_MIPMAP_HINT,v.FASTEST);v.disable(v.SAMPLE_ALPHA_TO_COVERAGE);v.disable(v.SAMPLE_COVERAGE);v.depthFunc(v.LEQUAL);v.clearDepth(1)}var p=null,q=null,n=null,l=null,r=!0,w=null,y=null,x=[],A={K:function(){return p.width},W:function(){return p.height},nh:function(){return p},lh:function(){return b},na:function(){return r},flush:function(){b.flush()},
vf:function(){va.fa();A.Zf()},Zf:function(){Z.reset();Q.reset();F.R();F.kd();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);Q.Ca();F.Ja()},ef:function(){w||(w=new Uint8Array(p.width*p.height*4));b.readPixels(0,0,p.width,p.height,b.RGBA,b.UNSIGNED_BYTE,w);return w},ph:function(){return p.toDataURL("image/jpeg")},qh:function(){va.P();q||(q=document.createElement("canvas"),n=q.getContext("2d"));d(q,p.width,p.height);for(var v=A.ef(),D=n.createImageData(q.width,q.height),e=q.width,B=q.height,K=D.data,z=0;z<
B;++z)for(var C=B-z-1,g=0;g<e;++g){var t=4*(z*e+g),G=4*(C*e+g);K[t]=v[G];K[t+1]=v[G+1];K[t+2]=v[G+2];K[t+3]=v[G+3]}n.putImageData(D,0,0);return q.toDataURL("image/png")},oh:function(v){!q&&v&&(q=document.createElement("canvas"),n=q.getContext("2d"));var D=v?q:document.createElement("canvas");d(D,p.width,p.height);(v?n:D.getContext("2d")).drawImage(p,0,0);return D},A:function(v){v=Object.assign({la:null,zc:null,jb:null,fd:null,width:512,height:512,premultipliedAlpha:!1,Af:!0,antialias:!1,debug:!1,
Ng:!1},v);v.la?(b=v.la,p=v.la.canvas):v.fd&&!v.jb?p=document.getElementById(v.fd):v.jb&&(p=v.jb);p||(p=document.createElement("canvas"));p.width=v.width;p.height=v.height;if(b)r=b instanceof WebGL2RenderingContext;else{r=!0;var D={antialias:v.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:v.premultipliedAlpha,stencil:!1,depth:v.Af,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(D.antialias=!1);var e=h(D);e||!D.antialias||c()||(D.antialias=!1,e=h(D));e&&(b=p.getContext("webgl2",D));b?r=!0:((b=p.getContext("webgl",D))||(b=p.getContext("experimental-webgl",D)),r=!1)}if(!b)return a("WebGL1 and 2 are not enabled");v.zc&&p.addEventListener&&(l=b.getExtension("WEBGL_lose_context"))&&(y=v.zc,p.addEventListener("webglcontextlost",y,!1));if(!aa.A())return a("Not enough GL capabilities");k(b);F.A();Q.A();Ca.ad(b,aa.df());x.forEach(function(B){B(b)});x.splice(0);return!0},Bg:function(){return new Promise(function(v){b?
v(b):x.push(v)})},m:function(){b&&(aa.m(),F.m(),Ca.m());l&&y&&(p.removeEventListener("webglcontextlost",y,!1),l=y=null);b=w=n=q=p=null;x.splice(0)}};return A}(),xa=function(){function a(){null===c&&("undefined"!==typeof F?c=F:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},eg:function(d){c!==d&&(c&&c.R(),c=d)},Cb:function(){return c.Cb()},Ja:function(){return c.Ja()},Ob:function(d){return c.Ob(d)},Lc:function(){return c.Lc()},R:function(){return c.R()},set:function(d){a();
return c.set(d)},cb:function(d){a();return c.cb(d)},Kc:function(d){a();return c.Kc(d)}}}(),Aa=function(){function a(f){b.bindTexture(b.TEXTURE_2D,f)}function c(f){L[0]=f;f=u[0];var m=f>>16&32768,I=f>>12&2047,M=f>>23&255;return 103>M?m:142<M?m|31744|((255==M?0:1)&&f&8388607):113>M?(I|=2048,m|(I>>114-M)+(I>>113-M&1)):m=(m|M-112<<10|I>>1)+(I&1)}function d(f){var m=new Uint16Array(f.length);f.forEach(function(I,M){m[M]=c(I)});return m}function h(){if(null!==O.mc)return O.mc;var f=p(d([.5,.5,.5,.5]),!0);
return null===f?!0:O.mc=f}function k(){if(null!==O.nc)return O.nc;var f=p(new Uint8Array([127,127,127,127]),!1);return null===f?!0:O.nc=f}function p(f,m){if(!xa.Cb()||!D)return null;var I=null,M=Math.sqrt(f.length/4);try{var P=b.getError();if("FUCKING_BIG_ERROR"===P)return!1;I=N.instance({isFloat:!1,S:m,array:f,width:M});P=b.getError();if(P!==b.NO_ERROR)return!1}catch(fa){return!1}oa.P();b.viewport(0,0,M,M);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);xa.set("s0");I.Ba(0);ma.l(!0,!0);f=4*M*M;
m=new Uint8Array(f);b.readPixels(0,0,M,M,b.RGBA,b.UNSIGNED_BYTE,m);M=!0;for(P=0;P<f;++P)M=M&&3>Math.abs(m[P]-127);I.remove();oa.fa();return M}var q=0,n=null,l=0,r=null,w=null,y=null,x=null,A=null,v=null,D=!1,e=[],B={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,Jd:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,I:null,lc:null,Cf:!1,S:!1,F:null,Gb:4,tc:0},K=!1,z=null,C=null,g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,
0,0,1]],t=!1,G=!1,L=new Float32Array(1),u=new Int32Array(L.buffer),O={mc:null,nc:null},N={A:function(){D||(A=[b.RGBA,null,b.RGBA,b.RGBA],v=[b.RGBA,null,b.RGBA,b.RGBA],n=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],t="undefined"!==typeof JEContext,G="undefined"!==typeof aa,t&&JEContext.Qh()&&n.push(b.TEXTURE8,b.TEXTURE9),r=[-1,-1,-1,-1,-1,-1,-1,-1],x=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],D=!0)},wf:function(){if(!w){for(var f=new Float32Array(16384),m=0;16384>
m;++m)f[m]=2*Math.random()-1;w={random:N.instance({isFloat:!0,isPot:!0,array:f,width:64}),ue:N.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}N.tg()},je:function(f){b.framebufferTexture2D(oa.jc(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,f,0)},Fh:function(){return w.ue},tg:function(){x[1]=aa.ic(b)},cg:function(){v=A=[b.RGBA,b.RGBA,b.RGBA,b.RGBA]},ce:function(f){F.set("s1");oa.P();var m=f.K(),I=f.W();b.viewport(0,0,m,I);f.h(0);ma.l(!1,!1)},Yh:function(f,m){N.ce(f);b.readPixels(0,0,
f.K(),f.W(),b.RGBA,b.UNSIGNED_BYTE,m)},Zh:function(f,m){N.ce(f);return aa.Mb(0,0,f.K(),f.W(),m)},td:function(f,m,I,M,P,fa,ta){f.activeTexture(f.TEXTURE0);var Da=f.createTexture();f.bindTexture(f.TEXTURE_2D,Da);P=P instanceof Float32Array?P:new Float32Array(P);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);
f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,fa);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,I,M,0,f.RGBA,f.FLOAT,P);f.bindTexture(f.TEXTURE_2D,null);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);ta&&(oa.fa(),F.cb(f));f.viewport(0,0,I,M);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,m,0);f.bindTexture(f.TEXTURE_2D,Da);ta?ma.l(!0,!0):Q.qb(f);f.deleteTexture(Da);D&&(r[0]=-1,y=null,q=0)},Vb:function(f){f!==q&&(b.activeTexture(n[f]),q=f)},instance:function(f){var m;function I(){T=void 0!==E.I.videoWidth?
E.I.videoWidth:E.I.width;U=void 0!==E.I.videoHeight?E.I.videoHeight:E.I.height}function M(H){var R=b.getError();if("FUCKING_BIG_ERROR"===R)return!1;b.texImage2D(b.TEXTURE_2D,0,ka,ha,ia,H);R=b.getError();R!==b.NO_ERROR&&ha!==b.RGBA&&(ha=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,ka,ha,ia,H));return!0}function P(){if(!Eb){a(ra);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,za);E.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,E.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,
E.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));E.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.rh().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.xg);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,E.isLinear?b.LINEAR:b.NEAREST);var H=E.isMipmap&&!Qa;b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,E.Jd?b.LINEAR_MIPMAP_LINEAR:E.isLinear?
H?b.NEAREST_MIPMAP_LINEAR:b.LINEAR:H?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);ha=A[E.Gb-1];ka=v[E.Gb-1];ia=x[pb];aa.na()&&(H=aa.gf(),ha===b.RGBA&&ia===b.FLOAT?E.isMipmap||E.isLinear?ka=Ca.jf(b):aa.bd()?H&&(ka=H):ka=b.RGBA16F||b.RGBA:ha===b.RGB&&ia===b.FLOAT&&H&&(ka=H,ha=b.RGBA));if(E.S&&!E.isFloat||E.isFloat&&E.isMipmap&&Ca.Hf())ka=aa.hf(),ia=aa.ic(b);E.tc&&(cb=E.tc);E.isSrgb&&4===E.Gb&&(ha=JEContext.Dh());if(E.I)M(E.I);else if(E.url)M(Ga);else if(ua){H=ua;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,
0,ka,T,U,0,ha,ia,H),b.getError()!==b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,ka,T,U,0,ha,ia,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,T,U,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(kc){b.texImage2D(b.TEXTURE_2D,0,ka,T,U,0,ha,ia,null)}E.isKeepArray||(ua=null)}else H=b.getError(),"FUCKING_BIG_ERROR"!==H&&(b.texImage2D(b.TEXTURE_2D,0,ka,T,U,0,ha,ia,null),H=b.getError(),H!==b.NO_ERROR&&(ha=b.RGBA,E.S&&ia!==b.FLOAT&&(ia=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,ka,T,U,0,ha,ia,null))));if(E.isMipmap)if(!Qa&&
ca)ca.sb(),db=!0;else if(Qa){H=Math.log2(Math.min(T,U));Ra=Array(1+H);Ra[0]=ra;for(var R=1;R<=H;++R){var la=Math.pow(2,R),W=T/la;la=U/la;var La=b.createTexture();a(La);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,ka,W,la,0,ha,ia,null);a(null);Ra[R]=La}db=!0}a(null);r[q]=-1;za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);Ua=!0;E.F&&ca&&(E.F(ca),E.F=null)}}function fa(){for(var H=T*U,R=2*H,la=3*H,W=
0;W<H;++W)ya[0][W]=Va[W],ya[1][W]=Va[W+H],ya[2][W]=Va[W+R],ya[3][W]=Va[W+la]}function ta(){var H=T*U*4;Ea=[new Uint8Array(H),new Uint8Array(H),new Uint8Array(H),new Uint8Array(H)];ya=[new Float32Array(Ea[0].buffer),new Float32Array(Ea[1].buffer),new Float32Array(Ea[2].buffer),new Float32Array(Ea[3].buffer)];eb=new Uint8Array(4*H);Va=new Float32Array(eb.buffer);Wa=!0}function Da(){m=new Uint8Array(T*U*4);Fb=new Float32Array(m.buffer);qb=!0}var E=Object.assign({},B,f),Xa=l++;null===E.isFlipY&&(E.isFlipY=
E.url?!0:!1);E.data&&(E.array="string"===typeof E.data?Nb(E.data):E.isFloat?new Float32Array(E.data):new Uint8Array(E.data),E.isFlipY=!1);var pb=0,Gb=E.I?!0:!1,Ya=null,rb=null,Hb=!1;E.S=E.S||E.isFloat;E.S&&(pb=1);!E.Cf&&E.isFloat&&G&&!aa.bd()&&(E.isFloat=!1);E.isFloat&&(pb=2);E.isAnisotropicFiltering&&t&&!JEContext.Jh()&&(E.isAnisotropicFiltering=!1);var ra=E.lc||b.createTexture(),Ga=null,ua=!1,T=0,U=0,Ua=!1,Eb=!1,Wa=!1,ya=null,Ea=null,eb=null,Va=null,ka=null,ha=null,ia=null,za=E.isFlipY,Yb=(f=E.S&&
E.isMipmap)&&Ca.Ge(),Qa=f&&!Yb?!0:!1,Ra=null,cb=-1,Ib=-1,db=!1;var qb=!1;var Fb=m=null;E.width&&(T=E.width,U=E.height?E.height:T);var ca={get:function(){return ra},K:function(){return T},W:function(){return U},Gh:function(){return E.url},Kh:function(){return E.isFloat},Mh:function(){return E.S},fi:function(H){ra=H},Nh:function(){return E.isLinear},sb:function(){b.generateMipmap(b.TEXTURE_2D)},De:function(H,R){Qa?(H||(H=ca.xd()),N.Vb(R),a(Ra[H]),r[R]=-1):ca.h(R)},xd:function(){-1===cb&&(cb=Math.log2(T));
return cb},ke:function(H){b.TEXTURE_MAX_LEVEL&&b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAX_LEVEL,H)},bf:function(H){H||(H=ca.xd());if(Qa){F.set("s12");N.Vb(0);for(var R=T,la=U,W=1;W<=H;++W)R/=2,la/=2,F.V("u14",.25/R,.25/la),b.viewport(0,0,R,la),a(Ra[W-1]),b.framebufferTexture2D(oa.jc(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Ra[W],0),ma.l(!1,1===W);r[0]=-1}else H!==Ib&&(Ib=H,ca.ke(H)),ca.sb()},gi:function(H){(Gb=!Wb.og(H))?(ua=null,E.I=H,I()):ua=H},h:function(H){if(!Ua)return!1;N.Vb(H);if(r[H]===Xa)return!1;
a(ra);r[H]=Xa;return!0},Ba:function(H){b.activeTexture(n[H]);q=H;a(ra);r[H]=Xa},v:function(){y=ca;N.je(ra)},L:function(){b.viewport(0,0,T,U);y=ca;N.je(ra)},Rc:N.Rc,ie:function(H,R){T=H;U=R},resize:function(H,R){ca.ie(H,R);P()},clone:function(H){H=N.instance({width:T,height:U,S:E.S,isFloat:E.isFloat,isLinear:E.isLinear,isMirrorY:E.isMirrorY,isFlipY:H?!za:za,isPot:E.isPot});xa.set("s0");oa.fa();H.L();ca.h(0);ma.l(!0,!0);return H},ig:function(){b.viewport(0,0,T,U)},remove:function(){b.deleteTexture(ra);
Eb=!0;e.splice(e.indexOf(ca),1);ca=null},refresh:function(){ca.Ba(0);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Gb?b.texImage2D(b.TEXTURE_2D,0,ka,ha,ia,E.I):b.texImage2D(b.TEXTURE_2D,0,ka,T,U,0,ha,ia,ua);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},ae:function(){Wa||ta();b.readPixels(0,0,T,4*U,b.RGBA,b.UNSIGNED_BYTE,eb);fa();return ya},Wf:function(){Wa||ta();return aa.Mb(0,0,T,4*U,eb).then(function(){fa();return ya})},Yf:function(){qb||Da();b.readPixels(0,0,T,U,b.RGBA,b.UNSIGNED_BYTE,m);return Fb},
Xf:function(){qb||Da();return aa.Mb(0,0,T,U,m)},gd:function(H){oa.P();F.set("s15");ca.h(0);if(H)b.viewport(0,0,T,U),F.hg("u15",.25,.25,.25,.25),ma.l(!1,!0);else for(H=0;4>H;++H)b.viewport(0,U*H,T,U),F.le("u15",g[H]),ma.l(!1,0===H)},Sb:function(H){var R=ia===x[0]&&!k();a(ra);za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);R?(Hb||(Ya=document.createElement("canvas"),Ya.width=T,Ya.height=U,rb=Ya.getContext("2d"),rb.createImageData(T,U),Hb=!0),null.data.set(H),rb.putImageData(null,0,0),b.texImage2D(b.TEXTURE_2D,
0,ka,ha,ia,Ya)):b.texImage2D(b.TEXTURE_2D,0,ka,T,U,0,ha,ia,H);r[q]=Xa;za&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},ti:function(H,R){a(ra);R&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,ka,ha,ia,H);r[q]=Xa;R&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},ei:function(H,R){var la=T*U,W=4*la;H=E.S?H?"RGBE":"JSON":"RGBA";R&&(H=R);R=aa.na()&&!1;var La=null;switch(H){case "RGBE":La="s13";break;case "JSON":La=R?"s0":"s15";break;case "RGBA":case "RGBAARRAY":La="s7"}Wa||("RGBA"===H||"RGBE"===
H||"RGBAARRAY"===H?(Ea=new Uint8Array(W),Wa=!0):"JSON"!==H||R||ta());oa.P();F.set(La);ca.h(0);W=null;if("RGBA"===H||"RGBE"===H||"RGBAARRAY"===H){b.viewport(0,0,T,U);ma.l(!0,!0);b.readPixels(0,0,T,U,b.RGBA,b.UNSIGNED_BYTE,Ea);if("RGBAARRAY"===H)return{data:Ea};K||(z=document.createElement("canvas"),C=z.getContext("2d"),K=!0);z.width=T;z.height=U;la=C.createImageData(T,U);la.data.set(Ea);C.putImageData(la,0,0);W=z.toDataURL("image/png")}else if("JSON"===H)if(R)W=new Float32Array(la),b.viewport(0,0,
T,U),ma.l(!0,!0),b.readPixels(0,0,T,U,b.RGBA,b.FLOAT,W);else{for(W=0;4>W;++W)b.viewport(0,U*W,T,U),F.le("u15",g[W]),ma.l(!W,!W);ca.ae();W=Array(la);for(R=0;R<la;++R)W[4*R]=ya[0][R],W[4*R+1]=ya[1][R],W[4*R+2]=ya[2][R],W[4*R+3]=ya[3][R]}return{format:H,data:W,width:T,height:U,isMirrorY:E.isMirrorY,isFlipY:"RGBA"===H?E.isFlipY:!E.isFlipY}}};E.isMipmap&&!Qa&&Ua&&!db&&(ca.sb(),db=!0);if(E.url)a(ra),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ga=new Image,Ga.Mg="Anonymous",Ga.crossOrigin=
"Anonymous",Ga.src=E.url,Ga.onload=function(){T=Ga.width;U=Ga.height;P()};else if(E.I){var Jb=function(){I();T?P():setTimeout(Jb,1)};Jb()}else E.array?(E.S&&!E.isFloat?E.array instanceof Uint16Array?(ua=E.array,P()):h()?(ua=d(E.array),P()):(P(),N.td(b,ra,ca.K(),ca.W(),E.array,za,!0)):(ua=E.isFloat?E.array instanceof Float32Array?E.array:new Float32Array(E.array):E.array instanceof Uint8Array?E.array:new Uint8Array(E.array),P()),E.isKeepArray||(ua&&ua!==E.array&&(ua=null),delete E.array)):E.lc?Ua=
!0:P();ca.Bh=ca.K;E.F&&Ua&&(E.F(ca),E.F=null);e.push(ca);return ca},P:function(f){f!==q&&(b.activeTexture(n[f]),q=f);r[f]=-1;a(null)},Ag:function(f){w.random.h(f)},Rc:function(){y=null;b.framebufferTexture2D(oa.jc(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){0!==q&&b.activeTexture(n[0]);for(var f=0;f<n.length;++f)r[f]=-1;q=-1},bi:function(){q=-1},qg:function(){for(var f=0;f<n.length;++f)N.P(f)},ud:function(){w&&(w.random.remove(),w.ue.remove())},si:function(f,m){if("RGBA"===f.format||
"RGBE"===f.format){var I=new Image;I.src=f.data;I.onload=function(){N.instance({isMirrorY:f.isMirrorY,isFlipY:f.isFlipY,isFloat:!1,I:I,F:function(M){if("RGBA"===f.format)m(M);else{var P=f.width,fa=f.height,ta=N.instance({isMirrorY:f.isMirrorY,isFloat:!0,width:P,height:fa,isFlipY:f.isFlipY});oa.fa();b.viewport(0,0,P,fa);F.set("s14");ta.v();M.h(0);ma.l(!0,!0);N.P(0);m(ta);aa.flush();M.remove()}}})}}else"JSON"===f.format?m(N.instance({isFloat:!0,isFlipY:f.isFlipY,width:f.width,height:f.height,array:new Float32Array(f.data)})):
m(!1)},Ne:d,m:function(){y&&(va.fa(),N.Rc(),va.P());N.qg();e.slice(0).forEach(function(f){f.remove()});e.splice(0);D=!1;l=0;"undefined"!==typeof Ca&&Ca.m();w=null}};return N}(),Sb=function(){return{instance:function(a){var c=[Aa.instance(a),Aa.instance(a)],d=[c[1],c[0]],h=d,k={ag:function(p){h[1].v();h[0].h(p);k.pe()},bg:function(p){h[1].L();h[0].h(p);k.pe()},pe:function(){h=h===c?d:c},refresh:function(){h[0].refresh();h[1].refresh()},h:function(p){h[0].h(p)},Ba:function(p){h[0].Ba(p)},zg:function(p){h[1].h(p)},
vh:function(){return h[0]},zh:function(){return h[1]},Sb:function(p){h[0].Sb(p);h[1].Sb(p)},remove:function(){h[0].remove();h[1].remove();h=null},sync:function(){k.bg(0);F.set("s0");Q.l(!1,!1)}};return k}}}(),ma=function(){function a(l){var r={da:null,indices:null};r.da=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,r.da);l.bufferData(l.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),l.STATIC_DRAW);r.indices=l.createBuffer();l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r.indices);l.bufferData(l.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),l.STATIC_DRAW);return r}var c=null,d=0,h=!1,k=[],p=-2,q=-2,n={reset:function(){q=p=-2},A:function(){h||(c=a(b),n.Ca(),h=!0)},instance:function(l){var r=d++,w=l.indices?l.indices.length:0,y="undefined"===typeof l.mode?b.STATIC_DRAW:l.mode,x=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,x);b.bufferData(b.ARRAY_BUFFER,l.da instanceof Float32Array?l.da:new Float32Array(l.da),y);p=r;var A=null,v=null,D=null;if(l.indices){A=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,A);
var e=null;65536>l.indices.length?(e=Uint16Array,v=b.UNSIGNED_SHORT,D=2):(e=Uint32Array,v=b.UNSIGNED_INT,D=4);e=l.indices instanceof e?l.indices:new e(l.indices);b.bufferData(b.ELEMENT_ARRAY_BUFFER,e,y);q=r}var B={Ee:function(K){p!==r&&(b.bindBuffer(b.ARRAY_BUFFER,x),p=r);K&&xa.Lc()},Be:function(){q!==r&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,A),q=r)},bind:function(K){B.Ee(K);B.Be()},Qg:function(){b.drawElements(b.TRIANGLES,w,v,0)},Rg:function(K,z){b.drawElements(b.TRIANGLES,K,v,z*D)},remove:function(){b.deleteBuffer(x);
l.indices&&b.deleteBuffer(A);B=null}};k.push(B);return B},Ca:function(){-1!==p&&(b.bindBuffer(b.ARRAY_BUFFER,c.da),p=-1);-1!==q&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.indices),q=-1)},l:function(l,r){l&&ma.Ca();r&&xa.Ja();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},qb:function(l){l=l||b;var r=a(l);l.bindBuffer(l.ARRAY_BUFFER,r.da);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r.indices);xa.Ob(l);l.clear(l.COLOR_BUFFER_BIT);l.drawElements(l.TRIANGLES,3,l.UNSIGNED_SHORT,0);l.flush();l.bindBuffer(l.ARRAY_BUFFER,
null);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null);l.deleteBuffer(r.da);l.deleteBuffer(r.indices);n.reset();h&&(n.Ca(),xa.Ja())},ud:function(){var l=b,r=c;l.deleteBuffer(r.da);l.deleteBuffer(r.indices)},m:function(){n.ud();k.forEach(function(l){l.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);n.reset();h=!1;k.splice(0);d=0}};return n}(),oa=function(){var a=null,c=null,d=null,h=!1,k=[],p={J:-2,sd:1},q={Cb:function(){return h},A:function(){if(!h){a=b.createFramebuffer();
var n=aa.na();c=n&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=n&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;h=!0}},sh:function(){return c},kf:function(){return d},jc:function(){return b.FRAMEBUFFER},Ah:function(){return p},kh:function(){return a},instance:function(n){void 0===n.Ed&&(n.Ed=!1);var l=n.D?n.D:null,r=n.width,w=void 0!==n.height?n.height:n.width,y=a,x=null,A=!1,v=!1,D=0;l&&(r=r?r:l.K(),w=w?w:l.W());var e={he:function(){A||(y=b.createFramebuffer(),A=!0,D=p.sd++)},we:function(){e.he();
e.v();x=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,x);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,r,w);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,x);b.clearDepth(1)},bind:function(B,K){D!==p.J&&(b.bindFramebuffer(c,y),p.J=D);l&&l.v();K&&b.viewport(0,0,r,w);B&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},yg:function(){D!==p.J&&(b.bindFramebuffer(c,y),p.J=D)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},Ig:function(){b.clear(b.COLOR_BUFFER_BIT)},
Jg:function(){b.clear(b.DEPTH_BUFFER_BIT)},ig:function(){b.viewport(0,0,r,w)},v:function(){D!==p.J&&(b.bindFramebuffer(c,y),p.J=D)},rtt:function(B){l=B;p.J!==D&&(b.bindFramebuffer(b.FRAMEBUFFER,y),p.J=D);B.v()},P:function(){b.bindFramebuffer(c,null);p.J=-1},resize:function(B,K){r=B;w=K;x&&(b.bindRenderbuffer(b.RENDERBUFFER,x),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,r,w))},remove:function(){y===a||v||(b.bindFramebuffer(c,y),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,
null,0),x&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(y),x&&b.deleteRenderbuffer(x));v=!0}};n.Ed&&e.we();k.push(e);return e},P:function(){b.bindFramebuffer(c,null);p.J=-1},rg:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);aa.me();p.J=-1},reset:function(){p.J=-2},fa:function(){0!==p.J&&(b.bindFramebuffer(c,a),p.J=0)},clear:function(){aa.me();b.clear(b.COLOR_BUFFER_BIT)},m:function(){q.P();k.forEach(function(n){n.remove()});
null!==a&&(b.deleteFramebuffer(a),a=null);q.reset();h=!1;k.splice(0);p.sd=1}};return q}(),aa=function(){function a(){n="undefined"===typeof Ha?JEContext:Ha;l=!0}function c(g,t,G){for(var L=0;L<t.length;++L){var u=G.getExtension(t[L]+"_"+g);if(u)return u}return null}function d(){null!==e.Rb&&(clearTimeout(e.Rb),e.Rb=null);e.Ga=!1}function h(g){if(0===e.ta.length){e.X=b.PIXEL_PACK_BUFFER;e.ta.splice(0);e.ub.splice(0);for(var t=0;t<e.Sa;++t)e.ta.push(b.createBuffer()),e.ub.push(-1);e.ja=0;e.xc=0}b.bindBuffer(e.X,
e.ta[e.ja]);g.byteLength!==e.ub[e.ja]&&(b.bufferData(e.X,g.byteLength,b.STREAM_READ),e.ub[e.ja]=g.byteLength);e.Hh=!0}function k(){b.bindBuffer(e.X,null)}function p(){e.Ea.forEach(function(g){b.deleteSync(g)});e.Ea.splice(0)}function q(){e.ja=(e.ja+1)%e.Sa;++e.xc}var n=null,l=!1,r={Gd:!1,Nc:null,Oc:null,Kd:!1,Gf:!1,Pc:null,Ld:!1,Qc:null,Hd:!1,Xb:null,yf:!1,Yb:null,zf:!1},w=null,y={ka:!0,ma:!0,hc:!0,$d:!1},x=null,A=!0,v=null,D=null,e={Oe:1,Sa:-1,ja:0,xc:0,Ga:!1,ta:[],Ea:[],ub:[],X:null,Rb:null},B=
"EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),K=["OES","MOZ_OES","WEBKIT_OES"],z="undefined"===typeof window?{}:window,C={A:function(){if(l)return!0;C.reset();l||a();var g=b;if(!w.Gd){w.Nc=C.od(g);z.GL_EXT_FLOAT=w.Nc;w.Kd=w.Nc?!0:!1;if(w.Kd||C.na())w.Oc=C.pd(g),w.Gf=w.Oc?!0:!1,z.GL_EXT_FLOATLINEAR=w.Oc;w.Gd=!0}if(!w.Hd){w.Pc=C.ob(g);w.Pc&&(w.Ld=!0,z.GL_EXT_HALFFLOAT=w.Pc);if(w.Ld||C.na())w.Qc=C.qd(g),z.GL_EXT_HALFFLOATLINEAR=w.Qc;w.Ih=w.Qc?!0:!1;w.Hd=!0}w.Xb=C.md(g);w.yf=w.Xb?!0:!1;z.GL_EXT_COLORBUFFERFLOAT=
w.Xb;w.Yb=C.nd(g);w.zf=w.Yb?!0:!1;z.GL_EXT_COLORBUFFERHALFFLOAT=w.Yb;oa.A();Aa.A();if(!C.Qe())return!1;ma.A();Aa.wf();return!0},reset:function(){w=Object.assign({},r);x=Object.assign({},y)},K:function(){l||a();return n.K()},W:function(){l||a();return n.W()},na:function(){l||a();return n.na()},ld:function(g){C.md(g);C.nd(g);C.od(g);C.pd(g);C.ob(g);C.qd(g)},md:c.bind(null,"color_buffer_float",B),nd:c.bind(null,"color_buffer_half_float",B),od:c.bind(null,"texture_float",K),pd:c.bind(null,"texture_float_linear",
K),ob:c.bind(null,"texture_half_float",K),qd:c.bind(null,"texture_half_float_linear",K),ic:function(g){var t=C.ob(g);return t&&t.HALF_FLOAT_OES?t.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},gf:function(){return D||b.RGBA32F||b.RGBA},hf:function(){return v||b.RGBA16F||b.RGBA},df:function(){return x},bd:function(){return x.ka},Dg:function(){return x.ma},Cg:function(){return x.hc},He:function(){return x.$d&&A},se:function(g){A=g;!g&&e.Ga&&(p(),b.bindBuffer(e.X,null),e.Ga=!1)},Oh:function(){return e.Ga},Pb:function(g,
t,G){function L(){g.bindTexture(g.TEXTURE_2D,null);g.bindFramebuffer(u,null);g.deleteTexture(f);g.deleteFramebuffer(N)}var u=g.FRAMEBUFFER,O=g.NEAREST,N=g.createFramebuffer();g.bindFramebuffer(u,N);var f=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,O);g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_MIN_FILTER,O);g.texImage2D(g.TEXTURE_2D,0,t,3,3,0,g.RGBA,G,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,f,0);if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return L(),!1;xa.Kc(g);g.clearColor(0,0,0,0);g.viewport(0,0,3,3);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);ma.qb(g);g.bindFramebuffer(u,null);xa.cb(g);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f);ma.qb(g);t=new Uint8Array(36);g.readPixels(0,
0,3,3,g.RGBA,g.UNSIGNED_BYTE,t);L();for(G=0;36>G;++G)if(3!==G%4&&3<Math.abs(t[G]-127))return!1;return!0},$b:function(g){var t={ka:!1,ma:!1};g.disable(g.BLEND);g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&C.Pb(g,g.RGBA32F,g.FLOAT)&&(t.ka=!0,D=g.RGBA32F);!t.ka&&C.Pb(g,g.RGBA,g.FLOAT)&&(t.ka=!0,D=g.RGBA);var G=C.ic(g);v=null;g.RGBA16F&&C.Pb(g,g.RGBA16F,G)&&(t.ma=!0,v=g.RGBA16F);!t.ma&&C.Pb(g,g.RGBA,G)&&(t.ma=!0,v=g.RGBA);return t},Re:function(){var g=oa.instance({width:2});g.he();var t=
Aa.instance({width:2,isFloat:!0,Gb:3});g.v();t.v();C.flush();b.checkFramebufferStatus(oa.kf())!==b.FRAMEBUFFER_COMPLETE?(Aa.cg(),x.hc=!1):x.hc=!0;g.remove();t.remove()},Se:function(){var g=!1;C.na()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(t){return"undefined"!==typeof b[t]}));x.$d=g},Qe:function(){var g=C.$b(b);Object.assign(x,g);if(!x.ka&&!x.ma)return!1;C.Re();C.Se();return!0},be:function(g,t,G,L,u){b.readPixels(g,
t,G,L,b.RGBA,b.UNSIGNED_BYTE,u);return Promise.resolve(u,!1)},Mb:function(g,t,G,L,u,O,N){if(!C.He())return C.be(g,t,G,L,u);e.Sa=N||e.Oe;h(u);b.readPixels(g,t,G,L,b.RGBA,b.UNSIGNED_BYTE,0);e.Ea[e.ja]=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);C.flush();var f=!1;return new Promise(function(m,I){function M(){if(!e.Ga)return d(),k(),q(),I(),!1;var P=(e.ja+1)%e.Sa;switch(b.clientWaitSync(e.Ea[P],0,0)){case b.TIMEOUT_EXPIRED:case b.WAIT_FAILED:break;default:return d(),b.deleteSync(e.Ea[P]),e.Ea[P]=null,
b.bindBuffer(e.X,e.ta[P]),b.getBufferSubData(e.X,0,u),k(),q(),m(u,f),!0}e.Rb=setTimeout(M,0);return!1}d();e.xc+1<e.Sa?(k(),q(),m(u,!1)):(e.Ga=!0,M()||!O||f||(f=!0,O()))})},me:function(){b.viewport(0,0,C.K(),C.W())},flush:function(){b.flush()},m:function(){d();p();Aa.m();oa.m();ma.m();e.ta.forEach(function(g){b.deleteBuffer(g)});e.ta.splice(0);xa.reset();l=!1}};return C}(),Q=ma,va=oa,Z=Aa,Ca=function(){function a(g,t,G,L){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,L?e.NEAREST_MIPMAP_NEAREST:
e.LINEAR);var u=null;if(null!==G)try{u=e.getError();if("FUCKING_BIG_ERROR"===u)return!1;e.texImage2D(e.TEXTURE_2D,0,g,4,4,0,e.RGBA,t,G);u=e.getError();if(u!==e.NO_ERROR)return!1}catch(O){return!1}L&&e.generateMipmap(e.TEXTURE_2D);e.clear(e.COLOR_BUFFER_BIT);Q.qb(e);u=e.getError();if("FUCKING_BIG_ERROR"===u)return!1;e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,w);u=e.getError();u===e.INVALID_OPERATION&&"undefined"!==typeof e.PIXEL_PACK_BUFFER&&(e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.readPixels(0,
0,2,2,e.RGBA,e.UNSIGNED_BYTE,w),u=e.getError());if(u!==e.NO_ERROR)return!1;G=!0;for(L=0;16>L;++L)G=G&&4>Math.abs(w[L]-127);G&&(l.Xd=t,l.Dd=g);return G}function c(g,t){return B.ka&&a(g,e.FLOAT,new Float32Array(y),t)?(n=q.Yc,!0):!1}function d(g,t,G){if(!B.ma)return!1;var L=Aa.Ne(y),u=aa.ob(e);if(u&&u.HALF_FLOAT_OES&&a(g,u.HALF_FLOAT_OES,L,t)||e.HALF_FLOAT&&a(g,e.HALF_FLOAT,L,t))return n=q.Na,!0;L=new Float32Array(y);if(a(g,e.FLOAT,L,t))return n=q.Na,!0;e.bindTexture(e.TEXTURE_2D,G);e.texImage2D(e.TEXTURE_2D,
0,e.RGBA,2,2,0,e.RGBA,e.UNSIGNED_BYTE,null);e.bindFramebuffer(l.lb,C);Aa.td(e,G,2,2,L,!1,!1);e.bindFramebuffer(l.lb,null);e.bindTexture(e.TEXTURE_2D,G);return a(g,null,null,t)?(n=q.Na,!0):!1}function h(g,t,G){r=!0;if(d(g,!0,G)||c(t,!0))return!0;r=!1;return d(g,!1,G)||c(t,!1)?!0:!1}function k(g){if(n===q.R){e=g||b;n=q.RGBA8;r=!0;aa.ld(e);B||(B=aa.$b(e));va.reset();C=e.createFramebuffer();l.lb=e.DRAW_FRAMEBUFFER||e.FRAMEBUFFER;e.bindFramebuffer(l.lb,null);e.clearColor(0,0,0,0);e.viewport(0,0,2,2);F.R();
K=F.cb(e);g=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,g);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);z=g;var t=g=e.RGBA,G=e.RGBA16F,L=e.RGBA32F;L&&(g=L);G&&(t=G);if((G||L)&&h(t,g,z))return p(),!0;g=t=e.RGBA;if(h(t,g,z))return p(),!0;n=q.RGBA8;p();return!1}}function p(){e.deleteProgram(K.xa);e.deleteTexture(z);z=K=null}for(var q={R:-1,Yc:3,
Na:2,RGBA8:0},n=q.R,l={Xd:null,Dd:null,lb:null},r=!0,w=new Uint8Array(16),y=Array(64),x=0;4>x;++x)for(var A=0;4>A;++A){var v=0===(A+x)%2?1:0,D=4*x+A;y[4*D]=v;y[4*D+1]=v;y[4*D+2]=v;y[4*D+3]=v}var e=null,B=null,K=null,z=null,C=null;return{Ge:function(g){k(g);return r},ad:function(g,t){n===q.R&&(typeof("undefined"!==t)&&(B=t),k(g));return n!==q.RGBA8},Lh:function(g){k(g);return n===q.Yc},Hf:function(g){k(g);return n===q.Na},th:function(g){k(g);return l.Xd},jf:function(g){k(g);return l.Dd},m:function(){e=
null;r=!0;n=q.R;B=null}}}(),Lb=function(){return{instance:function(a){function c(){x&&x.remove();x=Z.instance({isFloat:!1,isPot:!1,width:a.size*a.Y[0],height:a.size*a.Y[1]})}var d=null,h=!1,k=!1,p=null,q=!1,n=!1,l=null,r="undefined"===typeof a.preprocessing?!1:a.preprocessing,w="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(h=!0,ea&&void 0!==ea.Ae&&(a.mask=ea.Ae+a.mask),d=Z.instance({isFloat:!1,url:a.mask}));var y=!1;a.customInputShader&&(y="s50",F.$c({name:"_",id:y,
g:a.customInputShader,ri:["uSource"],precision:"lowp"}),F.T(y,[{type:"1i",name:"_",value:0}]));switch(r){case "sobel":l="s39";q=!0;break;case "meanNormalization":l="s40";q=!0;break;case "grayScale":l="s36";q=!1;break;case "grayScaleTilt":l="s37";n=!0;q=!1;break;case "rgbGrayTilt":l="s38";n=!0;q=!1;break;case "copy":l=y?y:"s0";break;case "inputLightRegulation":l=y?y:"s36";p=Zb.instance({Cd:w,Wd:a.size,Td:a.nBlurPass,Z:!1});k=!0;break;case "inputMix0":l="none";p=$b.instance({u:w,pa:a.varianceMin,ga:a.blurKernelSizePx,
gain:a.gain||1,Z:!1});k=!0;break;case "inputMix1":l="none";p=ac.instance({u:w,pa:a.varianceMin,ga:a.blurKernelSizePx,gain:a.gain||1,Z:!1});k=!0;break;case "inputCut4":l="none";p=bc.instance({u:w,pa:a.varianceMin,ga:a.blurKernelSizePx,gain:a.gain||1,Za:a.isNormalized||!1,Ec:a.overlap||0,Z:!1});w*=p.lf();k=!0;break;case "direct":case "none":case "abort":l="abort";break;default:l="s4"}w=Math.ceil(w);n&&F.T(l,[{name:"u29",type:"1f",value:a.tilt}]);h&&(l+="Mask");var x=null;c();var A={K:function(){return a.size},
mf:function(){return w},kc:function(){return A.K()},sf:function(){return k?p.Wa():x},Tb:function(v){a.Y=v;c()},U:function(v){va.fa();if("abort"===l)return v.h(0),v;"none"!==l&&(F.set(l),q&&F.H("u30",1/a.size),x.L(),h&&d.h(1),Q.l(!1,!1),x.h(0),v=x);k&&p.process(v)},m:function(){x.remove();h&&d.remove()}};return A}}}(),Mb=function(){return{instance:function(a){function c(){if(C.Ka){k.input&&(k.input.remove(),k.xb.remove());var t=a.size*a.sparsity;z=Math.log(t/a.size)/Math.log(2);k.input=Z.instance({isMipmap:!0,
isFloat:!0,isPot:!0,width:t*a.Y[0],height:t*a.Y[1],tc:z});k.xb=Z.instance({isFloat:!0,isPot:!0,width:a.size*a.Y[0],height:a.size*a.Y[1]})}}function d(){k.wa&&k.wa.remove();k.wa=Z.instance({isFloat:!0,isPot:!q,isLinear:!q&&n.isLinear,width:a.size*a.Y[0],height:a.size*a.Y[1]})}function h(t){n.buffer.forEach(function(G,L){n.results[L][0]=t[0][G];n.results[L][1]=t[1][G];n.results[L][2]=t[2][G];n.results[L][3]=t[3][G]});return n.results}a.normalize=a.normalize||!1;var k={input:null,bias:null,xb:null,wa:null,
Dc:null,Bc:null,Cc:null},p=null,q=!0,n={type:"undef",F:null,isLinear:!1,buffer:[],results:[],yb:!1},l=-1,r=a.isReorganize?a.isReorganize:!1,w=a.kernelsCount?!0:!1,y=[a.Ya?"s32":"s31",a.Ya?"s34":"s33","s35"][a.shiftRGBAMode||0],x={isEnabled:!1},A=1/a.size;a.Ef?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Kb.kc(),q=!1):"full"===a.connectivityUp&&(a.sparsity=a.Kb.kc());var v={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],D=a.sparsity*
a.sparsity,e=!1,B=a.size,K="";if(a.maxPooling){switch(a.maxPooling.size){case 2:K="s41";break;case 4:K="s42"}e=!0;B/=a.maxPooling.size;k.Bc=Z.instance({isFloat:!0,isPot:!1,width:B})}var z=-1,C=null;q&&d();k.bias=Z.instance(a.bias);var g={K:function(){return a.size},kc:function(){return B},vd:function(){return a.classesCount},Ce:function(t){p.h(t)},Tf:function(){a.remap&&a.remap.isEnabled&&(x={isEnabled:!0,Lf:Z.instance(a.remap.maskTexture),ab:a.remap.layers.map(function(t){return a.parent.qf(t)}),
depth:a.remap.depth})},dg:function(){switch(a.connectivityUp){case "direct":C=cc.instance(a.connectivity);break;case "square":C=dc.instance(a.connectivity);break;case "squareFast":C=ec.instance(a.connectivity,a.activation);break;case "full":C=fc.instance(Object.assign({Ya:a.Ya},a.connectivity));break;case "conv":l=a.kernelsCount,C=gc.instance(a.connectivity),r&&(k.Dc=Z.instance({width:B,isFloat:!0,isFlipY:!1,isPot:!1}))}c()},U:function(t,G){p=t;C.Ka?(k.input.L(),w&&k.bias.h(2),C.U(x),k.input.h(0),
k.input.bf(z),k.xb.L(),w?F.set("s0"):(F.set(y),F.H("u4",D),k.bias.h(1)),k.input.De(z,0),Q.l(!1,!1),F.set(v),k.wa.v(),k.xb.h(0),Q.l(!1,!1)):(k.wa.L(),k.bias.h(1),C.U());if(q)return G=k.wa,e&&(k.Bc.L(),G.h(0),F.set(K),F.V("u14",A,A),Q.l(!1,!1),G=k.Bc),r&&(k.Dc.v(),F.set("s24"),F.V("u18",l,B/l),G.h(0),Q.l(!1,!1),G=k.Dc),G.h(0),G;var L=k.wa;if(a.normalize||n.yb)t=a.normalize,F.set(n.yb?"s9":"s8"),F.H("u10",t?A:1),k.Cc.L(),L.h(0),Q.l(!1,!1),L=k.Cc;t=null;switch(n.type){case "cpuRGBA2Float":L.gd(!1);G?
t=g.Uf(L).then(n.F):(L=g.Vf(L),n.F(L));break;case "cpuMeanFloat":L.gd(!0);if(G)t=L.Xf().then(n.F);else{L=L.Yf();for(var u=0;u<L.length;++u);n.F(L)}break;case "gpuRawAvg":case "gpuRaw":L.h(0);case "none":null!==n.F&&n.F(L)}G&&null===t&&(t=Promise.resolve());return t},Tb:function(t){a.Y=t;c();d()},kg:function(t){t&&(n.type=t.Ib||"none",n.F=t.Hb||null,n.isLinear=t.Ac?!0:!1);d();t="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var G=0,L=0,u=0;G<t;++G)n.buffer.push(L+
(a.size-1-u)*a.size),n.results.push([-1,-1,-1,-1]),++L,L===a.size&&(L=0,++u);n.yb="gpuRawAvg"===n.type||"cpuMeanFloat"===n.type;if(a.normalize||n.yb)k.Cc=Z.instance({isFloat:!0,isPot:!0,width:a.size})},Uf:function(t){return t.Wf().then(h)},Vf:function(t){t=t.ae();h(t);return n.results},m:function(){for(var t in k){var G=k[t];G&&G.remove()}C&&(C.m(),C=null)}};a.Kb&&g.dg(a.Kb);return g}}}(),cc=function(){return{instance:function(a){var c=Z.instance(a.weights);return{Ka:!0,tb:function(){return 1},m:function(){c.remove()},
uf:function(){return c},U:function(){F.set("s30");c.h(1);Q.l(!1,!1)}}}}}(),fc=function(){return{instance:function(a){var c=a.fromLayerSize,d=Z.instance(a.weights),h=a.Ya?"s27":"s26";return{Ka:!0,tb:function(){return c},m:function(){d.remove()},U:function(k){if(k.isEnabled){F.set("s28");k.Lf.h(3);for(var p=Math.min(k.ab.length,k.depth),q=0;q<p;++q)k.ab[q].Ce(4+q)}else F.set(h);F.H("u8",a.toLayerSize);F.H("u9",a.fromLayerSize);d.h(1);Q.l(!1,!1)}}}}}(),dc=function(){return{instance:function(a){for(var c=
a.fromLayerSize,d=a.toLayerSize,h=a.toSparsity,k=h*d,p=k/c,q=c/d,n=0,l=0,r=0,w=Array(h*d*h*d*4),y=Array(h*d*h*d*4),x=Array(c*c),A=0;A<x.length;++A)x[A]=0;A=Math.floor(h/2);for(var v=.5/d,D=.5/c,e=.5/k,B=0;B<d;++B)for(var K=Math.round(B*q),z=0;z<d;++z){var C=Math.round(z*q),g=B/d,t=z/d;g+=v;t+=v;for(var G=0;G<h;++G){var L=K+G-A;0>L&&(L+=c);L>=c&&(L-=c);for(var u=0;u<h;++u){var O=n/k,N=l/k,f=C+u-A;0>f&&(f+=c);f>=c&&(f-=c);var m=L/c,I=f/c;N=1-N-1/k;m+=D;I+=D;O+=e;N+=e;var M=B*h+G,P=z*h+u;P=d*h-P-1;M=
P*d*h+M;w[4*M]=O;w[4*M+1]=N;w[4*M+2]=m;w[4*M+3]=I;I=x[f*c+L]++;M=I%p;m=L*p+M;f=f*p+(I-M)/p;f=c*p-1-f;f=f*c*p+m;y[4*f]=O;y[4*f+1]=N;y[4*f+2]=g;y[4*f+3]=t;++n>=k&&(n=0,++l);++r}}}x=null;var fa=Z.instance(a.weights);delete a.weights.data;var ta=Z.instance({width:k,isFloat:!0,array:new Float32Array(y),isPot:!0});y=null;var Da=Z.instance({width:k,isFloat:!0,array:new Float32Array(w),isPot:!0});w=null;return{Ka:!0,tb:function(){return p},m:function(){ta.remove();Da.remove();fa.remove()},U:function(){F.set("s25");
fa.h(1);Da.h(2);Q.l(!1,!1)}}}}}(),gc=function(){return{instance:function(a){var c=a.kernelsCount,d=a.toSparsity,h=d*a.toLayerSize/a.fromLayerSize,k=a.inputScale||[1,1],p=Z.instance(a.weights);return{Ka:!0,tb:function(){return h},Eh:function(){return d},uf:function(){return p},m:function(){p.remove()},U:function(){F.set("s29");F.fg("u28",k);F.H("u26",c);F.H("u27",d);F.H("u8",a.toLayerSize);F.H("u9",a.fromLayerSize);p.h(1);Q.l(!1,!1)}}}}}(),ec=function(){return{instance:function(a,c){var d=a.fromLayerSize,
h=a.toLayerSize,k=a.toSparsity,p=a.stride?a.stride:1,q=k*h/d,n=h<d,l=d/h,r=Z.instance(a.weights),w="s51"+[d.toString(),h.toString(),k.toString(),p.toString(),c].join("_");F.Ze(w)||(a=Xb.cf(c,"gl_FragColor","gl_FragColor"),h=[{type:"1f",name:"u8",value:h},{type:"1f",name:"u32",value:p}],n&&h.push({type:"1f",name:"u9",value:d}),d=[(n?q:k).toFixed(1),a],n&&d.push(l.toFixed(1)),F.xf(n?"s47":"s46",w,d),F.T(w,h.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));
return{Ka:!1,tb:function(){return q},m:function(){r.remove()},U:function(){F.set(w);r.h(3);Q.l(!1,!1)}}}}}(),Zb=function(){return{instance:function(a){var c=a.Td?a.Td:3,d=a.Cd?a.Cd:64,h=a.Wd?a.Wd:64,k=a.Z?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var p=Z.instance(a),q=Z.instance(a),n=Z.instance(a),l=Z.instance(a),r=Z.instance({isFloat:!0,width:h,isPot:!1,isFlipY:!1}),w=1/d;return{process:function(y){F.set("s43");l.v();Q.l(k,!1);F.set("s44");for(var x=0;x<c;++x)p.v(),F.V("u14",w,0),Q.l(k,!1),
n.v(),l.h(0),Q.l(k,!1),q.v(),p.h(0),F.V("u14",0,w),Q.l(k,!1),l.v(),n.h(0),Q.l(k,!1),x!==c-1&&q.h(0);F.set("s45");r.v();y.h(0);q.h(1);l.h(2);Q.l(k,!1);r.h(0)},Wa:function(){return r}}}}}(),$b=function(){return{instance:function(a){function c(w){return Z.instance({isFloat:w,width:d.u,isPot:!1,isFlipY:!1})}var d=Object.assign({pa:.1,ga:9,u:128,gain:1,Z:!1},a),h=c(!1),k=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],q=c(!0),n=[h,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.ga-1)/2).toFixed(2)).replace("2.2222",(1/d.u).toFixed(6));var l="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.pa.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),r={u1:0};F.fb([{id:"s53",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:r,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:a,j:r,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",g:l,j:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){F.set("s53");h.L();Q.l(d.Z,!1);F.set("s54");for(var w=0;3>w;++w)F.V("u33",1,0),k[w].v(),n[w].h(0),
Q.l(!1,!1),F.V("u33",0,1),p[w].v(),k[w].h(0),Q.l(!1,!1);F.set("s55");q.v();h.h(0);p[0].h(1);p[1].h(2);p[2].h(3);Q.l(!1,!1);q.h(0)},Wa:function(){return q}}}}}(),ac=function(){return{instance:function(a){function c(r){return Z.instance({isFloat:r,width:d.u,isPot:!1,isFlipY:!1})}var d=Object.assign({pa:.1,ga:9,u:128,gain:1,Z:!1},a),h=c(!1),k=c(!1),p=c(!1),q=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.ga-1)/2).toFixed(2)).replace("2.2222",(1/d.u).toFixed(6));var n="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.pa.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),l={u1:0};F.fb([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:l,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:a,j:l,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",g:n,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){F.set("s56");h.L();Q.l(d.Z,!1);F.set("s57");F.V("u33",1,0);k.v();h.h(0);Q.l(!1,!1);F.V("u33",0,1);p.v();k.h(0);Q.l(!1,!1);F.set("s58");q.v();h.h(0);p.h(1);Q.l(!1,!1);q.h(0)},Wa:function(){return q}}}}}(),bc=function(){return{instance:function(a){function c(w){return Z.instance({isFloat:w,width:d.u,isPot:!1,isFlipY:!1})}
var d=Object.assign({pa:.1,ga:9,u:128,gain:1,Ec:0,Za:!1,Z:!1},a),h=c(!1),k=null,p=null,q=null;d.Za&&(k=c(!1),p=c(!1),q=c(!0));a={u1:0};var n=[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",
d.Ec.toFixed(4)),j:a,i:["u1"],precision:"lowp"}];if(d.Za){var l="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.ga-1)/2).toFixed(2)).replace("2.2222",(1/d.u).toFixed(6)),r="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.pa.toFixed(4)).replace("2.2222",d.gain.toFixed(4));n.push({id:"s60",name:"_",g:l,j:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",g:r,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}F.fb(n);return{process:function(){F.set("s59");h.L();Q.l(d.Z,!1);d.Za?(F.set("s60"),F.V("u33",1,0),k.v(),h.h(0),Q.l(!1,!1),F.V("u33",0,1),p.v(),k.h(0),Q.l(!1,!1),F.set("s61"),q.v(),h.h(0),p.h(1),Q.l(!1,!1),q.h(0)):h.h(0)},lf:function(){return 2-d.Ec},Wa:function(){return d.Za?q:h}}}}}(),X={Ad:function(){return X.ed()?
document.createElement("video"):!1},Ua:function(a,c){a[c]=!0;a.setAttribute(c,"true")},Ke:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},Je:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},If:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},Fg:function(){return X.cd()||X.Je()},cd:function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},gh:function(){return X.Ke()?X.If()?window.innerHeight/window.innerWidth*45:45:45},ed:function(){return navigator.mediaDevices&&
navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},ci:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},dd:function(a){if(!a)return a;var c=null;if(a.video){var d=function(h){return h&&"object"===typeof h?Object.assign({},h):h};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c=
{audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&X.Zc(c,a.deviceId);return c},Zc:function(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)},qe:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},Pe:function(a){function c(x){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(A,v){return Math.abs(A-x)-Math.abs(v-x)})}function d(x){var A=X.dd(a);x=x(A);k.push(x);h(x)}function h(x){if(x.video&&
x.video.facingMode&&x.video.facingMode.exact){var A=x.video.facingMode.exact;x=X.dd(x);delete x.video.facingMode.exact;x.video.facingMode.ideal=A;k.push(x)}}var k=[];if(!a||!a.video)return k;h(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=c(a.video.width.ideal).slice(0,3),q=c(a.video.height.ideal).slice(0,3),n={},l=0;for(n.ra=void 0;l<p.length;n={ra:n.ra},++l){n.ra=p[l];var r={},w=0;for(r.qa=void 0;w<q.length;r={qa:r.qa},++w)if(r.qa=q[w],n.ra!==a.video.width.ideal||
r.qa!==a.video.height.ideal){var y=Math.max(n.ra,r.qa)/Math.min(n.ra,r.qa);y<4/3-.1||y>16/9+.1||d(function(x,A){return function(v){v.video.width.ideal=x.ra;v.video.height.ideal=A.qa;return v}}(n,r))}}}d(function(x){return X.qe(x)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(x){delete x.video.width.ideal;delete x.video.height.ideal;return x}),d(function(x){delete x.video.width;delete x.video.height;return x}));a.video.facingMode&&(d(function(x){delete x.video.facingMode;
return x}),a.video.width&&a.video.height&&d(function(x){X.qe(x);delete x.video.facingMode;return x}));k.push({audio:a.audio,video:!0});return k},Sd:function(a){a.volume=0;X.Ua(a,"muted");if(X.cd()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;X.Ua(a,"muted")},5)}},te:function(a,c,d){return null===
a?Promise.resolve():new Promise(function(h,k){if(a.srcObject&&a.srcObject.getVideoTracks){var p=a.srcObject.getVideoTracks();1!==p.length?k("INVALID_TRACKNUMBER"):(p=p[0],c?X.get(a,h,k,d):(p.stop(),h()))}else k("BAD_IMPLEMENTATION")})},yd:function(a,c,d,h){function k(q){p||(p=!0,d(q))}var p=!1;return navigator.mediaDevices.getUserMedia(h).then(function(q){function n(){setTimeout(function(){if(a.currentTime){var r=a.videoHeight;if(0===a.videoWidth||0===r)k("VIDEO_NULLSIZE");else{r={Ie:null,jg:null,
Mf:null};try{var w=q.getVideoTracks()[0];w&&(r.Mf=w,r.Ie=w.getCapabilities(),r.jg=w.getSettings())}catch(y){}p||c(a,q,r)}}else k("VIDEO_NOTSTARTED")},700)}function l(){a.removeEventListener("loadeddata",l,!1);var r=a.play();X.Sd(a);"undefined"===typeof r?n():r.then(function(){n()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=q:(a.src=window.URL.createObjectURL(q),a.videoStream=q);X.Sd(a);a.addEventListener("loadeddata",l,!1)}).catch(function(q){k(q)})},
tf:function(a,c){var d=c||X.Ad();return new Promise(function(h,k){X.get(d,h,k,a)})},get:function(a,c,d,h){if(!a)return d&&d("VIDEO_NOT_PROVIDED"),!1;if(!X.ed())return d&&d("MEDIASTREAMAPI_NOT_FOUND"),!1;X.Ua(a,"autoplay");X.Ua(a,"playsinline");h&&h.audio?a.volume=0:X.Ua(a,"muted");X.Me(h).then(function(){X.yd(a,c,function(){function k(q){if(0===q.length)d("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var n=q.shift();X.yd(a,c,function(){k(q)},n)}}var p=X.Pe(h);k(p)},h)})},Me:function(a){if(!a||
!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var c=a.video.facingMode;c=c.exact||c.ideal;if(!c)return Promise.resolve("NO_FACINGMODE");var d={user:[],environment:["camera2 0"]}[c];return d&&0!==d.length?new Promise(function(h){X.zd(function(k){k?(k=k.find(function(p){var q=p.label;return q?d.some(function(n){return q.includes(n)}):!1}))?(a.video.deviceId={exact:k.deviceId},h("SUCCESS")):h("NO_PREFERRED_DEVICE_FOUND"):
h("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")},zd:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},Eg:function(a,c,d){var h={};h[c]=d;c=[];c.push(h);a.applyConstraints({advanced:c}).catch(function(){})}},
qa=function(){function a(D,e,B,K,z,C,g){if(!A)if(g===C.length)z();else{switch(C[g]){case "A":B();break;case "D":D();break;case "S":e().then(function(t,G){v.Qb();a(D,e,B,G?null:K,z,C,++g)}).catch(function(t){console.log("An error occurred in the WebAR loop: ",t);z()});return;case "R":K&&K()}a(D,e,B,K,z,C,++g)}}var c={n:5,wc:1,Pd:0,rb:[35,49],mb:[2,200],k:.7,sg:200,Sf:.05},d=-1,h=null,k=-1,p=-1,q=0,n=-1,l=-1,r=0,w=0,y=c.mb[1],x=Math.log(2),A=!0,v={rf:function(){switch(d){case -1:return-1;case 0:return l+
h.Pd;case 1:return r}},mh:function(D){return Math.pow(Math.min(Math.max(n,0),h.n-1)/(h.n-1),D||1)},A:function(D){h=Object.assign({},c,D);n=l=h.wc;d=0;v.reset()},Qb:function(D){D=("undefined"===typeof D?Date.now():D)||0;var e=Math.min(Math.max(D-w,h.mb[0]),h.mb[1]);y=e;w=D;var B=-1===k?0:h.k;k=Math.min(Math.max(1E3/e,5),120)*(1-B)+k*B;D-p>h.sg&&5<++q&&(e=h.k,n=n*(1-e)+(k<h.rb[0]?l-1:k>h.rb[1]?l+1:l)*e,Math.abs(n-l)>1-h.Sf&&(e=Math.min(Math.max(Math.round(n),0),h.n-1),e!==l&&(n=l=e,k=(h.rb[1]-h.rb[0])/
2)),p=D)},Fc:function(D,e,B,K,z,C){A=!1;a(D,e,B,K,z,C,0)},stop:function(){A=!0},Ic:function(D){r=D;d=1},Sc:function(){d=0;v.reset()},reset:function(){y=c.mb[1];p=k=-1;q=0},pi:function(D,e,B){B=Math.exp(-x*y/B);return(1-B)*D+B*e},ff:function(){return y}};return v}(),Ma=function(){function a(){d(D+A.uc);e.port.postMessage("DONE")}function c(){C.hb=0===A.gb?K(d):K(h)}function d(u){z.Ha&&null!==v&&(u-=D,u=Math.min(Math.max(u,A.hd[0]),A.hd[1]),D+=u,p(),g.isEnabled&&g.$a&&z.$&&D-g.rc>A.Wc&&(r(),g.rc=D),
v(D))}function h(u){z.Ha&&(C.timeout=setTimeout(d.bind(null,u),A.gb))}function k(){v=null;z.Ha=!1;p()}function p(){C.hb&&(window.cancelAnimationFrame(C.hb),C.hb=null);C.timeout&&(window.clearTimeout(C.timeout),C.timeout=null)}function q(u){u&&!z.$?(z.$=!0,B&&qa.Sc(),e.port.postMessage("STOP"),aa.se(!0),c()):!u&&z.$&&(z.$=!1,B&&qa.Ic(1),aa.se(!1),e.port.postMessage("START"))}function n(u){u.target.hidden?G():t()}function l(u,O,N){O=u.createShader(O);u.shaderSource(O,N);u.compileShader(O);return O}
function r(){g.$a=!1;var u=g.la,O=g.vb,N=g.wb,f=g.X;u.uniform1f(g.Bd,Math.random());g.Ia?O.beginQueryEXT(f,N):u.beginQuery(f,N);u.drawElements(u.POINTS,1,u.UNSIGNED_SHORT,0);g.Ia?O.endQueryEXT(f):u.endQuery(f);aa.flush();y().then(function(m){0===m||isNaN(m)?(g.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",m)):(m=A.ve*A.Vc*1E3/m,g.Ub=(g.Ub+1)%A.La,g.sc[g.Ub]=m,++g.Od>A.La&&(g.Db.set(g.sc),g.Db.sort(function(I,M){return I-M}),
m=g.Db[Math.floor(A.La/2)],g.pb=Math.max(g.pb,m),A.Uc(m/g.pb)),g.$a=!0)}).catch(function(){g.$a=!0})}function w(u){var O=g.la,N=g.vb,f=g.wb;f=g.Ia?N.jh(f,N.QUERY_RESULT_AVAILABLE_EXT):O.getQueryParameter(f,O.QUERY_RESULT_AVAILABLE);O=O.getParameter(N.GPU_DISJOINT_EXT);f?u(!O):setTimeout(w.bind(null,u),.1)}function y(){return new Promise(function(u,O){w(function(N){if(N){N=g.la;var f=g.vb,m=g.wb;N=g.Ia?f.getQueryObjectEXT(m,f.QUERY_RESULT_EXT):N.getQueryParameter(m,N.QUERY_RESULT);u(N)}else O()})})}
var x={Id:!0,hd:[1,200],uc:20,gb:0,Vc:50,ve:240,Wc:3E3,La:3,Uc:null},A=null,v=null,D=0,e=null,B=!1,K=null,z={ua:!1,$:!0,qc:!1,pc:!1,oc:!1,Ha:!1},C={hb:null,timeout:null},g={isEnabled:!1,$a:!1,la:null,vb:null,wb:null,X:null,Bd:null,Ia:!0,rc:0,Od:0,sc:null,Db:null,Ub:0,pb:0},t=q.bind(null,!0),G=q.bind(null,!1),L={A:function(u){A=Object.assign(x,u);Object.assign(z,{$:!0,ua:!0,Ha:!1});K=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==A.Uc){u=document.createElement("canvas");u.setAttribute("width",
"1");u.setAttribute("height","1");var O={antialias:!1};u=u.getContext("webgl2",O)||u.getContext("webgl",O);if(O=u.getExtension("EXT_disjoint_timer_query")||u.getExtension("EXT_disjoint_timer_query_webgl2")){g.la=u;g.vb=O;g.isEnabled=!0;g.Ia=O.beginQueryEXT?!0:!1;var N=l(u,u.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),f=l(u,u.FRAGMENT_SHADER,"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
A.Vc.toString())),m=u.createProgram();u.attachShader(m,N);u.attachShader(m,f);u.linkProgram(m);N=u.getAttribLocation(m,"a0");g.Bd=u.getUniformLocation(m,"u39");u.useProgram(m);u.enableVertexAttribArray(N);m=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,m);u.bufferData(u.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),u.STATIC_DRAW);u.vertexAttribPointer(N,4,u.FLOAT,!1,16,0);m=u.createBuffer();u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,m);u.bufferData(u.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),u.STATIC_DRAW);
u.disable(u.DEPTH_TEST);u.disable(u.DITHER);u.disable(u.STENCIL_TEST);u.viewport(0,0,1,1);m=g.Ia?O.createQueryEXT():u.createQuery();g.wb=m;g.X=O.TIME_ELAPSED_EXT||u.TIME_ELAPSED;g.rc=-A.Wc;g.sc=new Float32Array(A.La);g.Db=new Float32Array(A.La);g.pb=0;g.Ub=0;g.Od=0;g.$a=!0}}if(A.Id){u=!1;try{if("undefined"===typeof SharedWorker){var I=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
A.uc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),M=new Worker(I);M.addEventListener("message",a);e={Zd:M,port:M};z.qc=!0}else{var P=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
A.uc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),fa=new SharedWorker(P);fa.port.start();fa.port.addEventListener("message",a);e={Zd:fa,port:fa.port};z.pc=!0}u=!0}catch(ta){}u&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",n):(window.addEventListener("blur",G),window.addEventListener("focus",t)),window.addEventListener("pagehide",
G),window.addEventListener("pageshow",t),z.oc=!0)}B="undefined"!==typeof qa},m:function(){k();z.oc&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",n):(window.removeEventListener("blur",G),window.removeEventListener("focus",t)),window.removeEventListener("pagehide",G),window.removeEventListener("pageshow",t),z.oc=!1);z.pc?(e.port.close(),z.pc=!1):z.qc&&(e.Zd.terminate(),z.qc=!1);Object.assign(z,{$:!0,ua:!1,Ha:!1});v=null},Rh:function(){return z.$},update:function(u){Object.assign(A,
u)},Fc:function(u){z.ua||L.A({});p();z.Ha=!0;v=u;z.$&&c()},stop:k};return L}(),Ta=function(){function a(y,x){var A=y[0]-.5;y=y[1]-.5;var v=x[0]-.5;x=x[1]-.5;return A*A+y*y-(v*v+x*x)}var c={Vd:4,Jb:[1.5,1.5,2],O:[.1,.1,.1],de:1,u:-1,M:-1,ng:2,Rf:1,Hc:!0,Ve:.8},d=null,h=[],k=[],p=[],q=[0],n=[.5,.5,1],l=null,r=0,w=[0,0,0];return{A:function(y){d=Object.assign({},c,y);h.splice(0);k.splice(0);p.splice(0);r=0;y=d.Jb[0]*d.O[0];var x=d.Jb[1]*d.O[1],A=1/(1+d.Jb[2]*d.O[2]),v=d.de*Math.min(d.u,d.M),D=v/d.u;v/=
d.M;var e=.5*d.Ve;e*=e;for(var B=0;B<d.Vd;++B){var K=[];k.push(K);var z=Math.pow(A,B),C=D*z,g=v*z;z=C*d.Rf;p.push(z);var t=C*y,G=g*x;C/=2;g/=2;for(var L=1+(1-C-C)/t,u=1+(1-g-g)/G,O=0;O<u;++O)for(var N=g+O*G,f=N-.5,m=0;m<L;++m){var I=C+m*t,M=I-.5;M*M+f*f>e||(I=[I,N,z],h.push(I),K.push(I))}d.Hc&&K.sort(a);l=h}d.Hc&&h.sort(a)},get:function(y){var x=l.length;if(0===x)return n;for(;y>=q.length;)q.push(0);q[y]>=x&&(q[y]=0);var A=l[Math.floor(q[y])%x];q[y]=(q[y]+1/d.ng)%x;if(0===r)return A;w[0]=A[0];w[1]=
A[1];w[2]=r;return w},Xh:function(y){y>=q.length||(q[y]=Math.floor(Math.random()*l.length))},Jc:function(y){r=y;if(0===r)l=h;else{for(var x=p.length,A=x-1,v=0;v<x;++v)if(p[v]<=y){A=v;break}l=k[A]}},reset:function(){for(var y=h.length/q.length,x=0;x<q.length;++x)q[x]=Math.floor(x*y);r=0;l=h}}}(),da=function(){function a(e,B,K,z){return Math.max(0,K>e?e+B/2-(K-z/2):K+z/2-(e-B/2))}function c(e){return!n.Fd(e)}function d(e,B,K){for(var z=e.length;v.length<z;)v.push({oa:[0,0],Eb:[0,0],ia:[0,0],ya:0,scale:0,
Ta:0,eb:0});z=e.length;for(var C=0;C<z;++C){var g=e[C],t=v[C],G=B[C].rz,L=Math.cos(G),u=Math.sin(G);t.ya=G;t.Ta=L;t.eb=u;t.ia[0]=g.x;t.ia[1]=g.y/K;t.scale=g.ca;t.oa[0]=g.ca*n.jd[0];t.oa[1]=g.ca*n.jd[1];t.Eb[0]=t.oa[0]*t.oa[0];t.Eb[1]=t.oa[1]*t.oa[1]}}function h(e,B,K){var z=Math.abs(-e.eb*(K-e.ia[1])-e.Ta*(B-e.ia[0]));B=Math.abs(e.Ta*(K-e.ia[1])-e.eb*(B-e.ia[0]));return 1>=z*z/e.Eb[0]+B*B/e.Eb[1]}function k(e,B,K,z){var C=e[K];d(e,B,z);var g=v[K];return e.some(function(t,G){if(!(t=G===K||C.va>t.va||
3>t.va||!(0<a(C.x,C.ca*A,t.x,t.ca*A))||!(0<a(C.y,C.ca*z*A,t.y,t.ca*z*A)))){t=v[G];g.scale>t.scale?G=g:(G=t,t=g);for(var L=0,u=0,O=n.We,N=0;N<O;++N)for(var f=((N+.5)/O*2-1)*t.oa[1],m=0;m<O;++m){var I=((m+.5)/O*2-1)*t.oa[0],M=t.ia[0]+(-f*t.eb+I*t.Ta);I=t.ia[1]+(f*t.Ta+I*t.eb);h(t,M,I)&&(++L,h(G,M,I)&&++u)}t=u/L<n.Rd}return t?!1:!0})}function p(e){return e.isDetected}var q={N:1,Rd:.3,jd:[1,1],We:6,fe:.3,Fd:null,Ff:!0},n=null,l=0,r=null,w=!1,y=0,x=0,A=Math.sqrt(2),v=[],D={A:function(e){n=Object.assign({},
q,e);r=[0]},Nd:function(){return 1!==n.N},wd:function(){return l},Md:function(){return w},sa:function(){return n.N},Ch:function(){return r},Jf:function(e){return r.includes(e)},update:function(e,B){var K=r;if(K.length>e)K.splice(0,K.length-e);else for(;K.length<e;)K.push(0);if(1!==n.N)if(B.every(c)){B=y;for(var z=0;z<e;++z)K[z]=B,B=(B+1)%n.N;y=B}else{z=Math.round(n.fe*e);z=Math.max(1,z);for(var C=y,g=0,t=0;g<e;++g){if(c(B[C])&&++t>z){do++C===n.N&&(C=0);while(c(B[C]))}K[g]=C;C=(C+1)%n.N}y=C}},Qb:function(e){l=
r[e];x=(.5+l)/n.N;w=r.lastIndexOf(l)===e;return l},lg:function(e,B,K){return 1===n.N?!1:k(e,B,l,K)},re:function(e){n.Ff&&1===n.N||F.H(e,x)},af:function(e){return e.find(p)},hh:function(e){return e.findIndex(p)},fh:function(e){var B=D.af(e);if(!B||e.every(p))return Ta.Jc(0),!1;Ta.Jc(B.s);return!0},Ue:function(e){for(var B=new Float32Array(e.length*n.N),K=0,z;K<n.N;++K)for(z=0;z<e.length;++z)B[K*e.length+z]=e[z];return B},fc:function(e){for(var B=[],K=0;K<n.N;++K){var z=B,C=z.push,g=void 0,t=e,G={};
for(g in t){var L=g;var u=t[g];var O=typeof u;u=["string","boolean","number"].includes(O)?u:"object"!==O?null:ArrayBuffer.isView(u)?u.slice():JSON.parse(JSON.stringify(u));G[L]=u}C.call(z,G)}return B}};return D}(),yb=function(){var a={Bf:!0,isLinear:!0,vc:[4,11]};return{Ye:function(c,d,h){return d.isDetected?Math.floor(d.s*c):(c=Math.floor(Math.log2(c/4)),c=Math.min(Math.max(c,4),9),Math.max(h,Math.pow(2,c)))},instance:function(c){var d=Object.assign({},a,c),h=[],k=null,p=-1,q=null,n=!1;for(c=d.vc[0];c<=
d.vc[1];++c)h[c]=null;return{L:function(l,r){r!==p&&(k&&k.remove(),k=Z.instance({isLinear:d.isLinear,isPot:!0,width:r}));if(n=d.Bf&&r<.5*l){l=Math.floor(Math.log2(l));var w=d.vc;l=Math.min(Math.max(l,w[0]),w[1]);w=l;if(!h[w]){var y=Z.instance({isPot:!0,isMipmap:!0,Jd:!0,width:Math.pow(2,w)});h[w]={D:y,Qd:-1}}l=h[l];q=l.D;l.Qd!==r&&(q.ke(Math.log2(r)),l.Qd=r)}else q=k;p=r;q.L()},h:function(l){q.h(l);n&&q.sb()},Ba:function(l){q.Ba(l)},remove:function(){k&&k.remove();h.forEach(function(l){l&&l.D.remove()})}}}}}(),
ea={neuralNetworkPath:"NN_DEFAULT.json",ea:0,$f:{threshold:1.2,nScaleLevels:2,scale0Factor:.8,nDetectsPerLoopRange:[2,6],overlapFactors:[2,2,3],scanCenterFirst:!0,nDetectsPerLoop:-1,multiDetectionThresholdFactors:[.5,.6],translationScalingFactors:[.3,.3,1],isCleanGLStateAtEachIteration:!0,enableAsyncReadPixels:!1,animateProcessOrder:"DSAR"},pg:50,Of:.4,Nf:8,Pf:.3,mg:{translationFactorRange:[.002,.01],rotationFactorRange:[.015,.1],qualityFactorRange:[.8,.98],
alphaRange:[.04,1],followZRotAlphaFactor:.8},bb:[.65,1,.262],xe:.2,ze:2,ye:.1,Qf:8,Ud:1,$e:$a.Fb.bind(null,.3,.7),ug:20,oe:3},pa={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1920,minHeight:480,maxHeight:1920,rotate:0,flipX:!1},ja={yc:-3,Kf:-1,error:-2,ready:1,play:2,pause:3},na=ja.yc,J=null,hc={Ab:!1,Mc:null,element:null,D:null,G:[0,0],B:[.5,0,0,.5],Lb:0,Ra:null,zb:!1},S=null,ic={Qa:null,Wb:null,antialias:!0,Xc:"./",Ma:null,ha:null,ea:ea.ea,Yd:ea.ea,Bb:!1,Da:!0},Oa=null,
ba=null,sa=null,Pa=1,Na={Gc:-1,ac:-1},Y=null,jc={u:0,M:0,G:[0,0],Xa:null},V={za:null,buffer:null,O:null,bb:null,ba:ea.Ud,ee:1,Va:null},Sa=null,Ba=null,jb=[],kb=[],sb={VERSION:"3.3.0",init:function(a){function c(){na!==ja.error&&2===++h&&(Ka(),Bb(),Ja(),S.Qa&&(na=ja.ready,S.Qa(!1,{GL:b,canvasElement:S.ha,videoTexture:J.D.get(),videoTransformMat2:J.B,maxFacesDetected:da.sa(),videoElement:J.element}),ib()),hb())}if(na!==ja.yc)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;na=ja.Kf;
J=Object.assign({},hc);S=Object.assign({},ic);Y=Object.assign({},jc);V.bb=ea.bb.slice(0);"undefined"!==typeof a.antialias&&(S.antialias=a.antialias);a.callbackReady&&(S.Qa=a.callbackReady);a.callbackTrack&&(S.Wb=a.callbackTrack);a.nExpressions&&(V.ba=a.nExpressions);a.expressionsEasings&&(V.Va=a.expressionsEasings);"undefined"!==typeof a.animateDelay&&(S.ea=a.animateDelay);"undefined"!==typeof a.NNCPath&&(S.Xc=a.NNCPath);"undefined"!==typeof a.NNC&&(S.Ma=a.NNC);"undefined"!==typeof a.followZRot&&
(S.Da=a.followZRot?!0:!1);if(!a.canvasId&&!a.canvas)return Ia("NO_CANVASID"),!1;S.ha=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!S.ha)return Ia("INVALID_CANVASID"),!1;Y.u=S.ha.width;Y.M=S.ha.height;if(!Y.u||!Y.M)return Ia("INVALID_CANVASDIMENSIONS"),!1;ba=Object.create(ea.$f);a.scanSettings&&Object.assign(ba,a.scanSettings);var d=1;"undefined"!==typeof a.maxFacesDetected&&(d=Math.max(1,a.maxFacesDetected));if(d>ea.Nf)return Ia("MAXFACES_TOOHIGH"),!1;da.A({N:d,Rd:ea.Of,fe:ea.Pf,Fd:function(k){return k.detected>
ba.multiDetectionThresholdFactors[1]*ba.threshold}});for(d=0;d<da.sa();++d)jb.push(new Float32Array(ea.Qf)),kb.push(0);Ma.A({Id:a.isKeepRunningOnWinFocusLost||!1,gb:S.ea});qa.A({wc:0,n:ba.nDetectsPerLoopRange[1]-ba.nDetectsPerLoopRange[0]+1,Pd:ba.nDetectsPerLoopRange[0]});-1!==ba.nDetectsPerLoop?qa.Ic(ba.nDetectsPerLoop):qa.Sc();V.O=ba.translationScalingFactors.slice(0);sa=Object.create(ea.mg);a.stabilizationSettings&&Object.assign(sa,a.stabilizationSettings);var h=0;a.videoSettings&&a.videoSettings.videoElement?
bb(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(pa,a.videoSettings),Db(a.onWebcamAsk,a.onWebcamGet,function(k){bb(k,c)}));Tb(function(k){if(!Ub())return!1;Oa=new Kb({ab:k.layers,Ib:"gpuRawAvg",Hb:Vb});F.fb([{id:"s63",name:"_",Aa:"attribute vec2 a0;uniform mat2 u40;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5)+u40*a0;}",ib:["a0"],Oa:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u40"],precision:"lowp"},{id:"s64",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Aa:"attribute vec2 a0;uniform sampler2D u41;uniform mat2 u40;uniform vec2 u42;uniform float u43,u44,u45;varying vec2 vv0;void main(){vec4 a=texture2D(u41,vec2(.17,u43));vec2 f=a.gb,g=a.a*u42,b=a0;b.x*=u45;float c=cos(u44),d=sin(u44);vec2 h=mat2(c,d,-d,c)*b,i=f+h*.5*g,j=i-.5;vv0=vec2(.5)+2.*u40*j,gl_Position=vec4(a0,0.,1.);}",ib:["a0"],Oa:[2],i:"u1 u41 u42 u43 u44 u45 u40".split(" "),precision:"lowp"},{id:"s65",
name:"_",g:"uniform sampler2D u46,u41;uniform vec3 u47,u48;uniform float u49,u50,u43,u51,u44,u52;const vec4 e=vec4(.25);void main(){vec4 d=texture2D(u46,vec2(.625,.625)),f=texture2D(u46,vec2(.875,.625)),a=texture2D(u41,vec2(.17,u43));float g=dot(d-f,e);bool h=g>u50;a.r<-.5?a.r+=1.:h?a.r=2.:a.r>u49?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r=mix(-2.,a.r,u51);if(a.r<.9)a=vec4(1.,u47);else{a.r*=step(1.9,a.r);float i=dot(e,texture2D(u46,vec2(.875,.875))),j=dot(e,texture2D(u46,vec2(.125,.625))),k=dot(e,texture2D(u46,vec2(.375,.625))),b=cos(u44),c=sin(u44);vec2 l=mat2(b,c*u52,-c/u52,b)*vec2(i,j);a.gba+=vec3(l,k)*u48*a.a;}gl_FragColor=a;}",
Aa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",i:"u46 u41 u47 u49 u48 u51 u44 u52 u50 u43".split(" ")},{id:"s66",name:"_",Aa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;uniform float u51;const vec4 e=vec4(.25);const vec3 f=vec3(.5);void main(){float a=dot(e,texture2D(u46,vec2(.125,.875))),b=dot(e,texture2D(u46,vec2(.375,.875))),c=dot(e,texture2D(u46,vec2(.625,.875))),d=dot(e,texture2D(u46,vec2(.625,.625)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d*u51);}",
i:["u46","u51"]},{id:"s67",name:"_",Aa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u46;const vec4 e=vec4(.25);void main(){float a=dot(e,texture2D(u46,vec2(.375,.375))),b=dot(e,texture2D(u46,vec2(.625,.375))),c=dot(e,texture2D(u46,vec2(.875,.375))),d=dot(e,texture2D(u46,vec2(.125,.125)));gl_FragColor=vec4(a,b,c,d);}",i:["u46"]},{id:"s62",name:"_",g:"uniform sampler2D u41;uniform vec2 u53;uniform float u54;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u41,vv0+u53);a.a=mix(a.a*u54,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
i:["u41","u54","u53"]}]);zb();V.buffer=new Uint8Array(8*ea.oe*da.sa());Sa=da.fc({kb:0,x:0,y:0,ca:1,rx:0,ry:0,ya:0,rd:new Float32Array(V.ba),va:0});Ba=da.fc({detected:0,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,expressions:new Float32Array(V.ba)});da.fc({dx:0,dy:0,ec:0,bc:0,cc:0,dc:0});mb();lb();c()});return!0},destroy:function(){Ma.m();return new Promise(function(a){sb.toggle_pause(!0,!0).finally(function(){Oa&&Oa.m();Ha.m();Oa=Ba=Sa=null;jb.splice(0);kb.splice(0);Y.Xa=null;V.za=null;J.D=null;
na=ja.yc;a()}).catch(function(){})})},toggle_videoStream:function(a){return J.zb||!J.element?Promise.resolve():X.te(J.element,a,J.Ra)},toggle_pause:function(a,c){if(!Za())return Promise.reject("NOT_READY");c=c?sb.toggle_videoStream(!a):Promise.resolve();a?wb():c.then(function(){hb()});return c},update_videoSettings:function(a){wb();return new Promise(function(c,d){X.te(J.element,!1,J.Ra).then(function(){Object.assign(pa,a);Db(null,null,function(h){bb(h,function(){Ka();Ja();hb();c()})})}).catch(d)})},
toggle_slow:function(a){Za()&&na===ja.play&&(a&&!S.Bb?(S.Yd=S.ea,ba.nDetectsPerLoop=1,this.set_animateDelay(ea.wg),S.Bb=!0):!a&&S.Bb&&(ba.nDetectsPerLoop=-1,this.set_animateDelay(S.Yd),S.Bb=!1))},set_animateDelay:function(a){S.ea=a;Ma.update({gb:S.ea})},resize:function(){if(!Za())return!1;var a=S.ha.width,c=S.ha.height;if(!nb()&&a===Y.u&&c===Y.M)return!1;Y.u=a;Y.M=c;F.R();mb();lb();Ka();Ja();return!0},set_inputTexture:function(a,c,d){J.G[0]=c;J.G[1]=d;J.D=Z.instance({width:c,height:d,lc:a});J.Ab=
!0;Ka();ib();Ja()},reset_GLState:function(){ib();Y.Xa.remove();V.za.remove();zb()},render_video:function(){va.P();F.set("s63");b.viewport(0,0,Y.u,Y.M);J.D.h(0);Q.l(!0,!0)},reset_inputTexture:function(){J.Ab=!1;J.D=J.Mc;nb();Ka();Ja()},get_videoDevices:function(a){return X.zd(a)},set_scanSettings:function(a){Object.assign(ba,a);-1!==ba.nDetectsPerLoop?qa.Ic(ba.nDetectsPerLoop):qa.Sc();mb();lb()},set_stabilizationSettings:function(a){Object.assign(sa,a)},set_videoOrientation:function(a,c){Za()&&(pa.flipX=
c,pa.rotate=a,Ka(),Ja())},update_videoElement:function(a,c){bb(a?a:J.element,function(){Bb();Ka();Ja();c&&c()})},create_new:function(){return window.JEELIZFACEFILTERGEN()}};return sb};window.JEELIZFACEFILTER=window.JEELIZFACEFILTERGEN();
;return JEELIZFACEFILTER||window.JEELIZFACEFILTER;})();