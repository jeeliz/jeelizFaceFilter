 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

function ra(b,e,f){return b*(1-f)+e*f}function Aa(b,e){var f=new XMLHttpRequest;f.open("GET",b,!0);f.withCredentials=!1;f.onreadystatechange=function(){4!==f.readyState||200!==f.status&&0!==f.status||e(f.responseText)};f.send()}function Ca(b,e,f){return Math.min(Math.max((f-b)/(e-b),0),1)}
function Da(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ea(b,e){var f=e%8;return b[(e-f)/8]>>7-f&1}
function Fa(b){var e=JSON.parse(b);b=e.ne;var f=e.nf,k=e.n;var h="undefined"===typeof btoa?Buffer.from(e.data,"base64").toString("latin1"):atob(e.data);var l=h.length;e=new Uint8Array(l);for(var q=0;q<l;++q)e[q]=h.charCodeAt(q);h=new Float32Array(k);l=new Float32Array(f);q=b+f+1;for(var t=0;t<k;++t){for(var v=q*t,m=0===Ea(e,v)?1:-1,r=v+1,u=1,C=0,z=r+b-1;z>=r;--z)C+=u*Ea(e,z),u*=2;r=C;v=v+1+b;u=l.length;C=0;for(z=v;z<v+u;++z)l[C]=Ea(e,z),++C;for(u=v=0;u<f;++u)v+=l[u]*Math.pow(2,-u-1);h[t]=0===v&&0===
r?0:m*(1+v)*Math.pow(2,1+r-Math.pow(2,b-1))}return h}
var w=function(){function b(g,A){g=a.createShader(g);a.shaderSource(g,A);a.compileShader(g);return a.getShaderParameter(g,a.COMPILE_STATUS)?g:!1}function e(g,A){g=b(a.VERTEX_SHADER,g);A=b(a.FRAGMENT_SHADER,A);var B=a.createProgram();a.attachShader(B,g);a.attachShader(B,A);a.linkProgram(B);return B}function f(g){void 0===g.Z&&(g.Z="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===g.ua&&(g.ua=["a0"]);void 0===g.ga&&(g.ga=
[2]);if(void 0===g.precision||"highp"===g.precision)g.precision=v;g.id=q++;void 0!==g.cd&&g.cd.forEach(function(B,ea){g.b=g.b.replace(B,g.Ha[ea])});g.jb=0;g.ga.forEach(function(B){g.jb+=4*B});g.Ga=e(g.Z,"precision "+g.precision+" float;\n"+g.b);g.j={};g.f.forEach(function(B){g.j[B]=a.getUniformLocation(g.Ga,B)});g.attributes={};g.ha=[];g.ua.forEach(function(B){var ea=a.getAttribLocation(g.Ga,B);g.attributes[B]=ea;g.ha.push(ea)});if(g.g){a.useProgram(g.Ga);l=g;h=g.id;for(var A in g.g)a.uniform1i(g.j[A],
g.g[A])}g.Wd=!0}function k(g){Ga.jd(G);h!==g.id&&(G.ra(),h=g.id,l=g,a.useProgram(g.Ga),g.ha.forEach(function(A){0!==A&&a.enableVertexAttribArray(A)}))}var h=-1,l=!1,q=0,t=!1,v="highp",m=["u1"],r=["u0"],u={u1:0},C={u0:0},z={u1:0,u2:1},P={u3:0},U={s0:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:m,g:u},s1:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:m,g:u,precision:"lowp"},s2:{b:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],g:z},s3:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:m,g:u},s4:{b:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],g:z},s5:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:m,g:u},s6:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:m,g:u},s7:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],g:C},s8:{b:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],g:C},s9:{b:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:m,g:u},s10:{b:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],g:{u1:0,u5:1}},s11:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],g:u},s12:{b:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],g:u},s13:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:r,g:C},s14:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:r,g:C},s15:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:r,g:C},s16:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:r,g:C},s17:{b:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],g:{u0:0,u6:1,u9:2}},s18:{b:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:r,g:C},s19:{b:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:r,g:C},s20:{b:"uniform sampler2D u0,u10;uniform float u11;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,f);float b=u11*u11;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u12","u11"],g:{u0:0,u12:1}},s21:{b:"uniform sampler2D u1;uniform vec2 u13;varying vec2 vv0;void main(){float a=u13.x*u13.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u13.y),g=floor(u13.x*fract(b*u13.y)),f=(g*u13.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u13"],g:u},s22:{b:"uniform sampler2D u14,u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u16,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u14,b),e=texture2D(u15,c);gl_FragColor=d*e;}",f:["u14","u15","u16"],g:{u15:0,u14:1,u16:2}},s23:{b:"uniform float u17;uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec2 a=fract(vv0*u17);vec4 b=texture2D(u14,vv0),c=texture2D(u15,a);gl_FragColor=b*c;}",f:["u15","u14","u17"],g:{u15:0,u14:1}},s24:{b:"uniform float u17;uniform sampler2D u14,u15,u18,u19,u20,u21;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u17,m=floor(i),c=i-m;vec4 n=texture2D(u14,vv0),d=texture2D(u15,c),a=texture2D(u21,vv0);a=a*255.;vec4 o=texture2D(u18,c),p=texture2D(u19,c),q=texture2D(u20,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u14 u15 u17 u21 u18 u19 u20".split(" "),g:{u15:0,u14:1,u21:3,u18:4,u19:5,u20:6}},s25:{b:"uniform sampler2D u14,u15,u22;uniform float u17,u23,u24,u25;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u23*vv0),g=u23*vv0-a;float b=u17/u23;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u23;float l=u23*u25/u17;vec2 m=l*c,i=(m+d*u24)/u25,e=step(i,j);vec4 n=texture2D(u14,h),o=texture2D(u15,i),p=n*o*e.x*e.y,k=texture2D(u22,h);gl_FragColor=p*u24*u24+k;}",f:"u14 u15 u17 u23 u24 u25 u22".split(" "),g:{u15:0,
u14:1,u22:2}},s26:{b:"uniform sampler2D u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u14,vv0),b=texture2D(u15,vv0);gl_FragColor=a*b;}",f:["u14","u15"],g:{u15:0,u14:1}},s27:{b:"uniform sampler2D u1,u22;uniform float u26;varying vec2 vv0;void main(){gl_FragColor=texture2D(u22,vv0)+u26*texture2D(u1,vv0);}",f:["u1","u22","u26"],g:{u1:0,u22:1}},s28:{b:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:m,g:u,precision:"lowp"},s29:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u27"],g:u,precision:"lowp"},s30:{b:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u27"],g:u,precision:"lowp"},s31:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u28"],g:z},s32:{b:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u28,a,b;float c,d,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)a=vec2(f,e),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,i+=d*texture2D(u1,b).r,g+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-i/g)*j;}",f:["u1","u2","u28"],g:z},s33:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],g:P},s34:{b:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],g:P},s35:{b:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],g:u,precision:"lowp"},s36:{b:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],g:u,precision:"lowp"},s37:{b:"uniform sampler2D u1,u29,u30;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u29,vv0),b=texture2D(u30,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u29","u30"],g:{u1:0,u29:1,u30:2}}},Q={s38:{b:"uniform float u17,u31;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u22,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u17,xyTo=floor(vv0*u17+eps2);float weightSize=toSparsity*u17;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u31*(xyPatch-halfFromSparsity))/u17,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u17","u14","u15","u22","u31"],Ha:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{b:"uniform float u17,u31,u25;uniform sampler2D u14,u15,u22;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u22,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u25,xyTo=floor(vv0*u17+eps2);float weightSize=fromSparsity*u25;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u17;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u31*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u25,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u14,uvWeight)*texture2D(u15,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u17 u25 u14 u15 u22 u31".split(" "),Ha:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},G={ab:function(){return t},m:function(){if(!t){v="highp";for(var g in U)f(U[g],g);w.set("s0");a.enableVertexAttribArray(0);g=Ha.m();t=!0;return g}},ec:function(g){g.forEach(function(A){G.mb(A)})},mb:function(g){U[g.id]=g;f(g,g.id)},Cb:function(g,A,B){A||(A=g);U[A]=Object.create(Q[g]);Q[g].Ha&&Q[g].Ha.forEach(function(ea,ta){U[A].b=U[A].b.replace(new RegExp(ea,"g"),B[ta])});f(U[A],A)},set:function(g){k(U[g])},
Bc:function(g){return"undefined"!==typeof U[g]},Gd:function(){return l.Dd},ra:function(){-1!==h&&(h=-1,l.ha.forEach(function(g){0!==g&&a.disableVertexAttribArray(g)}))},hb:function(){var g=0;l.ha.forEach(function(A,B){B=l.ga[B];a.vertexAttribPointer(A,B,a.FLOAT,!1,l.jb,g);g+=4*B})},tb:function(){a.enableVertexAttribArray(0)},pa:function(){a.vertexAttribPointer(l.ha[0],2,a.FLOAT,!1,8,0)},Yb:function(g,A){a.uniform1i(l.j[g],A)},B:function(g,A){a.uniform1f(l.j[g],A)},oa:function(g,A,B){a.uniform2f(l.j[g],
A,B)},ge:function(g,A){a.uniform2fv(l.j[g],A)},he:function(g,A){a.uniform3fv(l.j[g],A)},kd:function(g,A,B,ea){a.uniform3f(l.j[g],A,B,ea)},ie:function(g,A,B,ea,ta){a.uniform4f(l.j[g],A,B,ea,ta)},gb:function(g,A){a.uniform4fv(l.j[g],A)},je:function(g,A){a.uniformMatrix2fv(l.j[g],!1,A)},ke:function(g,A){a.uniformMatrix3fv(l.j[g],!1,A)},le:function(g,A){a.uniformMatrix4fv(l.j[g],!1,A)},J:function(g,A){G.set(g);A.forEach(function(B){switch(B.type){case "4f":a.uniform4fv(l.j[B.name],B.value);break;case "3f":a.uniform3fv(l.j[B.name],
B.value);break;case "2f":a.uniform2fv(l.j[B.name],B.value);break;case "1f":a.uniform1f(l.j[B.name],B.value);break;case "1i":a.uniform1i(l.j[B.name],B.value);break;case "mat2":a.uniformMatrix2fv(l.j[B.name],!1,B.value);break;case "mat3":a.uniformMatrix3fv(l.j[B.name],!1,B.value);break;case "mat4":a.uniformMatrix4fv(l.j[B.name],!1,B.value)}})},Pd:function(){return"lowp"}};return G}(),a=!1,Ja=function(){function b(m){console.log("ERROR in ContextFeedForward: ",m);return!1}function e(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&
!window.MSStream)return!0;if(/(Mac)/i.test(navigator.platform)){var m;(m=navigator.userAgent)?(m=m.match(/Mac OS X (\d+)_(\d+)/)||m.match(/Mac OS X (\d+).(\d+)/),m=!m||3>m.length?!1:[parseInt(m[1],10),parseInt(m[2],10)]):m=!1;if(m&&10===m[0]&&15===m[1])return!0}return!1}var f=!1,k=!1,h=!1,l=!1,q=!0,t=!1,v={A:function(){return f.width},M:function(){return f.height},Hd:function(){return f},Fd:function(){return a},u:function(){return q},flush:function(){a.flush()},Hc:function(){t||(t=new Uint8Array(f.width*
f.height*4));a.readPixels(0,0,f.width,f.height,a.RGBA,a.UNSIGNED_BYTE,t);return t},Jd:function(){return f.toDataURL("image/jpeg")},Kd:function(){I.K();k||(k=document.createElement("canvas"),h=k.getContext("2d"));k.width=f.width;k.height=f.height;for(var m=v.Hc(),r=h.createImageData(k.width,k.height),u=k.width,C=k.height,z=r.data,P=0;P<C;++P)for(var U=C-P-1,Q=0;Q<u;++Q){var G=4*(P*u+Q),g=4*(U*u+Q);z[G]=m[g];z[G+1]=m[g+1];z[G+2]=m[g+2];z[G+3]=m[g+3]}h.putImageData(r,0,0);return k.toDataURL("image/png")},
Id:function(m){!k&&m&&(k=document.createElement("canvas"),h=k.getContext("2d"));var r=m?k:document.createElement("canvas");r.width=f.width;r.height=f.height;(m?h:r.getContext("2d")).drawImage(f,0,0);return r},m:function(m){m.uc&&!m.Na?f=document.getElementById(m.uc):m.Na&&(f=m.Na);f||(f=document.createElement("canvas"));f.width=m&&void 0!==m.width?m.width:512;f.height=m&&void 0!==m.height?m.height:512;"undefined"===typeof m&&(m={});void 0===m.premultipliedAlpha&&(m.premultipliedAlpha=!1);void 0===
m.Fb&&(m.Fb=!0);void 0===m.antialias&&(m.antialias=!1);var r={antialias:m.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:m.premultipliedAlpha,stencil:!1,depth:m.Fb};e()||(a=f.getContext("webgl2",r));a?q=!0:((a=f.getContext("webgl",r))||(a=f.getContext("experimental-webgl",r)),q=!1);if(!a)return b("WebGL is not enabled");(l=a.getExtension("WEBGL_lose_context"))&&f.addEventListener("webglcontextlost",m.Wc,!1);if(!Ia.m())return b("Not enough capabilities");if(!Ia.pc()&&q)return b("Your configuration cannot process color buffer float");
a.clearColor(0,0,0,0);a.disable(a.DEPTH_TEST);a.disable(a.BLEND);a.disable(a.DITHER);a.disable(a.STENCIL_TEST);a.disable(a.SCISSOR_TEST);a.GENERATE_MIPMAP_HINT&&a.hint(a.GENERATE_MIPMAP_HINT,a.FASTEST);a.disable(a.SAMPLE_ALPHA_TO_COVERAGE);a.disable(a.SAMPLE_COVERAGE);return!0},Mc:function(){if(!w.m())return!1;a.depthFunc(a.LEQUAL);a.clearDepth(1);return!0}};return v}(),Ga=function(){var b="undefined"===typeof w?null:w;return{jd:function(e){b!==e&&(b&&b.ra(),b=e)},ab:function(){return b.ab()},pa:function(){b.pa()},
hb:function(){b.hb()},ra:function(){b.ra()},set:function(e){b.set(e)}}}(),R=function(){var b=null,e=null,f=0,k=-2,h=-2,l=!1,q={reset:function(){h=k=-2},m:function(){l||(b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),a.STATIC_DRAW),e=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),a.STATIC_DRAW),q.ia(),l=!0)},a:function(t){var v=f++,m=t.W?t.W.length:0,r="undefined"===
typeof t.mode?a.STATIC_DRAW:t.mode,u=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,u);a.bufferData(a.ARRAY_BUFFER,t.ac instanceof Float32Array?t.ac:new Float32Array(t.ac),r);k=v;if(t.W){var C=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,C);if(65536>t.W.length){var z=Uint16Array;var P=a.UNSIGNED_SHORT;var U=2}else z=Uint32Array,P=a.UNSIGNED_INT,U=4;a.bufferData(a.ELEMENT_ARRAY_BUFFER,t.W instanceof z?t.W:new z(t.W),r);h=v}var Q={oc:function(G){k!==v&&(a.bindBuffer(a.ARRAY_BUFFER,u),k=v);G&&
Ga.hb()},lc:function(){h!==v&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,C),h=v)},bind:function(G){Q.oc(G);Q.lc()},Bd:function(){a.drawElements(a.TRIANGLES,m,P,0)},Cd:function(G,g){a.drawElements(a.TRIANGLES,G,P,g*U)},remove:function(){a.deleteBuffer(u);t.W&&a.deleteBuffer(C);Q=null}};return Q},ia:function(){-1!==k&&(a.bindBuffer(a.ARRAY_BUFFER,b),k=-1);-1!==h&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e),h=-1)},h:function(t,v){t&&R.ia();v&&Ga.pa();a.drawElements(a.TRIANGLES,3,a.UNSIGNED_SHORT,0)},Fc:function(){a.deleteBuffer(b);
a.deleteBuffer(e)}};return q}(),I=function(){var b=null,e=null,f=null,k=!1,h={w:-2,Dc:1};return{m:function(){if(!k){b=a.createFramebuffer();var l=Ia.u();e=l&&a.DRAW_FRAMEBUFFER?a.DRAW_FRAMEBUFFER:a.FRAMEBUFFER;f=l&&a.READ_FRAMEBUFFER?a.READ_FRAMEBUFFER:a.FRAMEBUFFER;k=!0}},Md:function(){return e},Wa:function(){return f},ba:function(){return a.FRAMEBUFFER},Qd:function(){return h},Ed:function(){return b},a:function(l){void 0===l.Eb&&(l.Eb=!1);var q=l.Y?l.Y:!1,t=l.width,v=void 0!==l.height?l.height:
l.width,m=b,r=!1,u=!1,C=0;q&&(t=t?t:q.A(),v=v?v:q.M());var z={Xb:function(){u||(m=a.createFramebuffer(),u=!0,C=h.Dc++)},dc:function(){z.Xb();z.l();r=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,r);a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,t,v);a.framebufferRenderbuffer(e,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,r);a.clearDepth(1)},bind:function(P,U){C!==h.w&&(a.bindFramebuffer(e,m),h.w=C);q&&q.l();U&&a.viewport(0,0,t,v);P&&a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},ud:function(){C!==
h.w&&(a.bindFramebuffer(e,m),h.w=C)},clear:function(){a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)},xd:function(){a.clear(a.COLOR_BUFFER_BIT)},yd:function(){a.clear(a.DEPTH_BUFFER_BIT)},ld:function(){a.viewport(0,0,t,v)},l:function(){C!==h.w&&(a.bindFramebuffer(e,m),h.w=C)},rtt:function(P){q=P;h.w!==C&&(a.bindFramebuffer(a.FRAMEBUFFER,m),h.w=C);P.l()},K:function(){a.bindFramebuffer(e,null);h.w=-1},resize:function(P,U){t=P;v=U;r&&(a.bindRenderbuffer(a.RENDERBUFFER,r),a.renderbufferStorage(a.RENDERBUFFER,
a.DEPTH_COMPONENT16,t,v))},remove:function(){a.bindFramebuffer(e,m);a.framebufferTexture2D(e,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0);r&&a.framebufferRenderbuffer(e,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,null);a.bindFramebuffer(e,null);a.deleteFramebuffer(m);r&&a.deleteRenderbuffer(r);z=null}};l.Eb&&z.dc();return z},K:function(){a.bindFramebuffer(e,null);h.w=-1},pd:function(){a.bindFramebuffer(e,null);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);a.viewport(0,0,Ia.A(),Ia.M());h.w=-1},reset:function(){h.w=
-2},U:function(){0!==h.w&&(a.bindFramebuffer(e,b),h.w=0)},clear:function(){a.viewport(0,0,Ia.A(),Ia.M());a.clear(a.COLOR_BUFFER_BIT)}}}(),Z=function(){function b(c){a.bindTexture(a.TEXTURE_2D,c)}function e(c){ea[0]=c;c=ta[0];var F=c>>16&32768,S=c>>12&2047,J=c>>23&255;return 103>J?F:142<J?F|31744|((255==J?0:1)&&c&8388607):113>J?(S|=2048,F|(S>>114-J)+(S>>113-J&1)):F=(F|J-112<<10|S>>1)+(S&1)}function f(c){var F=new Uint16Array(c.length);c.forEach(function(S,J){F[J]=e(S)});return F}function k(){if(null!==
la.Ya)return la.Ya;var c=l(f([1,1,1,1]));return null===c?!0:la.Ya=c}function h(){if(null!==la.Za)return la.Za;var c=l(new Uint8Array([255,255,255,255]));return null===c?!0:la.Za=c}function l(c){if(!Ga.ab()||!P)return null;var F=null;try{var S=a.getError();F=ca.a({isFloat:!1,G:!0,array:c,width:1});S=a.getError();if(S!==a.NO_ERROR)return!1}catch(J){return!1}I.K();a.viewport(0,0,1,1);a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);Ga.set("s0");F.ob(0);R.h(!1,!0);c=new Uint8Array(4);a.readPixels(0,
0,1,1,a.RGBA,a.UNSIGNED_BYTE,c);c=.9<c[0];F.remove();I.U();return c}var q=0,t=null,v=0,m=null,r=!1,u=null,C=null,z=null,P=!1,U=!1,Q=null,G=null,g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],A=!1,B=!1,ea=new Float32Array(1),ta=new Int32Array(ea.buffer),la={Ya:null,Za:null},ca={m:function(){if(!P){C=[a.RGB,!1,a.RGB,a.RGBA];z=[a.RGB,!1,a.RGB,a.RGBA];t=[a.TEXTURE0,a.TEXTURE1,a.TEXTURE2,a.TEXTURE3,a.TEXTURE4,a.TEXTURE5,a.TEXTURE6,a.TEXTURE7];A="undefined"!==typeof JEContext;B="undefined"!==typeof Ia;A&&
JEContext.be()&&t.push(a.TEXTURE8,a.TEXTURE9);m=[-1,-1,-1,-1,-1,-1,-1,-1];u=[a.UNSIGNED_BYTE,a.FLOAT,a.FLOAT];if(!r){for(var c=new Float32Array(16384),F=0;16384>F;++F)c[F]=2*Math.random()-1;r={random:ca.a({isFloat:!0,isPot:!0,array:c,width:64}),$b:ca.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}P=!0}},Lc:function(){ca.qd()},Ud:function(){return r.$b},qd:function(){u[1]=Ia.ya()},ed:function(){z=C=[a.RGBA,a.RGBA,a.RGBA,a.RGBA]},ce:function(c,F){w.set("s1");I.K();var S=c.A(),J=c.M();
a.viewport(0,0,S,J);c.c(0);R.h(!1,!1);a.readPixels(0,0,S,J,a.RGBA,a.UNSIGNED_BYTE,F)},Ec:function(c,F,S){a.activeTexture(a.TEXTURE0);q=0;var J=a.createTexture();b(J);var ma=Ia.u()&&a.RGBA32F?a.RGBA32F:a.FLOAT;F=F instanceof Float32Array?F:new Float32Array(F);var ja=Math.log2(F.length);ja!==Math.floor(ja)&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MIN_FILTER,a.NEAREST);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,S);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,c.A(),c.M(),0,a.RGBA,ma,F);b(null);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);I.U();w.set("s0");c.I();a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT);b(J);R.h(!0,!1);a.deleteTexture(J)},a:function(c){function F(){b(D);ua&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ua);c.isPot?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,c.Ib?a.MIRRORED_REPEAT:a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,
c.X?a.MIRRORED_REPEAT:a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));c.Aa&&"undefined"!==typeof JESETTINGS&&a.texParameterf(a.TEXTURE_2D,JEContext.Ld().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.sd);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,c.isLinear?a.LINEAR:a.NEAREST);c.isLinear?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,c.isMipmap&&!V?a.NEAREST_MIPMAP_LINEAR:a.LINEAR):a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MIN_FILTER,c.isMipmap&&!V?a.NEAREST_MIPMAP_NEAREST:a.NEAREST);M=C[c.ma-1];ha=z[c.ma-1];aa=u[S];if(Ia.u()){var p=a.RGBA32F;M===a.RGBA&&aa===a.FLOAT&&p&&(ha=p);M===a.RGB&&aa===a.FLOAT&&p&&(ha=p,M=a.RGBA)}if(c.G&&!c.isFloat||c.isFloat&&c.isMipmap&&Ha.Pc())(p=a.RGBA16F)&&(ha=p),aa=Ia.ya();c.Mb&&"undefined"!==typeof a.texStorage2D&&(Ba=c.Mb);c.Kb&&4===c.ma&&(M=JEContext.Sd());if(c.D)a.texImage2D(a.TEXTURE_2D,0,ha,M,aa,c.D);else if(c.url)a.texImage2D(a.TEXTURE_2D,0,ha,M,aa,ka);else if(ia){try{a.getError(),
a.texImage2D(a.TEXTURE_2D,0,ha,N,H,0,M,aa,ia),a.getError()!==a.NO_ERROR&&(a.texImage2D(a.TEXTURE_2D,0,ha,N,H,0,M,aa,null),a.getError()!==a.NO_ERROR&&a.texImage2D(a.TEXTURE_2D,0,a.RGBA,N,H,0,a.RGBA,a.UNSIGNED_BYTE,null))}catch(y){a.texImage2D(a.TEXTURE_2D,0,ha,N,H,0,M,aa,null)}c.isKeepArray||(ia=null)}else a.texImage2D(a.TEXTURE_2D,0,ha,N,H,0,M,aa,null);if(c.isMipmap)if(!V&&X)X.Va(),sa=!0;else if(V){p=Math.log(Math.min(N,H))/Math.log(2);na=Array(1+p);na[0]=D;for(var O=1;O<=p;++O){var oa=Math.pow(2,
O),d=N/oa;oa=H/oa;var n=a.createTexture();b(n);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,ha,d,oa,0,M,aa,null);b(null);na[O]=n}sa=!0}b(null);m[q]=-1;ua&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);za=!0;fa&&X&&(fa(X),fa=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.G&&(c.G=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===typeof c.isLinear&&(c.isLinear=!1);
"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.Ma&&(c.Ma=!1);void 0===c.Aa&&(c.Aa=!1);void 0===c.X&&(c.X=!1);void 0===c.Ib&&(c.Ib=!1);void 0===c.Kb&&(c.Kb=!1);void 0===c.ma&&(c.ma=4);void 0===c.Gb&&(c.Gb=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?Fa(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=!1);var S=0,J=c.D?!0:!1,ma=
null,ja=null,ba=!1,va=null;c.isFloat&&(c.G=!0);c.G&&(S=1);c.Gb||Ia.u()||!c.isFloat||!B||Ia.qb()||(c.isFloat=!1);c.isFloat&&(S=2);c.Aa&&A&&!JEContext.Xd()&&(c.Aa=!1);var D=a.createTexture(),fa=c.Ma,ka=null,ia=!1,N=0,H=0,za=!1,K=v++,pa=!1,Y=null,da=null,x=null,L=null,ha=null,M=null,aa=null,ua=c.isFlipY,V=c.G&&c.isMipmap&&"undefined"!==typeof Ha&&!Ha.rc()?!0:!1,na=null,Ba=-1,sa=!1,wa={Jb:!1,pb:null,wb:null};"undefined"!==typeof c.width&&c.width&&(N=c.width,H="undefined"!==typeof c.height&&c.height?c.height:
N);var X={get:function(){return D},A:function(){return N},M:function(){return H},Vd:function(){return c.url},Yd:function(){return c.isFloat},$d:function(){return c.G},ae:function(){return c.isLinear},Va:function(){a.generateMipmap(a.TEXTURE_2D)},nc:function(p,O){V?(p||(p=X.zb()),X.Ka(O),b(na[p]),m[O]=-1):X.c(O)},zb:function(){-1===Ba&&(Ba=Math.log(N)/Math.log(2));return Ba},Gc:function(p){if(V){p||(p=X.zb());w.set("s11");X.Ka(0);for(var O=N,oa=H,d=1;d<=p;++d)O/=2,oa/=2,w.oa("u7",.25/O,.25/oa),a.viewport(0,
0,O,oa),b(na[d-1]),a.framebufferTexture2D(I.ba(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,na[d],0),R.h(!1,1===d);m[0]=-1}else X.Va()},Ka:function(p){p!==q&&(a.activeTexture(t[p]),q=p)},c:function(p){if(!za)return!1;X.Ka(p);if(m[p]===K)return!1;b(D);m[p]=K;return!0},ob:function(p){a.activeTexture(t[p]);q=p;b(D);m[p]=K},l:function(){a.framebufferTexture2D(I.ba(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,D,0)},I:function(){a.viewport(0,0,N,H);a.framebufferTexture2D(I.ba(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,D,0)},qe:function(){a.framebufferTexture2D(I.ba(),
a.COLOR_ATTACHMENT0,a.TEXTURE_2D,null,0)},resize:function(p,O){N=p;H=O;F()},clone:function(p){p=ca.a({width:N,height:H,G:c.G,isFloat:c.isFloat,isLinear:c.isLinear,X:c.X,isFlipY:p?!ua:ua,isPot:c.isPot});Ga.set("s0");I.U();p.l();a.viewport(0,0,N,H);X.c(0);R.h(!0,!0);return p},ld:function(){a.viewport(0,0,N,H)},remove:function(){a.deleteTexture(D);X=null},refresh:function(){X.ob(0);ua&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!0);J?a.texImage2D(a.TEXTURE_2D,0,ha,M,a.UNSIGNED_BYTE,c.D):a.texImage2D(a.TEXTURE_2D,
0,ha,N,H,0,M,aa,ia);ua&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},rb:function(){var p=N*H*4;da=[new Uint8Array(p),new Uint8Array(p),new Uint8Array(p),new Uint8Array(p)];Y=[new Float32Array(da[0].buffer),new Float32Array(da[1].buffer),new Float32Array(da[2].buffer),new Float32Array(da[3].buffer)];x=new Uint8Array(4*p);L=new Float32Array(x.buffer);pa=!0},Wb:function(){pa||X.rb();a.readPixels(0,0,N,4*H,a.RGBA,a.UNSIGNED_BYTE,x);for(var p=N*H,O=2*p,oa=3*p,d=0;d<p;++d)Y[0][d]=L[d],Y[1][d]=L[d+p],Y[2][d]=
L[d+O],Y[3][d]=L[d+oa];return Y},ad:function(){wa.Jb||(wa.pb=new Uint8Array(N*H*4),wa.wb=new Float32Array(wa.buffer),wa.Jb=!0);a.readPixels(0,0,N,H,a.RGBA,a.UNSIGNED_BYTE,wa.pb);return wa.wb},sb:function(p){I.K();w.set("s12");X.c(0);if(p)a.viewport(0,0,N,H),w.gb("u8",.25,.25,.25,.25),R.h(!1,!0);else for(p=0;4>p;++p)a.viewport(0,H*p,N,H),w.gb("u8",g[p]),R.h(!1,0===p)},re:function(p){var O=aa===u[0]&&!h();b(D);ua&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,ua);O?(ba||(ma=document.createElement("canvas"),ma.width=
N,ma.height=H,ja=ma.getContext("2d"),va=ja.createImageData(N,H),ba=!0),va.data.set(p),ja.putImageData(va,0,0),a.texImage2D(a.TEXTURE_2D,0,ha,M,aa,ma)):a.texImage2D(a.TEXTURE_2D,0,ha,N,H,0,M,aa,p);m[q]=K;ua&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},se:function(p,O){b(D);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,O);a.texImage2D(a.TEXTURE_2D,0,ha,M,aa,p);m[q]=K;O&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1)},ee:function(p,O){var oa=N*H,d=4*oa;p=c.G?p?"RGBE":"JSON":"RGBA";O&&(p=O);O=Ia.u()&&!1;var n=null;switch(p){case "RGBE":n=
"s40";break;case "JSON":n=O?"s0":"s12";break;case "RGBA":case "RGBAARRAY":n="s6"}pa||("RGBA"===p||"RGBE"===p||"RGBAARRAY"===p?(da=new Uint8Array(d),pa=!0):"JSON"!==p||O||X.rb());I.K();w.set(n);X.c(0);d=null;if("RGBA"===p||"RGBE"===p||"RGBAARRAY"===p){a.viewport(0,0,N,H);R.h(!0,!0);a.readPixels(0,0,N,H,a.RGBA,a.UNSIGNED_BYTE,da);if("RGBAARRAY"===p)return{data:da};U||(Q=document.createElement("canvas"),G=Q.getContext("2d"),U=!0);Q.width=N;Q.height=H;oa=G.createImageData(N,H);oa.data.set(da);G.putImageData(oa,
0,0);d=Q.toDataURL("image/png")}else if("JSON"===p)if(O)d=new Float32Array(oa),a.viewport(0,0,N,H),R.h(!0,!0),a.readPixels(0,0,N,H,a.RGBA,a.FLOAT,d);else{for(d=0;4>d;++d)a.viewport(0,H*d,N,H),w.gb("u8",g[d]),R.h(!d,!d);X.Wb();d=Array(oa);for(O=0;O<oa;++O)d[4*O]=Y[0][O],d[4*O+1]=Y[1][O],d[4*O+2]=Y[2][O],d[4*O+3]=Y[3][O]}return{format:p,data:d,width:N,height:H,isMirrorY:c.X,isFlipY:"RGBA"===p?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!V&&za&&!sa&&(X.Va(),sa=!0);if(c.url)b(D),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,
1,1,0,a.RGBA,a.UNSIGNED_BYTE,null),ka=new Image,ka.Ad="Anonymous",ka.crossOrigin="Anonymous",ka.src=c.url,ka.onload=function(){N=ka.width;H=ka.height;F()};else if(c.D){var E=function(){N=void 0!==c.D.videoWidth?c.D.videoWidth:c.D.width;H=void 0!==c.D.videoHeight?c.D.videoHeight:c.D.height;N?F():setTimeout(E,1)};E()}else c.array?(c.G&&!c.isFloat?c.array instanceof Uint16Array?(ia=c.array,F()):k()?(ia=f(c.array),F()):(F(),ca.Ec(X,c.array,ua)):(ia=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):
c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),F()),c.isKeepArray||(ia&&ia!==c.array&&(ia=null),delete c.array)):F();X.Rd=X.A;fa&&za&&(fa(X),fa=!1);return X},K:function(c){c!==q&&(a.activeTexture(t[c]),q=c);m[c]=-1;b(null)},vd:function(c){r.random.c(c)},reset:function(){for(var c=0;c<t.length;++c)m[c]=-1;q=-1},de:function(){q=-1},oe:function(){for(var c=0;c<t.length;++c)ca.K(c)},Fc:function(){r&&(r.random.remove(),r.$b.remove())},pe:function(c,F){if("RGBA"===c.format||"RGBE"===c.format){var S=
new Image;S.src=c.data;S.onload=function(){ca.a({X:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,D:S,Ma:function(J){if("RGBA"===c.format)F(J);else{var ma=c.width,ja=c.height,ba=ca.a({X:c.isMirrorY,isFloat:!0,width:ma,height:ja,isFlipY:c.isFlipY});I.U();a.viewport(0,0,ma,ja);w.set("s41");ba.l();J.c(0);R.h(!0,!0);ca.K(0);F(ba);a.flush();setTimeout(J.remove,50)}}})}}else"JSON"===c.format?F(ca.a({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):F(!1)}};return ca}(),
Ka={a:function(b){var e=[Z.a(b),Z.a(b)],f=[e[1],e[0]],k=f,h={hd:function(l){k[1].l();k[0].c(l);h.Zb()},fe:function(l){k[1].I();k[0].c(l);h.Zb()},Zb:function(){k=k===e?f:e},refresh:function(){k[0].refresh();k[1].refresh()},c:function(l){k[0].c(l)},Nd:function(){return k[0]}};return h}},Ia=function(){function b(){e="undefined"===typeof Ja?JEContext:Ja;f=!0}var e=null,f=!1,k=!1,h=!1,l=!1,q=!1,t=!1,v=!1,m=!1,r=!1,u=!1,C=!1,z=!0,P=!0,U=!0,Q=null,G="undefined"===typeof window?{}:window,g={m:function(){if(f)return!0;
b();g.ub();g.Ua();g.zc();g.Ac();I.m();Z.m();if(!g.vc())return!1;R.m();Z.Lc();return!0},A:function(){f||b();return e.A()},M:function(){f||b();return e.M()},u:function(){f||b();return e.u()},zc:function(){C=(u=a.getExtension("EXT_color_buffer_float")||a.getExtension("WEBGL_color_buffer_float")||a.getExtension("OES_color_buffer_float"))?!0:!1;G.GL_EXT_COLORBUFFERFLOAT=u},Ac:function(){a.getExtension("EXT_color_buffer_half_float")||a.getExtension("WEBGL_color_buffer_half_float")||a.getExtension("OES_color_buffer_half_float")},
ub:function(){if(!k){this.u()||(h=a.getExtension("OES_texture_float")||a.getExtension("MOZ_OES_texture_float")||a.getExtension("WEBKIT_OES_texture_float"),q=(G.GL_EXT_FLOAT=h)?!0:!1);if(q||this.u())l=a.getExtension("OES_texture_float_linear")||a.getExtension("MOZ_OES_texture_float_linear")||a.getExtension("WEBKIT_OES_texture_float_linear"),G.GL_EXT_FLOATLINEAR=l;k=!0}},Ua:function(){if(!r){if(!this.u()){if(t=a.getExtension("OES_texture_half_float")||a.getExtension("MOZ_OES_texture_half_float")||a.getExtension("WEBKIT_OES_texture_half_float"))Q=
t.HALF_FLOAT_OES,v=!0;!Q&&a.HALF_FLOAT&&(Q=a.HALF_FLOAT);!Q&&a.FLOAT&&(Q=a.FLOAT);G.GL_EXT_HALFFLOAT=t}if(v||this.u())m=a.getExtension("OES_texture_half_float_linear")||a.getExtension("MOZ_OES_texture_half_float_linear")||a.getExtension("WEBKIT_OES_texture_half_float_linear"),G.GL_EXT_HALFFLOATLINEAR=m;r=!0}},ya:function(){if(g.u())return a.HALF_FLOAT;g.Ua();return v?Q:a.FLOAT},qb:function(){return z},qc:function(){return P},wd:function(){return U},pc:function(){return C},xc:function(){P=z=!0;var A=
a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,A);var B=a.createTexture();a.bindTexture(a.TEXTURE_2D,B);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,g.u()&&a.RGBA32F?a.RGBA32F:a.RGBA,1,1,0,a.RGBA,a.FLOAT,null);a.framebufferTexture2D(I.ba(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,B,0);var ea=a.checkFramebufferStatus(I.Wa());ea!==a.FRAMEBUFFER_COMPLETE&&(z=!1);a.texImage2D(a.TEXTURE_2D,0,g.u()&&
a.RGBA16F?a.RGBA16F:a.RGBA,1,1,0,a.RGBA,g.ya(),null);a.framebufferTexture2D(I.ba(),a.COLOR_ATTACHMENT0,a.TEXTURE_2D,B,0);ea=a.checkFramebufferStatus(I.Wa());ea!==a.FRAMEBUFFER_COMPLETE&&(P=!1);a.bindTexture(a.TEXTURE_2D,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.deleteTexture(B);a.deleteFramebuffer(A)},wc:function(){var A=I.a({width:1});A.Xb();var B=Z.a({width:1,isFloat:!0,ma:3});A.l();B.l();a.flush();a.checkFramebufferStatus(I.Wa())!==a.FRAMEBUFFER_COMPLETE?(Z.ed(),U=!1):U=!0;A.remove();B.remove()},
vc:function(){g.xc();if(!z&&!P)return!1;g.wc();return!0}};return g}(),Ha=function(){function b(z,P,U,Q){a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,Q?a.NEAREST_MIPMAP_NEAREST:a.LINEAR);var G=null;try{if(G=a.getError(),G!==a.NO_ERROR&&console.log("GLERR in test_mipmapping() :",G),a.texImage2D(a.TEXTURE_2D,0,z,2,2,0,a.RGBA,P,U),G=a.getError(),G!==a.NO_ERROR)return!1}catch(g){return!1}Q&&a.generateMipmap(a.TEXTURE_2D);R.ia();R.h(!1,!0);a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,q);G=a.getError();
G===a.INVALID_OPERATION&&"undefined"!==typeof a.PIXEL_PACK_BUFFER&&(a.bindBuffer(a.PIXEL_PACK_BUFFER,null),a.readPixels(0,0,1,1,a.RGBA,a.UNSIGNED_BYTE,q),G=a.getError());return G!==a.NO_ERROR?!1:0!==q[0]}function e(z){return Ia.qb()&&b(r,a.FLOAT,new Float32Array(v),z)?(l=h.lb,!0):!1}function f(z){return Ia.qc()?b(u,Ia.ya(),new Uint16Array(v),z)||b(u,a.FLOAT,new Float32Array(v),z)?(l=h.Ja,!0):!1:!1}var k=!1,h={lb:3,Ja:2,RGBA8:0},l=h.RGBA8,q=new Uint8Array(4),t=[.8,1,.8,1],v=t.concat(t,t,t),m=!0,r=
null,u=null,C={m:function(){Ia.ub();Ia.Ua();u=r=a.RGBA;if(Ja.u()){var z=a.RGBA32F;z&&(r=z);(z=a.RGBA16F)&&(u=z)}R.m();I.reset();I.K();a.viewport(0,0,1,1);w.set("s0");k=!0;z=a.createTexture();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,z);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);if(f(!0)||e(!0))return!0;m=!1;if(f(!1)||e(!1))return!0;if(Ja.u()){u=r=a.RGBA;if(f(!0)||
e(!0))return!0;m=!1;if(f(!1)||e(!1))return!0}return!1},rc:function(){return m},Od:function(){return l},Zd:function(){k||C.m();return l===h.lb},Pc:function(){k||C.m();return l===h.Ja}};return C}(),La={a:function(b){var e=Z.a(b.alpha),f=Z.a(b.beta);return{yc:function(){e.c(1);f.c(2)}}}},Na={a:function(b){var e=null,f=!1,k=!1,h=!1,l=!1,q=null,t="undefined"===typeof b.preprocessing?!1:b.preprocessing,v="undefined"===typeof b.preprocessingSize?b.size:b.preprocessingSize;b.mask&&(f=!0,SETTINGS&&void 0!==
SETTINGS.kc&&(b.mask=SETTINGS.kc+b.mask),e=Z.a({isFloat:!1,url:b.mask}));var m=!1;b.customInputShader&&(m="s42",w.mb({name:"_",id:m,b:b.customInputShader,f:["uSource"],precision:"lowp"}),w.J(m,[{type:"1i",name:"_",value:0}]));switch(t){case "sobel":q="s31";h=!0;break;case "meanNormalization":q="s32";h=!0;break;case "grayScale":q="s28";h=!1;break;case "grayScaleTilt":q="s29";l=!0;h=!1;break;case "rgbGrayTilt":q="s30";l=!0;h=!1;break;case "copy":q=m?m:"s0";break;case "inputLightRegulation":q=m?m:"s28";
Ma.m({Db:v,Ub:b.size,Ob:b.nBlurPass,Oc:!1});k=!0;break;case "direct":case "none":q=!1;break;default:q="s3"}l&&w.J(q,[{name:"u27",type:"1f",value:b.tilt}]);f&&(q+="Mask");var r=Z.a({isFloat:!1,isPot:!1,width:b.size}),u={A:function(){return v},Xa:function(){return u.A()},Jc:function(){return k?Ma.Ab():r},H:function(){I.U();q&&(w.set(q),h&&w.B("u28",1/b.size),r.I(),f&&e.c(1),R.h(!1,!1),r.c(0),k&&Ma.Yc(r))}};return u}},Ta={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=!1);
var e=null,f=null,k=null,h=null,l=null,q=null,t=null,v=null,m=[],r=[],u=!1,C=null,z=!0,P=-1,U=b.isReorganize?b.isReorganize:!1,Q=b.kernelsNumber?!0:!1,G=b.dynPelu?La.a(b.dynPelu):!1,g=G?!0:!1,A={isEnabled:!1};b.Nc?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.Ea.Xa(),z=!1):"full"===b.connectivityUp&&(b.sparsity=b.Ea.Xa());var B={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[b.activation],ea=b.sparsity*b.sparsity,ta=!1,la=b.size,ca="";
if(b.maxPooling){switch(b.maxPooling.size){case 2:ca="s33";break;case 4:ca="s34"}ta=!0;la/=b.maxPooling.size;q=Z.a({isFloat:!0,isPot:!1,width:la})}var c=void 0!==b.Vc&&b.Vc?!0:!1,F=null,S=null,J=null;if(c){F="s43"+b.index.toString();w.Cb("s43",F,[((b.normalization.n-1)/2).toFixed(1)]);w.J(F,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u32",value:b.normalization.k}]);
var ma={isFloat:!0,isPot:!0,width:b.size};S=Z.a(ma);J=Z.a(ma)}var ja=-1,ba=null;z&&(h=Z.a({isFloat:!0,isPot:!1,width:b.size}));f=Z.a(b.bias);var va={A:function(){return b.size},Xa:function(){return la},xb:function(){return b.classesCount},mc:function(D){v.c(D)},Zc:function(){b.remap&&b.remap.isEnabled&&(A={isEnabled:!0,Rc:Z.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(D){return b.parent.Ic(D)}),
depth:b.remap.depth})},gd:function(){switch(b.connectivityUp){case "direct":ba=Oa.a(b.connectivity);break;case "square":ba=Pa.a(b.connectivity);break;case "squareFast":ba=Qa.a(b.connectivity,b.activation);break;case "full":ba=Ra.a(b.connectivity);break;case "conv":P=b.kernelsNumber,ba=Sa.a(b.connectivity),U&&(l=Z.a({width:la,isFloat:!0,isFlipY:!1,isPot:!1}))}if(ba.da){var D=b.size*b.sparsity;ja=Math.log(D/b.size)/Math.log(2);e=Z.a({isMipmap:!0,isFloat:!0,isPot:!0,width:D,Mb:ja});k=Z.a({isFloat:!0,
isPot:!0,width:b.size})}},H:function(D){v=D;ba.da?(e.I(),Q&&f.c(2),ba.H(A),e.c(0),e.Gc(ja),k.I(),Q?w.set("s0"):(w.set("s27"),w.B("u26",ea),f.c(1)),e.nc(ja,0),R.h(!1,!1),w.set(B),c?S.l():h.l(),k.c(0),g&&G.yc(),R.h(!1,!1)):(h.I(),f.c(1),ba.H());c&&(w.set(F),J.l(),S.c(0),R.h(!1,!1),w.set("s44"),w.B("u6",1),h.l(),J.c(1),R.h(!1,!1));if(z)return ta?(q.I(),h.c(0),w.set(ca),w.oa("u7",1/b.size,1/b.size),R.h(!1,!1),D=q):D=h,D.c(0),U&&(l.l(),w.set("s21"),w.oa("u13",P,la/P),R.h(!1,!1),D=l,l.c(0)),D;D=h;b.disableNormalize||
(w.set("gpuRawAvg"===u?"s8":"s7"),w.B("u4",1/b.size),t.I(),h.c(0),R.h(!1,!1),D=t);switch(u){case "cpuRGBA2Float":D.sb(!1);D=va.$c(D);C(D);break;case "cpuMeanFloat":D.sb(!0);D=D.ad();C(D);break;case "gpuRawAvg":case "gpuRaw":D.c(0);case "none":C(D)}return!1},tc:function(D){D&&"undefined"!==typeof D.Tb&&(u=D.Tb,C=D.Xc);h=Z.a({isFloat:!0,isPot:!0,isMipmap:!1,width:b.size});D="undefined"!==typeof b.classesCount&&b.classesCount?b.classesCount:b.size*b.size;for(var fa=0,ka=0,ia=0;fa<D;++fa)m.push(ka+(b.size-
1-ia)*b.size),r.push([-1,-1,-1,-1]),++ka,ka===b.size&&(ka=0,++ia);b.disableNormalize||(t=Z.a({isFloat:!0,isPot:!0,width:b.size}))},$c:function(D){var fa=D.Wb();m.forEach(function(ka,ia){r[ia][0]=fa[0][ka];r[ia][1]=fa[1][ka];r[ia][2]=fa[2][ka];r[ia][3]=fa[3][ka]});return r}};b.Ea&&va.gd(b.Ea);return va}};
function Ua(){var b=null,e=null,f=null,k=0;this.Ic=function(h){return b[h]};this.dd=function(h){var l=null;k=h.length;b=h.map(function(q,t){q=Object.assign({},q,{index:t,parent:this,Ea:l,Nc:t===k-1});return l=t=0===t?Na.a(q):Ta.a(q)});e=b[0];f=b[k-1];b.forEach(function(q,t){0!==t&&q.Zc()})};this.H=function(h,l){var q=l;b.forEach(function(t){q=t.H(q,h)});return q};this.yb=function(){return e.A()};this.Ab=function(){return f.Jc()};this.fd=function(h){f.tc(h)};this.xb=function(){return f.xb()}}
var Oa={a:function(b){var e=Z.a(b.weights);delete b.weights.data;return{da:!0,xa:function(){return 1},Kc:function(){return e},H:function(){w.set("s26");e.c(1);R.h(!1,!1)}}}},Ra={a:function(b){var e=b.fromLayerSize,f=Z.a(b.weights);return{da:!0,xa:function(){return e},H:function(k){if(k.isEnabled){w.set("s24");k.Rc.c(3);var h,l=Math.min(k.layers.length,k.depth);for(h=0;h<l;++h)k.layers[h].mc(4+h)}else w.set("s23");w.B("u17",b.toLayerSize);f.c(1);R.h(!1,!1)}}}},Pa={a:function(b){for(var e=b.fromLayerSize,
f=b.toLayerSize,k=b.toSparsity,h=k*f,l=h/e,q=e/f,t=0,v=0,m=0,r=Array(k*f*k*f*4),u=Array(k*f*k*f*4),C=Array(e*e),z=0;z<C.length;++z)C[z]=0;z=Math.floor(k/2);for(var P=.5/f,U=.5/e,Q=.5/h,G=0;G<f;++G)for(var g=Math.round(G*q),A=0;A<f;++A){var B=Math.round(A*q),ea=G/f,ta=A/f;ea+=P;ta+=P;for(var la=0;la<k;++la){var ca=g+la-z;0>ca&&(ca+=e);ca>=e&&(ca-=e);for(var c=0;c<k;++c){var F=t/h,S=v/h,J=B+c-z;0>J&&(J+=e);J>=e&&(J-=e);var ma=ca/e,ja=J/e;S=1-S-1/h;ma+=U;ja+=U;F+=Q;S+=Q;var ba=G*k+la,va=A*k+c;va=f*k-
va-1;ba=va*f*k+ba;r[4*ba]=F;r[4*ba+1]=S;r[4*ba+2]=ma;r[4*ba+3]=ja;ja=C[J*e+ca]++;ba=ja%l;ma=ca*l+ba;J=J*l+(ja-ba)/l;J=e*l-1-J;J=J*e*l+ma;u[4*J]=F;u[4*J+1]=S;u[4*J+2]=ea;u[4*J+3]=ta;++t>=h&&(t=0,++v);++m}}}C=null;var D=Z.a(b.weights);Z.a({width:h,isFloat:!0,array:new Float32Array(u),isPot:!0});u=null;var fa=Z.a({width:h,isFloat:!0,array:new Float32Array(r),isPot:!0});r=null;return{da:!0,xa:function(){return l},H:function(){w.set("s22");D.c(1);fa.c(2);R.h(!1,!1)}}}},Sa={a:function(b){var e=b.kernelsNumber,
f=b.toSparsity,k=f*b.toLayerSize/b.fromLayerSize,h=Z.a(b.weights);return{da:!0,xa:function(){return k},Td:function(){return f},Kc:function(){return h},H:function(){w.set("s25");w.B("u23",e);w.B("u24",f);w.B("u17",b.toLayerSize);w.B("u25",b.fromLayerSize);h.c(1);R.h(!1,!1)}}}},Qa={a:function(b,e){var f=b.fromLayerSize,k=b.toLayerSize,h=b.toSparsity,l=b.stride?b.stride:1,q=h*k/f,t=k<f,v=f/k,m=Z.a(b.weights),r="s45"+[f.toString(),k.toString(),h.toString(),l.toString(),e].join("_");w.Bc(r)||(b=Da(e),
k=[{type:"1f",name:"u17",value:k},{type:"1f",name:"u31",value:l}],t&&k.push({type:"1f",name:"u25",value:f}),f=[(t?q:h).toFixed(1),b],t&&f.push(v.toFixed(1)),w.Cb(t?"s39":"s38",r,f),w.J(r,k.concat([{type:"1i",name:"u15",value:0},{type:"1i",name:"u22",value:1},{type:"1i",name:"u14",value:3}])));return{da:!1,xa:function(){return q},H:function(){w.set(r);m.c(3);R.h(!1,!1)}}}},Ma=function(){var b=-1,e=-1,f=-1,k=-1,h=!1,l=null,q=null,t=null,v=null,m=null;return{m:function(r){b=r.Ob?r.Ob:3;e=r.Db?r.Db:64;
f=r.Ub?r.Ub:64;h=r.Oc?!0:!1;r={isFloat:!1,width:e,isPot:!1,isFlipY:!1};l=Z.a(r);q=Z.a(r);t=Z.a(r);v=Z.a(r);m=Z.a({isFloat:!0,width:f,isPot:!1,isFlipY:!1});k=1/e},Yc:function(r){w.set("s35");v.l();R.h(h,!1);w.set("s36");for(var u=0;u<b;++u)l.l(),w.oa("u7",k,0),R.h(h,!1),t.l(),v.c(0),R.h(h,!1),q.l(),l.c(0),w.oa("u7",0,k),R.h(h,!1),v.l(),t.c(0),R.h(h,!1),u!==b-1&&q.c(0);w.set("s37");m.l();r.c(0);q.c(1);v.c(2);R.h(h,!1);m.c(0)},Ab:function(){return m}}}();
function Va(b,e){b[e]=!0;b.setAttribute(e,"true")}function Wa(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Xa(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<b.length?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]:[0,0,0]}function Ya(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function Za(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function $a(b){if(!b)return b;var e=!1;if(b.video){var f=function(k){var h={};"undefined"!==typeof k.min&&(h.min=k.min);"undefined"!==typeof k.max&&(h.max=k.max);"undefined"!==typeof k.ideal&&(h.ideal=k.ideal);return h};e={};"undefined"!==typeof b.video.width&&(e.width=f(b.video.width));"undefined"!==typeof b.video.height&&(e.height=f(b.video.height));"undefined"!==typeof b.video.facingMode&&(e.facingMode=b.video.facingMode)}e={audio:b.audio,video:e};"undefined"!==typeof b.deviceId&&(e.deviceId=b.deviceId);
return e}function ab(b){var e=b.video.width;b.video.width=b.video.height;b.video.height=e;return b}
function bb(b){function e(u){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(C,z){return Math.abs(C-u)-Math.abs(z-u)})}function f(u){var C=$a(b);k.push(u(C))}var k=[];if(!b||!b.video)return k;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var h=e(b.video.width.ideal).slice(0,3),l=e(b.video.height.ideal).slice(0,3),q={},t=0;for(q.T=void 0;t<h.length;q={T:q.T},++t){q.T=h[t];var v={},m=0;for(v.S=void 0;m<l.length;v={S:v.S},++m)if(v.S=l[m],
q.T!==b.video.width.ideal||v.S!==b.video.height.ideal){var r=Math.max(q.T,v.S)/Math.min(q.T,v.S);r<4/3-.1||r>16/9+.1||f(function(u,C){return function(z){z.video.width.ideal=u.T;z.video.height.ideal=C.S;return z}}(q,v))}}}f(function(u){return ab(u)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&f(function(u){delete u.video.width.ideal;delete u.video.height.ideal;return u}),f(function(u){delete u.video.width;delete u.video.height;return u}));b.video.facingMode&&(f(function(u){delete u.video.facingMode;
return u}),b.video.width&&b.video.height&&f(function(u){ab(u);delete u.video.facingMode;return u}));k.push({audio:b.audio,video:!0});return k}function cb(b){try{var e=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(k){e=window.innerHeight>window.innerWidth}if(e&&b&&b.video){e=b.video.width;var f=b.video.height;e&&f&&e.ideal&&f.ideal&&e.ideal>f.ideal&&(b.video.height=e,b.video.width=f)}}
function db(b){b.volume=0;Va(b,"muted");if(Ya()){if(1===b.volume){var e=function(){b.volume=0;window.removeEventListener("mousemove",e,!1);window.removeEventListener("touchstart",e,!1)};window.addEventListener("mousemove",e,!1);window.addEventListener("touchstart",e,!1)}setTimeout(function(){b.volume=0;Va(b,"muted")},5)}}
function eb(b,e,f){return new Promise(function(k,h){if(b.srcObject&&b.srcObject.getVideoTracks){var l=b.srcObject.getVideoTracks();1!==l.length?h("INVALID_TRACKNUMBER"):(l=l[0],e?fb(b,k,h,f):(l.stop(),k()))}else h("BAD_IMPLEMENTATION")})}
function gb(b,e,f,k){function h(q){l||(l=!0,f(q))}var l=!1;navigator.mediaDevices.getUserMedia(k).then(function(q){function t(){setTimeout(function(){if(b.currentTime){var v=b.videoWidth,m=b.videoHeight;if(0===v||0===m)h("VIDEO_NULLSIZE");else{v&&(b.style.width=v.toString()+"px");m&&(b.style.height=m.toString()+"px");v={sc:null,md:null,Sc:null};try{var r=q.getVideoTracks()[0];r&&(v.Sc=r,v.sc=r.getCapabilities(),v.md=r.getSettings())}catch(u){}Ya()||Wa()?b.parentNode&&null!==b.parentNode?(l||e(b,q,
v),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),db(b),l||e(b,q,v),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";db(b);setTimeout(function(){b.play()},100)},80)):l||e(b,q,v)}}else h("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=q:(b.src=window.URL.createObjectURL(q),b.videoStream=q);db(b);b.addEventListener("loadeddata",function(){var v=b.play();db(b);"undefined"===typeof v?
t():v.then(function(){t()}).catch(function(){h("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(q){h(q)})}
function fb(b,e,f,k){if(b)if(Za()){if(k&&k.video){if(Wa()){var h=Xa();(12>h[0]||12===h[0]&&2>h[1])&&cb(k)}k.video.width&&k.video.width.ideal&&(b.style.width=k.video.width.ideal+"px");k.video.height&&k.video.height.ideal&&(b.style.height=k.video.height.ideal+"px")}Va(b,"autoplay");Va(b,"playsinline");k&&k.audio?b.volume=0:Va(b,"muted");gb(b,e,function(){function l(t){if(0===t.length)f("INVALID_FALLBACKCONSTRAINTS");else{var v=t.shift();gb(b,e,function(){l(t)},v)}}var q=bb(k);l(q)},k)}else f&&f("MEDIASTREAMAPI_NOTFOUND");
else f&&f("VIDEO_NOTPROVIDED")}function hb(b){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return b(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(e){(e=e.filter(function(f){return f.kind&&-1!==f.kind.toLowerCase().indexOf("video")&&f.label&&f.deviceId}))&&e.length&&0<e.length?b(e,!1):b(!1,"NODEVICESFOUND")}).catch(function(){b(!1,"PROMISEREJECTED")})}
window.JEEFACEFILTERAPI=function(){var b,e,f,k,h,l,q,t,v,m,r,u,C,z;function P(){return-1!==[Y.play,Y.pause].indexOf(da)}function U(d){if(da!==Y.pause){var n=da===Y.play?L.ta:K.jc;wa=setTimeout(B.bind(null,d),n)}}function Q(){if(da===Y.play)return!1;da=Y.play;p.timestamp=Date.now();X&&window.cancelAnimationFrame(X);B(0)}function G(){if(da!==Y.play)return!1;wa&&(clearTimeout(wa),wa=!1);X&&(window.cancelAnimationFrame(X),X=!1);da=Y.pause;return!0}function g(d,n,y,W,T){d=4*(3*n+d)+y;return W+(na.buffer[d]/
255+na.buffer[d+12]/65025)*(T-W)}function A(){I.U();R.reset();Z.reset();w.ra();w.tb();a.disable(a.DEPTH_TEST);a.disable(a.BLEND);R.ia();w.pa()}function B(){if(da!==Y.pause){w.tb();R.reset();R.ia();a.disable(a.DEPTH_TEST);I.U();w.pa();if(!x.$a){var d=x.element.currentTime-x.Fa;0>d&&(x.Fa=x.element.currentTime);1E3*d<K.rd||(x.Y.refresh(),x.Fa+=d,w.set("s48"),x.qa.I(),x.Y.c(0),R.h(!1,!1))}if(E.L.length>p.F)E.L.splice(0,E.L.length-p.F);else for(;E.L.length<p.F;)E.L.push(0);if(1!==E.i)if(sa.every(S)){for(var n=
0,y=d=0;y<sa.length;++y)sa[y].detected>n&&(n=sa[y].detected,d=0);for(n=0;n<p.F;++n)E.L[n]=d}else{d=E.Lb;n=0;for(y=!1;n<p.F;++n){if(S(sa[d]))if(y){do++d===E.i&&(d=0);while(S(sa[d]))}else y=!0;E.L[n]=d++;d>=E.i&&(d=0)}E.Lb=d}for(d=0;d<p.F;++d)E.V=E.L[d],E.cb=(.5+E.V)/E.i,E.Hb=E.L.lastIndexOf(E.V)===d,w.set("s49"),L.aa&&w.B("u37",sa[E.V].rz),1!==E.i&&w.B("u36",E.cb),V.za.I(),x.qa.c(0),na.Ia.c(1),R.h(!1,!1),V.za.c(0),ha.H(!1,V.za);d=Date.now();p.la=d-p.timestamp;p.timestamp=d;-1!==M.nDetectsPerLoop?p.F=
M.nDetectsPerLoop:(d=K.La,p.Qb=p.Pb/p.la,p.Rb=p.Qb*d+p.Rb*(1-d),p.Sb=1E3/p.la,p.ca=p.Sb*K.La+p.ca*(1-K.La),p.ca>K.$[1]?(d=K.sa[1],1<E.i&&(++d,n=sa.filter(J).length,d*=Math.max(1,n)),p.F=Math.min(p.F+1,d),p.ca=(K.$[0]+K.$[1])/2):p.ca<K.$[0]&&(p.F=Math.max(p.F-1,K.sa[0]),p.ca=(K.$[0]+K.$[1])/2));I.K();a.viewport(0,0,3,2*E.i);w.set("s47");na.Ia.c(0);R.h(!1,!1);a.readPixels(0,0,3,2*E.i,a.RGBA,a.UNSIGNED_BYTE,na.buffer);for(d=0;d<E.i;++d)if(-1!==E.L.indexOf(d)){var W=d;n=Ba[W];var T=[W];y=sa[W];var qa=
O[W],xa=2*W;n.wa=g(1,xa,3,0,1);y.detected=ra(y.detected,n.wa,K.fc);if(n.wa<K.bb)L.aa&&(y.rz=0);else{var ya=na.ib;n.x=g(0,xa,1,-1,1);n.y=g(0,xa,2,-1,1);n.N=g(0,xa,3,0,1);n.eb=g(1,xa,0,-ya[0],ya[0]);n.fb=g(1,xa,1,-ya[1],ya[1]);n.na=g(1,xa,2,-ya[2],ya[2]);for(ya=0;ya<K.Da;++ya)n.vb[ya]=K.Cc[ya](g(2,xa,ya,0,1));T.Sa=n.x-y.x;T.Ta=n.y-y.y;T.Ra=n.N-y.s;T.Oa=n.eb-y.rx;T.Pa=n.fb-y.ry;T.Qa=L.aa?n.na:n.na-y.rz;T=(1-Ca(aa.translationFactorRange[0],aa.translationFactorRange[1],Math.sqrt(T.Sa*T.Sa+T.Ta*T.Ta+T.Ra*
T.Ra)/p.la))*(1-Ca(aa.rotationFactorRange[0],aa.rotationFactorRange[1],Math.sqrt(T.Oa*T.Oa+T.Pa*T.Pa+T.Qa*T.Qa)/p.la))*Ca(aa.qualityFactorRange[0],aa.qualityFactorRange[1],n.wa);W=qa[++oa[W]%qa.length]=T;for(xa=0;xa<qa.length;++xa)W=Math.min(W,qa[xa]);W=Math.max(.5,W);T=Math.min(W,T);qa=ra(aa.alphaRange[1],aa.alphaRange[0],Math.pow(T,K.ic));y.x=ra(y.x,n.x,qa);y.y=ra(y.y,n.y,qa);y.s=ra(y.s,n.N,qa);y.rx=ra(y.rx,n.eb,qa);y.ry=ra(y.ry,n.fb,qa);y.rz=L.aa?y.rz+qa*n.na:ra(y.rz,n.na,qa);qa=Math.max(qa,K.hc);
for(W=0;W<K.Da;++W)y.expressions[W]=ra(y.expressions[W],n.vb[W],qa);++n.Ca}}I.pd();I.reset();Z.reset();a.enable(a.DEPTH_TEST);L.va&&(1===E.i?L.va(sa[0]):L.va(sa));a.disable(a.BLEND);da===Y.play&&(X=window.requestAnimationFrame(U))}}function ea(){function d(y){for(var W=[],T=0;T<E.i;++T)W.push(Object.assign({},y));return W}x.qa=Z.a({isPot:!1,isLinear:!0,isFloat:!1,width:V.O,height:V.R});V.za=Z.a({isPot:!0,isFloat:!1,width:ha.yb()});var n={width:3,height:E.i,isFloat:!0,isPot:!1,array:function(y){for(var W=
new Float32Array(y.length*E.i),T=0,qa;T<E.i;++T)for(qa=0;qa<y.length;++qa)W[T*y.length+qa]=y[qa];return W}(new Float32Array([0,M.borderWidth,M.borderHeight,0,0,0,0,0,0,0,0,0]))};na.Ia=Ka.a(n);na.buffer=new Uint8Array(8*n.width*E.i);Ba=d({wa:0,x:0,y:0,N:1,eb:0,fb:0,na:0,vb:new Float32Array(K.Da),Ca:0});sa=d({detected:0,x:0,y:0,s:1,rx:0,ry:0,rz:0,expressions:new Float32Array(K.Da)});d({Sa:0,Ta:0,Ra:0,Oa:0,Pa:0,Qa:0})}function ta(){w.J("s49",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u34",value:1},
{type:"2f",name:"u35",value:V.v},{type:"1f",name:"u36",value:.5},{type:"1f",name:"u37",value:0}]);w.J("s50",[{type:"1i",name:"u38",value:0},{type:"1i",name:"u34",value:1},{type:"1f",name:"u41",value:K.od},{type:"1f",name:"u42",value:K.cc},{type:"1f",name:"u43",value:K.bc},{type:"3f",name:"u40",value:[na.ea[0]*V.v[0],na.ea[1]*V.v[1],na.ea[2]]},{type:"1f",name:"u36",value:.5},{type:"1f",name:"u44",value:1},{type:"1f",name:"u37",value:0}]);var d=[{type:"1i",name:"u38",value:0}];w.J("s51",d);w.J("s52",
d);w.J("s47",[{type:"1i",name:"u34",value:0},{type:"1f",name:"u47",value:V.v[0]},{type:"2f",name:"u46",value:[0,.5/E.i]}])}function la(){var d=ha.yb(),n=V.O/d;l=M.minScale*n;q=M.maxScale*n;t=(1-2*M.borderWidth)/M.nStepsX;v=(1-2*M.borderHeight)/M.nStepsY;m=(q-l)/M.nStepsScale;r=M.borderWidth;u=M.borderHeight;C=1-M.borderWidth;z=1-M.borderHeight;V.v[0]=d/V.O;V.v[1]=d/V.R;b=M.borderWidth;e=M.borderHeight;f=l;k=M.borderWidth;h=M.borderHeight;ua=l}function ca(d){if(L.fa)c("string"===typeof L.fa?JSON.parse(L.fa):
L.fa,d);else{var n=L.kb;"JSON"!==n.toUpperCase().split(".").pop()&&(n+=K.save);Aa(n,function(y){y=JSON.parse(y);c(y,d)})}}function c(d,n){if(d.exportData){var y=d.exportData;y.thetaXYZfactor&&(na.me=y.thetaXYZfactor);y.trackingDxysFactor&&(na.ea=y.trackingDxysFactor)}n(d)}function F(){if(Ja.m({Na:L.P,width:V.O,height:V.R,debug:!1,Wc:function(){H("GLCONTEXT_LOST")},antialias:!0,premultipliedAlpha:!0})){if(Ja.Mc())return!0;H("GL_INCOMPATIBLE");return!1}H("GL_INCOMPATIBLE");return!1}function S(d){return d.detected<
K.bb}function J(d){return d.detected>K.bb}function ma(d,n,y,W){return y>d?Math.max(0,d+n/2-(y-W/2)):Math.max(0,y+W/2-(d-n/2))}function ja(){return Ba.some(function(d,n){if(n===E.V)return!1;n=Ba[E.V];if(n.Ca>d.Ca||3>d.Ca||ma(n.x/2,n.N,d.x/2,d.N)<K.Nb*n.N)return!1;var y=V.O/V.R;return ma(n.y/2,n.N*y,d.y/2,d.N*y)>K.Nb*n.N*y})}function ba(){var d=E.V;na.Ia.hd(1);1!==E.i&&(a.viewport(0,0,3,E.i),w.set("s0"),w.Yb("u1",1),R.h(!1,!1),w.Yb("u1",0));a.viewport(0,d,1,1);w.set("s50");L.aa&&w.B("u37",sa[d].rz);
1!==E.i&&w.B("u36",E.cb);if(1<E.i){var n=ja()?0:1;w.B("u44",n)}w.kd("u39",k,h,ua);R.h(!1,!1);E.Hb&&(a.viewport(1,d,1,1),w.set("s51"),R.h(!1,!1),a.viewport(2,d,1,1),w.set("s52"),R.h(!1,!1));f+=m;f>q&&(b+=t,f=l,b>C&&(b=r,e+=v,e>z&&(e=u)));k=b+.8*(Math.random()-.5)*t;h=e+.8*(Math.random()-.5)*v;ua=f+.8*(Math.random()-.5)*m}function va(){x.Y&&x.Y.remove();x.Y=Z.a({D:x.element,isPot:!1,isFloat:!1,isFlipY:!0})}function D(){w.J("s48",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u33",value:x.o}])}function fa(){x.C[0]=
.5;x.C[1]=.5;var d=x.v[1]/x.v[0],n=Ja.M()/Ja.A();90===Math.abs(pa.rotate)&&(d=1/d);d>n?x.C[1]*=n/d:x.C[0]*=d/n;w.J("s50",[{name:"u45",type:"1f",value:n}]);x.o[0]=0;x.o[1]=0;x.o[2]=0;x.o[3]=0;switch(pa.rotate){case 0:x.o[0]=x.C[0];x.o[3]=x.C[1];break;case 180:x.o[0]=-x.C[0];x.o[3]=-x.C[1];break;case 90:x.o[1]=x.C[0];x.o[2]=-x.C[1];break;case -90:x.o[1]=-x.C[0],x.o[2]=x.C[1]}pa.flipX&&(x.o[0]*=-1,x.o[2]*=-1)}function ka(){var d=x.element.videoWidth,n=x.element.videoHeight,y=x.v[0]!==d||x.v[1]!==n;y&&
(x.v[0]=d,x.v[1]=n);return y}function ia(d,n){if(da===Y.error)return!1;x.element=d;ka();n&&n();return!0}function N(d,n,y){d&&d();x.ka={video:{facingMode:{ideal:pa.facingMode},width:{min:pa.minWidth,max:pa.maxWidth,ideal:pa.idealWidth},height:{min:pa.minHeight,max:pa.maxHeight,ideal:pa.idealHeight}},audio:!1};pa.deviceId&&(x.ka.deviceId=pa.deviceId);fb(x.element?x.element:Za()?document.createElement("video"):!1,function(W){n&&n(W);y(W)},function(){H("WEBCAM_UNAVAILABLE")},x.ka)}function H(d){da!==
Y.error&&(da=Y.error,L.ja&&L.ja(d))}function za(d,n){for(var y in d)"undefined"!==typeof n[y]&&(d[y]=n[y]);n===M&&M.nDetectsPerLoop&&(p.F=M.nDetectsPerLoop,p.Pb=M.nDetectsPerLoop)}var K={save:"NNC.json",nb:0,jc:25,La:.2,$:[45,55],td:1/3.5,sa:[2,7],bd:{minScale:.15,maxScale:.6,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,nDetectsPerLoop:-1},od:50,Nb:.12,bb:.6,Tc:8,cc:.8,bc:1,nd:{translationFactorRange:[.0015,.005],rotationFactorRange:[.003,
.02],qualityFactorRange:[.9,.98],alphaRange:[.05,1]},ib:[.65,1,.262],ea:[.092,.092,.3],fc:.2,ic:2,hc:.1,Uc:8,Da:1,Cc:[Ca.bind(null,.3,.75)],rd:20},pa={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,rotate:0,flipX:!1},Y={Qc:-1,error:-2,Bb:0,play:1,pause:2},da=Y.Bb,x={$a:!1,element:!1,Y:!1,qa:!1,v:[0,0],C:[.5,.5],o:[.5,0,0,.5],Fa:0,ka:null},L={ja:!1,va:!1,kb:"./",fa:!1,P:!1,ta:K.nb,Vb:K.nb,Ba:!1,aa:!1},ha=null,M=Object.create(K.bd),aa=Object.create(K.nd);
var ua=f=h=k=e=b=q=l=z=C=u=r=m=v=t=0;var V={O:0,R:0,v:[0,0],za:null},na={Ia:null,buffer:null,ea:K.ea.slice(0),ib:K.ib.slice(0)},Ba=null,sa=null,wa=!1,X=!1,E={i:1,V:0,L:[0],Hb:!1,Lb:0,cb:0},p={la:0,timestamp:0,Qb:0,Rb:0,F:K.sa[0],Pb:K.sa[0],Sb:0,ca:0,zd:1},O=[],oa=[];return{init:function(d){function n(){da!==Y.error&&2===++W&&(fa(),va(),D(),L.ja&&(L.ja(!1,{GL:a,canvasElement:L.P,videoTexture:x.qa.get(),maxFacesDetected:E.i,videoElement:x.element}),A()),Q())}if(da!==Y.Bb)return d.callbackReady&&d.callbackReady("ALREADY_INITIALIZED"),
!1;da=Y.Qc;d.callbackReady&&(L.ja=d.callbackReady);d.callbackTrack&&(L.va=d.callbackTrack);"undefined"!==typeof d.animateDelay&&(L.ta=d.animateDelay);"undefined"!==typeof d.NNCpath&&(L.kb=d.NNCpath);"undefined"!==typeof d.NNC&&(L.fa=d.NNC);"undefined"!==typeof d.maxFacesDetected&&(E.i=Math.max(1,d.maxFacesDetected));"undefined"!==typeof d.followZRot&&(L.aa=d.followZRot?!0:!1);if(E.i>K.Tc)return H("MAXFACES_TOOHIGH"),!1;if(!d.canvasId&&!d.canvas)return H("NO_CANVASID"),!1;L.P=d.canvas?d.canvas:document.getElementById(d.canvasId);
if(!L.P)return H("INVALID_CANVASID"),!1;V.O=L.P.width;V.R=L.P.height;if(!V.O||!V.R)return H("INVALID_CANVASDIMENSIONS"),!1;for(var y=0;y<E.i;++y)O.push(new Float32Array(K.Uc)),oa.push(0);d.scanSettings&&za(M,d.scanSettings);d.stabilizationSettings&&za(aa,d.stabilizationSettings);var W=0;d.videoSettings&&d.videoSettings.videoElement?ia(d.videoSettings.videoElement,n):(d.videoSettings&&za(pa,d.videoSettings),N(d.onWebcamAsk,d.onWebcamGet,function(T){ia(T,n)}));ca(function(T){if(!F())return!1;ha=new Ua;
ha.dd(T.layers);ha.fd({Tb:"gpuRawAvg",Xc:ba});w.ec([{id:"s48",name:"_",Z:"attribute vec2 a0;uniform mat2 u33;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u33*a0;}",ua:["a0"],ga:[2],b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u33"],precision:"lowp"},{id:"s49",name:"_",b:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",Z:"attribute vec2 a0;uniform sampler2D u34;uniform vec2 u35;uniform float u36,u37;varying vec2 vv0;void main(){vec4 a=texture2D(u34,vec2(.17,u36));vec2 d=a.gb,e=a.a*u35;float b=cos(u37),c=sin(u37);vec2 g=mat2(b,c,-c,b)*a0;vv0=d+g*.5*e,gl_Position=vec4(a0,0.,1.);}",
ua:["a0"],ga:[2],f:["u1","u34","u35","u36","u37"],precision:"lowp"},{id:"s50",name:"_",b:"uniform sampler2D u38,u34;uniform vec3 u39,u40;uniform float u41,u42,u43,u36,u44,u37,u45;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u38,vec2(.625,.625)),h=texture2D(u38,vec2(.875,.625)),a=texture2D(u34,vec2(.17,u36));float b=dot(g,e),i=dot(h,e);bool j=b>u42&&b>i+u43;j?a.r=2.:a.r>u41?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u44;if(a.r<.9)a=vec4(1.,u39);else{a.r*=step(1.9,a.r);float k=dot(e,texture2D(u38,vec2(.875,.875))),l=dot(e,texture2D(u38,vec2(.125,.625))),m=dot(e,texture2D(u38,vec2(.375,.625))),c=cos(u37),d=sin(u37);vec2 f=mat2(c,d*u45,-d/u45,c)*vec2(k,l);a.gba+=vec3(f,m)*u40*a.a;}gl_FragColor=a;}",
Z:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",f:"u38 u34 u39 u41 u40 u44 u37 u45 u42 u43 u36".split(" ")},{id:"s51",name:"_",Z:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",b:"uniform sampler2D u38;const vec4 e=vec4(.25,.25,.25,.25);const vec3 g=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u38,vec2(.125,.875))),b=dot(e,texture2D(u38,vec2(.375,.875))),c=dot(e,texture2D(u38,vec2(.625,.875))),d=dot(e,texture2D(u38,vec2(.625,.625)));vec3 f=vec3(a,b,c)*.5+g;gl_FragColor=vec4(f,d);}",
f:["u38"]},{id:"s52",name:"_",Z:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",b:"uniform sampler2D u38;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u38,vec2(.25,.25)));gl_FragColor=vec4(a,0.,0.,0.);}",f:["u38"]},{id:"s47",name:"_",b:"uniform sampler2D u34;uniform vec2 u46;uniform float u47;varying vec2 vv0;void main(){float g=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u34,vv0+u46);a.a=mix(a.a*u47,a.a,c);vec4 d=floor(255.*a),f=255.*(255.*a-d),b=mix(d,f,g)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
f:["u34","u47","u46"]}]);ea();la();ta();n()});return!0},toggle_pause:function(d,n){if(P())return n=n?eb(x.element,!d,x.ka):Promise.resolve(),d?G():Q(),n},update_videoSettings:function(d){G();return new Promise(function(n){eb(x.element,!1,x.ka).then(function(){za(pa,d);N(null,null,function(y){ia(y,function(){fa();D();Q();n()})})})})},toggle_slow:function(d){P()&&da===Y.play&&(d&&!L.Ba?(L.Vb=L.ta,M.nDetectsPerLoop=1,this.set_animateDelay(100),L.Ba=!0):!d&&L.Ba&&(M.nDetectsPerLoop=-1,this.set_animateDelay(L.Vb),
L.Ba=!1))},set_animateDelay:function(d){L.ta=d},resize:function(){var d=L.P.width,n=L.P.height;if(!ka()&&d===V.O&&n===V.R)return!1;V.O=d;V.R=n;la();ta();fa();D();return!0},set_inputTexture:function(d,n,y){x.v[0]=n;x.v[1]=y;x.$a=!0;fa();A();D();w.set("s48");x.qa.I();a.activeTexture(a.TEXTURE0);a.bindTexture(a.TEXTURE_2D,d);R.h(!0,!0)},reset_inputTexture:function(){ka();x.$a=!1;fa();D()},get_videoDevices:function(d){return hb(d)},set_scanSettings:function(d){za(M,d);la();ta()},set_stabilizationSettings:function(d){za(aa,
d)},set_videoOrientation:function(d,n){P()&&(pa.flipX=n,pa.rotate=d,fa(),D())},update_videoElement:function(d,n){ia(d?d:x.element,function(){va();fa();D();n&&n()})}}}();
;if(typeof(module)!=='undefined'){module.exports=JEEFACEFILTERAPI;}