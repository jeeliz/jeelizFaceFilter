 /**
 * Jeeliz Face Filter - https://github.com/jeeliz/jeelizFaceFilter
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

// BEGIN EMULATE DOM

// import some usefull stuffs
try {
  var Buffer = require('buffer').Buffer;
} catch(err) {
  console.log('Cannot import Buffer package');
}

// emulate global variables:
const navigator = {  
  platform: "Linux x86_64",
  userAgent: "forceWebGL1_noAntialiasing_noDOM"
};

const window = {
  canvas: null,
  innnerWidth: -1,
  innerHeight: -1,
  URL: {
    createObjectURL: function() {
      return null
    }
  },
  addEventListener: function() {},
  removeEventListener: function() {},
  requestAnimationFrame: function(step) {
    if (window.canvas === null){
      setTimeout(step, 1);
      return;
    }
    window.canvas.requestAnimationFrame(step)
  },
  cancelAnimationFrame: function(step) {
    if (window.canvas === null){
      return;
    }
    window.canvas.cancelAnimationFrame(step)
  },
  setCanvas: function(c) {
    window.canvas = c;
  }
};

const document = {
  createElement: function(elementType){
    switch(elementType){
      case 'canvas':
        return null; // return a real canvas
    }
  },
  getElementById: function(elementId){
    return null;
  },
  body: { appendChild: function(element){ return null; }}
};

if(typeof(wx) !== 'undefined'){ //WECHAT
  const systemInfo = wx.getSystemInfoSync()
  window.innnerWidth = systemInfo.windowWidth;
  window.innnerHeight = systemInfo.windowHeight;
}

const FAKEDOM = {
  window: window,
  document: document,
  navigator: navigator
};
// END EMULATE DOM


window.JEEFACEFILTERAPIGEN=function(){function Cb(){var a=null,c=null,d=null,e=0;this.Cd=function(g){return a[g]};this.ae=function(g){var m=null;e=g.length;a=g.map(function(r,q){r=Object.assign({},r,{index:q,parent:this,Ua:m,Kd:q===e-1});return m=q=0===q?Pb.instance(r):Qb.instance(r)});c=a[0];d=a[e-1];a.forEach(function(r,q){0!==q&&r.Wd()})};this.K=function(g,m){var r=m;a.forEach(function(q){r=q.K(r,g)});return r};this.jc=function(){return c.B()};this.mc=function(){return d.Dd()};this.ce=function(g){d.md(g)};
this.ic=function(){return d.ic()};this.h=function(){a&&(a.forEach(function(g){g.h()}),d=c=a=null,e=0)}}var Na,Oa,Pa,Ya,Za,Qa,$a,ab,bb,kb,lb,mb,nb;function ob(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Rb(a){var c=JSON.parse(a);a=c.ne;var d=c.nf,e=c.n;var g="undefined"===typeof btoa?Buffer.from(c.data,"base64").toString("latin1"):atob(c.data);var m=g.length;c=new Uint8Array(m);for(var r=0;r<m;++r)c[r]=g.charCodeAt(r);g=new Float32Array(e);m=new Float32Array(d);r=a+d+1;for(var q=0;q<e;++q){for(var f=
r*q,x=0===ob(c,f)?1:-1,B=f+1,h=1,w=0,k=B+a-1;k>=B;--k)w+=h*ob(c,k),h*=2;B=w;f=f+1+a;h=m.length;w=0;for(k=f;k<f+h;++k)m[w]=ob(c,k,!0),++w;for(h=f=0;h<d;++h)f+=m[h]*Math.pow(2,-h-1);g[q]=0===f&&0===B?0:x*(1+f)*Math.pow(2,1+B-Math.pow(2,a-1))}return g}function cb(){return-1!==[ba.ready,ba.play,ba.pause].indexOf(ia)}function Sb(a){if(ia!==ba.pause){var c=ia===ba.play?L.Ca:W.Yc;db=setTimeout(Db.bind(null,a),c)}}function pb(){if(ia===ba.play)return!1;ia=ba.play;Ra&&window.cancelAnimationFrame(Ra);Db(0)}
function Eb(){if(ia!==ba.play)return!1;db&&(clearTimeout(db),db=null);Ra&&(window.cancelAnimationFrame(Ra),Ra=null);ia=ba.pause;return!0}function Ea(a,c,d,e,g){a=4*(3*c+a)+d;return e+(X.buffer[a]/255+X.buffer[a+12]/65025)*(g-e)}function qb(){b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);sa.Y();S.reset();T.reset();z.J();z.Wb();b.disable(b.DEPTH_TEST);b.disable(b.BLEND);S.sa();z.ma()}function Db(){if(ia!==ba.pause){z.Wb();S.reset();S.sa();b.disable(b.DEPTH_TEST);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);sa.Y();
z.ma();if(!y.tb)a:{if(y.sb){if(!y.element.needsUpdate)break a;y.ca.re(y.element.arrayBuffer);y.element.needsUpdate=!1}else{var a=y.element.currentTime,c=a-y.Va;0>c&&(y.Va=a);if(1E3*c<W.te)break a;y.Va+=c;y.ca.refresh()}z.set("s50");y.W.P();y.ca.b(0);S.g(!1,!1)}a=za.kc();if(I.M.length>a)I.M.splice(0,I.M.length-a);else for(;I.M.length<a;)I.M.push(0);if(1!==I.i)if(oa.every(rb)){for(var d=0,e=c=0;e<oa.length;++e)oa[e].detected>d&&(d=oa[e].detected,c=0);for(d=0;d<a;++d)I.M[d]=c}else{c=I.wc;d=0;for(e=!1;d<
a;++d){if(rb(oa[c]))if(e){do++c===I.i&&(c=0);while(rb(oa[c]))}else e=!0;I.M[d]=c++;c>=I.i&&(c=0)}I.wc=c}for(a=0;a<za.kc();++a)I.ga=I.M[a],I.xb=(.5+I.ga)/I.i,I.tc=I.M.lastIndexOf(I.ga)===a,z.set("s51"),c=oa[I.ga],z.A("u37",1+Sa.Cb*(Math.cos(c.ry)-1)),L.la&&z.A("u36",c.rz),1!==I.i&&z.A("u35",I.xb),U.xa.P(),y.W.b(0),X.Aa.b(1),S.g(!1,!1),U.xa.b(0),Aa.K(!1,U.xa);za.le();sa.H();b.viewport(0,0,3,2*I.i);z.set("s49");X.Aa.b(0);S.g(!1,!1);b.readPixels(0,0,3,2*I.i,b.RGBA,b.UNSIGNED_BYTE,X.buffer);for(a=0;a<
I.i;++a)if(-1!==I.M.indexOf(a)){var g=a;c=Wa[g];var m=[g];d=oa[g];e=sb[g];var r=2*g;c.Fa=Ea(1,r,3,0,1);d.detected=pa.S(d.detected,c.Fa,W.Vc);if(c.Fa<W.yc)L.la&&(d.rz=0,d.ry=0);else{var q=X.Ba;c.x=Ea(0,r,1,-1,1);c.y=Ea(0,r,2,-1,1);c.V=Ea(0,r,3,0,1);c.Ab=Ea(1,r,0,-q[0],q[0]);c.Bb=Ea(1,r,1,-q[1],q[1]);c.ya=Ea(1,r,2,-q[2],q[2]);for(q=0;q<X.T;++q)c.cc[q]=X.wa[q](Ea(2,r,q,0,1));m.ib=c.x-d.xRaw;m.jb=c.y-d.yRaw;m.hb=c.V-d.sRaw;m.eb=c.Ab-d.rx;m.fb=c.Bb-d.ry;m.gb=L.la?c.ya:c.ya-d.rz;r=za.zd();m=(1-eb.Pa(ta.translationFactorRange[0],
ta.translationFactorRange[1],Math.sqrt(m.ib*m.ib+m.jb*m.jb+m.hb*m.hb)/r))*(1-eb.Pa(ta.rotationFactorRange[0],ta.rotationFactorRange[1],Math.sqrt(m.eb*m.eb+m.fb*m.fb+m.gb*m.gb)/r))*eb.Pa(ta.qualityFactorRange[0],ta.qualityFactorRange[1],c.Fa);g=e[++tb[g]%e.length]=m;for(r=0;r<e.length;++r)g=Math.min(g,e[r]);g=Math.max(.5,g);m=Math.min(g,m);e=pa.S(ta.alphaRange[1],ta.alphaRange[0],Math.pow(m,W.Xc));d.xRaw=pa.S(d.xRaw,c.x,e);d.yRaw=pa.S(d.yRaw,c.y,e);d.sRaw=pa.S(d.sRaw,c.V,e);d.rx=pa.S(d.rx,c.Ab,e);
d.ry=pa.S(d.ry,c.Bb,e);d.rz=L.la?d.rz+e*c.ya:pa.S(d.rz,c.ya,e);g=d.sRaw*Sa.cb*Math.sin(d.ry);m=Math.sin(d.rz)*g/Ta;d.x=d.xRaw+Math.cos(d.rz)*g;d.y=d.yRaw+m;d.s=d.sRaw;e=Math.max(e,W.Wc);for(g=0;g<X.T;++g)d.expressions[g]=pa.S(d.expressions[g],c.cc[g],e);++c.Sa}}sa.pe();sa.reset();T.reset();b.enable(b.DEPTH_TEST);L.Ea&&(1===I.i?L.Ea(oa[0]):L.Ea(oa));b.disable(b.BLEND);ia===ba.play&&(Ra=window.requestAnimationFrame(Sb))}}function Fb(){y.W||(y.W=T.instance({isPot:!1,isLinear:!0,isFloat:!1,width:U.N,
height:U.O}));U.xa=T.instance({isPot:!0,isFloat:!1,width:Aa.jc()});for(var a=W.Lc,c=I.i,d=new Float32Array([0,aa.borderWidth,aa.borderHeight,0,0,0,0,0,0,0,0,0]),e=new Float32Array(d.length*I.i),g=0,m;g<I.i;++g)for(m=0;m<d.length;++m)e[g*d.length+m]=d[m];X.Aa=Tb.instance({width:a,height:c,isFloat:!0,isPot:!1,array:e})}function Ub(){function a(c){for(var d=[],e=0;e<I.i;++e)d.push(JSON.parse(JSON.stringify(c)));return d}X.buffer=new Uint8Array(8*W.Lc*I.i);Wa=a({Fa:0,x:0,y:0,V:1,Ab:0,Bb:0,ya:0,cc:new Float32Array(X.T),
Sa:0});oa=a({detected:0,x:0,y:0,s:1,xRaw:0,yRaw:0,sRaw:1,rx:0,ry:0,rz:0,expressions:new Float32Array(X.T)});a({ib:0,jb:0,hb:0,eb:0,fb:0,gb:0})}function ub(){z.L("s51",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u33",value:1},{type:"2f",name:"u34",value:U.u},{type:"1f",name:"u35",value:.5},{type:"1f",name:"u36",value:0}]);z.L("s52",[{type:"1i",name:"u38",value:0},{type:"1i",name:"u33",value:1},{type:"1f",name:"u41",value:W.me},{type:"1f",name:"u42",value:W.Sc},{type:"1f",name:"u43",value:W.Rc},
{type:"3f",name:"u40",value:[X.ia[0]*U.u[0],X.ia[1]*U.u[1],X.ia[2]]},{type:"1f",name:"u35",value:.5},{type:"1f",name:"u44",value:1},{type:"1f",name:"u36",value:0}]);var a=[{type:"1i",name:"u38",value:0}];z.L("s53",a);z.L("s54",a);z.L("s49",[{type:"1i",name:"u33",value:0},{type:"1f",name:"u47",value:U.u[0]},{type:"2f",name:"u46",value:[0,.5/I.i]}])}function vb(){var a=Aa.jc(),c=U.N/a;Qa=aa.minScale*c;wb=aa.maxScale*c;$a=(1-2*aa.borderWidth)/aa.nStepsX;ab=(1-2*aa.borderHeight)/aa.nStepsY;bb=(wb-Qa)/
aa.nStepsScale;kb=aa.borderWidth;lb=aa.borderHeight;mb=1-aa.borderWidth;nb=1-aa.borderHeight;U.u[0]=a/U.N;U.u[1]=a/U.O;Na=aa.borderWidth;Oa=aa.borderHeight;Pa=Qa;Ya=aa.borderWidth;Za=aa.borderHeight;xb=Qa}function Vb(a){if(L.oa)Gb("string"===typeof L.oa?JSON.parse(L.oa):L.oa,a);else{var c=L.Ib;"JSON"!==c.toUpperCase().split(".").pop()&&(c+=W.save);Hb.get(c,function(d){d=JSON.parse(d);Gb(d,a)})}}function Gb(a,c){if(a.exportData){var d=a.exportData;d.thetaXYZfactor&&(X.Ba=d.thetaXYZfactor);d.trackingDxysFactor&&
(X.ia=d.trackingDxysFactor);"undefined"!==typeof d.nExpressions&&(X.T=d.nExpressions);Sa.Cb=.4;Sa.cb=.7;"undefined"!==typeof d.fgScaleXFactor&&(Sa.Cb=d.fgScaleXFactor);"undefined"!==typeof d.fgDisplaceXFactor&&(Sa.cb=d.fgDisplaceXFactor)}X.T||(X.T=W.Bc);if(!X.wa)for(X.wa=[],d=0;d<X.T;++d)X.wa.push(W.td);c(a)}function Wb(){if(Ua.D({ab:L.Z,width:U.N,height:U.O,debug:!1,Cc:function(){Ha("GLCONTEXT_LOST")},antialias:L.antialias,premultipliedAlpha:!0}))return!0;Ha("GL_INCOMPATIBLE");return!1}function rb(a){return a.detected<=
W.yc}function Ib(a,c,d,e){return d>a?Math.max(0,a+c/2-(d-e/2)):Math.max(0,d+e/2-(a-c/2))}function Xb(){return Wa.some(function(a,c){if(c===I.ga)return!1;c=Wa[I.ga];if(c.Sa>a.Sa||3>a.Sa||Ib(c.x,c.V,a.x,a.V)<W.zc*c.V)return!1;var d=U.N/U.O;return Ib(c.y,c.V*d,a.y,a.V*d)>W.zc*c.V*d})}function Yb(){var a=I.ga;X.Aa.ee(1);1!==I.i&&(b.viewport(0,0,3,I.i),z.set("s0"),z.Kc("u1",1),S.g(!1,!1),z.Kc("u1",0));b.viewport(0,a,1,1);z.set("s52");L.la&&z.A("u36",oa[a].rz);1!==I.i&&z.A("u35",I.xb);if(1<I.i){var c=Xb()?
0:1;z.A("u44",c)}z.ge("u39",Ya,Za,xb);S.g(!1,!1);I.tc&&(b.viewport(1,a,1,1),z.set("s53"),S.g(!1,!1),b.viewport(2,a,1,1),z.set("s54"),S.g(!1,!1));Pa+=bb;Pa>wb&&(Na+=$a,Pa=Qa,Na>mb&&(Na=kb,Oa+=ab,Oa>nb&&(Oa=lb)));Ya=Na+.5*(Math.random()-.5)*$a;Za=Oa+.5*(Math.random()-.5)*ab;xb=Pa+.5*(Math.random()-.5)*bb}function Jb(){y.ca&&y.ca.remove();y.sb=y.element.isFakeVideo?!0:!1;y.ca=T.instance(Object.assign({isPot:!1,isFloat:!1},y.sb?{isFlipY:!1,array:y.element.arrayBuffer,width:y.element.videoWidth,height:y.element.videoHeight,
isKeepArray:!0}:{G:y.element}))}function Ia(){z.L("s50",[{type:"1i",name:"u1",value:0},{type:"mat2",name:"u32",value:y.m}])}function Ja(){y.F[0]=.5;y.F[1]=.5;var a=y.u[1]/y.u[0];Ta=Ua.R()/Ua.B();90===Math.abs(ma.rotate)&&(a=1/a);a>Ta?y.F[1]*=Ta/a:y.F[0]*=a/Ta;z.L("s52",[{name:"u45",type:"1f",value:Ta}]);y.m[0]=0;y.m[1]=0;y.m[2]=0;y.m[3]=0;switch(ma.rotate){case 0:y.m[0]=y.F[0];y.m[3]=y.F[1];break;case 180:y.m[0]=-y.F[0];y.m[3]=-y.F[1];break;case 90:y.m[1]=y.F[0];y.m[2]=-y.F[1];break;case -90:y.m[1]=
-y.F[0],y.m[2]=y.F[1]}ma.flipX&&(y.m[0]*=-1,y.m[2]*=-1)}function yb(){var a=y.element.videoWidth,c=y.element.videoHeight,d=y.u[0]!==a||y.u[1]!==c;d&&(y.u[0]=a,y.u[1]=c);return d}function fb(a,c){if(ia===ba.error)return!1;y.element=a;yb();c&&c();return!0}function Kb(a,c,d){a&&a();y.ua={video:{facingMode:{ideal:ma.facingMode},width:{min:ma.minWidth,max:ma.maxWidth,ideal:ma.idealWidth},height:{min:ma.minHeight,max:ma.maxHeight,ideal:ma.idealHeight}},audio:!1};ma.deviceId&&(y.ua.deviceId=ma.deviceId);
V.get(y.element?y.element:V.Fd(),function(e){c&&c(e);d(e)},function(){Ha("WEBCAM_UNAVAILABLE")},y.ua)}function Ha(a){ia!==ba.error&&(ia=ba.error,L.ta&&L.ta(a))}var pa={mf:function(a){return Math.ceil(Math.log2(a))},Nd:function(a){return Math.log2(a)},Bf:function(a){return 0===Math.log2(a)%1},Ce:function(a){var c=[0,0,0,0];a.forEach(function(d){c[0]+=d[0];c[1]+=d[1];c[2]+=d[2];c[3]+=d[3]});return c},De:function(a,c,d){return Math.min(Math.max(a,c),d)},Ge:function(a){return a*Math.PI/180},Hf:function(a,
c){c=Math.pow(10,c);return Math.round(a*c)/c},If:function(a){return Math.round(1E6*a)/1E6},pf:function(a,c){return(100*a/c).toFixed(3)},S:function(a,c,d){return a*(1-d)+c*d},qd:function(a,c){return pa.hd(a-c)},hd:function(a){for(;a>Math.PI;)a-=2*Math.PI;for(;a<=-Math.PI;)a+=2*Math.PI;return a},Ie:function(a,c){return Math.abs(pa.qd(a,c))},ue:function(a,c){return Math.atan2(Math.sin(a)+Math.sin(c),Math.cos(a)+Math.cos(c))}},Hb={get:function(a,c,d){var e=new XMLHttpRequest;e.open("GET",a,!0);e.withCredentials=
!1;e.onreadystatechange=function(){4===e.readyState&&(200===e.status||0===e.status?c(e.responseText):"undefined"!==typeof d&&d(e.status))};e.send()},jf:function(a,c){Hb.get(a,function(d){c(JSON.parse(d))})},Ff:function(a,c,d){var e=new XMLHttpRequest;e.open("POST",a,!0);e.setRequestHeader("Content-type","application/x-www-form-urlencoded");e.onreadystatechange=function(){4!==e.readyState||200!==e.status&&0!==e.status||d(e.responseText)};e.send(c)},Ze:function(a,c){var d=new XMLHttpRequest;d.open("POST",
a,!0);d.responseType="arraybuffer";d.onload=function(){c(d.response)};d.send()}},eb={Tf:function(a,c,d){a=Math.min(Math.max((d-a)/(c-a),0),1);return a*a*(3-2*a)},Pa:function(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)},Te:function(a,c,d,e){return Math.pow(Math.min(Math.max((e-a)/(c-a),0),1),d)},Xf:function(){return 0},Ef:function(){return 1},Df:function(a){return a},Qe:function(a){return a*a},Ve:function(a){return a*(2-a)},Ne:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},Le:function(a){return a*
a*a},Ue:function(a){return--a*a*a+1},Me:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},Re:function(a){return a*a*a*a},We:function(a){return 1- --a*a*a*a},Oe:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},Se:function(a){return a*a*a*a*a},Xe:function(a){return 1+--a*a*a*a*a},Pe:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}},Zb={vd:function(a,c,d){switch(a){case "relu":return d+"=max(vec4(0.,0.,0.,0.),"+c+");";case "elu":return d+"=mix(exp(-abs("+c+"))-vec4(1.,1.,1.,1.),"+c+",step(0.,"+
c+"));";case "elu01":return d+"=mix(0.1*exp(-abs("+c+"))-vec4(0.1,0.1,0.1,0.1),"+c+",step(0.,"+c+"));";case "arctan":return d+"=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}},z=function(){function a(u,t,E){t=u.createShader(t);u.shaderSource(t,E);u.compileShader(t);return u.getShaderParameter(t,u.COMPILE_STATUS)?t:!1}function c(u,t,E){t=a(u,u.VERTEX_SHADER,t);E=a(u,u.FRAGMENT_SHADER,E);u===b&&r.push(t,E);var O=u.createProgram();u.attachShader(O,t);u.attachShader(O,
E);u.linkProgram(O);return O}function d(u,t){void 0===t.ja&&(t.ja="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===t.Da&&(t.Da=["a0"]);void 0===t.qa&&(t.qa=[2]);if(void 0===t.precision||"highp"===t.precision)t.precision=h;t.id=x++;void 0!==t.$d&&t.$d.forEach(function(O,Z){t.a=t.a.replace(O,t.Wa[Z])});t.Hb=0;t.qa.forEach(function(O){t.Hb+=4*O});t.ha=c(u,t.ja,"precision "+t.precision+" float;\n"+t.a);t.j={};t.c.forEach(function(O){t.j[O]=
u.getUniformLocation(t.ha,O)});t.attributes={};t.ra=[];t.Da.forEach(function(O){var Z=u.getAttribLocation(t.ha,O);t.attributes[O]=Z;t.ra.push(Z)});if(t.f){u.useProgram(t.ha);f=t;q=t.id;for(var E in t.f)u.uniform1i(t.j[E],t.f[E])}t.qb=!0}function e(u){ua.fe(J);q!==u.id&&(J.J(),q=u.id,f=u,b.useProgram(u.ha),u.ra.forEach(function(t){0!==t&&b.enableVertexAttribArray(t)}))}function g(u,t,E){d(u,t,E);u.useProgram(t.ha);u.enableVertexAttribArray(0);q=-1;return f=t}function m(){return{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
c:["u1"],f:{u1:0}}}var r=[],q=-1,f=null,x=0,B=!1,h="highp",w=["u1"],k=["u0"],D={u1:0},H={u0:0},C={u1:0,u2:1},l={u3:0},v={s0:m(),s1:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:w,f:D,precision:"lowp"},s2:{a:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",c:["u1","u2"],f:C},s3:{a:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
c:w,f:D},s4:{a:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",c:["u1","u2"],f:C},s5:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",c:w,f:D},s6:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",c:w,f:D},s7:{a:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",
c:["u0","u4"],f:H},s8:{a:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,f);gl_FragColor=b*g;}",c:["u0","u4"],f:H},s9:{a:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",c:w,f:D},s10:{a:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",
c:["u1","u5","u6"],f:{u1:0,u5:1}},s11:{a:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",c:["u1","u7"],f:D},s12:{a:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=j(a);}",
c:["u1","u8"],f:D},s13:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",c:k,f:H},s14:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",c:k,f:H},s15:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",c:k,f:H},s16:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",
c:k,f:H},s17:{a:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",c:["u0","u6","u9"],f:{u0:0,u6:1,u9:2}},s18:{a:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",c:k,f:H},s19:{a:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=log(f+a);gl_FragColor=b;}",
c:k,f:H},s20:{a:"uniform sampler2D u0,u10;uniform float u11;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u10,e);float b=u11*u11;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",c:["u0","u10","u11"],f:{u0:0,u10:1}},s21:{a:"uniform sampler2D u1;uniform vec2 u12;varying vec2 vv0;void main(){float a=u12.x*u12.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u12.y),f=floor(u12.x*fract(b*u12.y)),g=(f*u12.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
c:["u1","u12"],f:D},s22:{a:"uniform sampler2D u13,u14,u15;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u13,b),f=texture2D(u14,c);gl_FragColor=d*f;}",c:["u13","u14","u15"],f:{u14:0,u13:1,u15:2}},s23:{a:"uniform float u16;uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec2 a=fract(vv0*u16);vec4 b=texture2D(u13,vv0),c=texture2D(u14,a);gl_FragColor=b*c;}",c:["u14","u13","u16"],f:{u14:0,u13:1}},s24:{a:"uniform float u16;uniform sampler2D u13,u14,u17,u18,u19,u20;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 h=vv0*u16,l=floor(h),c=h-l;vec4 m=texture2D(u13,vv0),d=texture2D(u14,c),a=texture2D(u20,vv0);a=a*255.;vec4 n=texture2D(u17,c),o=texture2D(u18,c),p=texture2D(u19,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b;d=i*d+j*n+k*o+q*p,gl_FragColor=m*d;}",
c:"u13 u14 u16 u20 u17 u18 u19".split(" "),f:{u14:0,u13:1,u20:3,u17:4,u18:5,u19:6}},s25:{a:"uniform sampler2D u13,u14,u21;uniform float u16,u22,u23,u24;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u22*vv0),b=u22*vv0-a;float c=u16/u22;vec2 d=floor(b*c),f=b*c-d,g=(a+f)/u22;float k=u22*u24/u16;vec2 l=k*d,h=(l+f*u23)/u24,i=step(h,j);vec4 m=texture2D(u13,g),n=texture2D(u14,h),o=m*n*i.x*i.y,p=texture2D(u21,g);gl_FragColor=o*u23*u23+p;}",c:"u13 u14 u16 u22 u23 u24 u21".split(" "),f:{u14:0,
u13:1,u21:2}},s26:{a:"uniform sampler2D u13,u14;varying vec2 vv0;void main(){vec4 a=texture2D(u13,vv0),b=texture2D(u14,vv0);gl_FragColor=a*b;}",c:["u13","u14"],f:{u14:0,u13:1}},s27:{a:"uniform sampler2D u1,u21;uniform float u25;varying vec2 vv0;void main(){gl_FragColor=texture2D(u21,vv0)+u25*texture2D(u1,vv0);}",c:["u1","u21","u25"],f:{u1:0,u21:1}},s28:{a:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
c:w,f:D,precision:"lowp"},s29:{a:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",c:["u1","u26"],f:D,precision:"lowp"},s30:{a:"varying vec2 vv0;uniform sampler2D u1;uniform float u26;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u26)).rgb,c=texture2D(u1,vv0+vec2(u26,u26)).rgb,d=texture2D(u1,vv0+vec2(u26,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
c:["u1","u26"],f:D,precision:"lowp"},s31:{a:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u27,vv0.y-u27))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u27))*2.,b-=texture2D(u1,vec2(vv0.x+u27,vv0.y-u27))*1.,b+=texture2D(u1,vec2(vv0.x-u27,vv0.y+u27))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u27))*2.,b+=texture2D(u1,vec2(vv0.x+u27,vv0.y+u27))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
c:["u1","u2","u27"],f:C},s32:{a:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u27;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u27,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",c:["u1","u2","u27"],f:C},s33:{a:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u7*g;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*h),d=texture2D(u3,a+u7*i),j=texture2D(u3,a+u7),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
c:["u3","u7"],f:l},s34:{a:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*k),d=texture2D(u3,a+u7*l),g=texture2D(u3,a+u7),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*m),d=f(a+u7*2.),g=f(a+u7*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",c:["u3","u7"],f:l},s35:{a:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
c:["u1"],f:D,precision:"lowp"},s36:{a:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u7)+2002./e*texture2D(u1,vv0-2.*u7)+3003./e*texture2D(u1,vv0-u7)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u7)+2002./e*texture2D(u1,vv0+2.*u7)+1001./e*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",c:["u7","u1"],f:D,precision:"lowp"},s37:{a:"uniform sampler2D u1,u28,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u28,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",
c:["u1","u28","u29"],f:{u1:0,u28:1,u29:2}}},F={s38:{a:"uniform float u16,u30;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u21,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u16,xyTo=floor(vv0*u16+eps2);float weightSize=toSparsity*u16;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u16,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:["u16","u13","u14","u21","u30"],Wa:["1.1111","gl_FragColor\\*=2.2222;"]},s39:{a:"uniform float u16,u30,u24;uniform sampler2D u13,u14,u21;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u21,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u24,xyTo=floor(vv0*u16+eps2);float weightSize=fromSparsity*u24;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u16;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u24,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u13,uvWeight)*texture2D(u14,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
c:"u16 u24 u13 u14 u21 u30".split(" "),Wa:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},J={Oa:function(){return B},D:function(){if(!B){h="highp";for(var u in v)d(b,v[u],u);z.set("s0");b.enableVertexAttribArray(0);B=!0}},Uc:function(u){u.forEach(function(t){J.Kb(t)})},Kb:function(u){v[u.id]=u;d(b,u,u.id)},oc:function(u,t,E){t||(t=u);v[t]=Object.create(F[u]);v[t].Jd=!0;F[u].Wa&&F[u].Wa.forEach(function(O,Z){v[t].a=v[t].a.replace(new RegExp(O,"g"),E[Z])});d(b,v[t],t)},set:function(u){e(v[u])},Xa:function(u){return g(u,
m(),"s40")},Db:function(u){return g(u,{a:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",c:[],precision:"highp"},"s41")},sd:function(u){return"undefined"===typeof v[u]?!1:v[u].qb},J:function(){-1!==q&&(q=-1,f.ra.forEach(function(u){0!==u&&b.disableVertexAttribArray(u)}))},Fb:function(){var u=0;f.ra.forEach(function(t,E){E=f.qa[E];b.vertexAttribPointer(t,E,b.FLOAT,!1,f.Hb,u);u+=4*E})},Wb:function(){b.enableVertexAttribArray(0)},ma:function(){J.Ya(b)},Ya:function(u){u.vertexAttribPointer(f.ra[0],2,u.FLOAT,
!1,8,0)},Kc:function(u,t){b.uniform1i(f.j[u],t)},A:function(u,t){b.uniform1f(f.j[u],t)},za:function(u,t,E){b.uniform2f(f.j[u],t,E)},Nf:function(u,t){b.uniform2fv(f.j[u],t)},Of:function(u,t){b.uniform3fv(f.j[u],t)},ge:function(u,t,E,O){b.uniform3f(f.j[u],t,E,O)},Pf:function(u,t,E,O,Z){b.uniform4f(f.j[u],t,E,O,Z)},Eb:function(u,t){b.uniform4fv(f.j[u],t)},Qf:function(u,t){b.uniformMatrix2fv(f.j[u],!1,t)},Rf:function(u,t){b.uniformMatrix3fv(f.j[u],!1,t)},Sf:function(u,t){b.uniformMatrix4fv(f.j[u],!1,
t)},L:function(u,t){J.set(u);t.forEach(function(E){switch(E.type){case "4f":b.uniform4fv(f.j[E.name],E.value);break;case "3f":b.uniform3fv(f.j[E.name],E.value);break;case "2f":b.uniform2fv(f.j[E.name],E.value);break;case "1f":b.uniform1f(f.j[E.name],E.value);break;case "1i":b.uniform1i(f.j[E.name],E.value);break;case "mat2":b.uniformMatrix2fv(f.j[E.name],!1,E.value);break;case "mat3":b.uniformMatrix3fv(f.j[E.name],!1,E.value);break;case "mat4":b.uniformMatrix4fv(f.j[E.name],!1,E.value)}})},lf:function(){return"lowp"},
h:function(){b.disableVertexAttribArray(0);J.J();for(var u in v){var t=v[u];t.qb&&(t.qb=!1,b.deleteProgram(t.ha));t.Jd&&delete v[u]}r.forEach(function(E){b.deleteShader(E)});r.splice(0);x=0;B=!1}};return J}(),b=null,Ua=function(){function a(h){console.log("ERROR in ContextFF: ",h);return!1}function c(h){function w(){Fa.h();D.getExtension("WEBGL_lose_context").loseContext()}if(navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1"))return!1;var k=document.createElement("canvas");k.setAttribute("width",
1);k.setAttribute("height",1);var D=null;try{D=k.getContext("webgl2",h)}catch(H){return!1}if(!D)return!1;d(D);ca.Xb(D);h=ca.bb(D);if(!h.$&&!h.o)return w(),!1;h=Fa.Ob(D,h);w();return h?!0:!1}function d(h){h.clearColor(0,0,0,0);h.disable(h.DEPTH_TEST);h.disable(h.BLEND);h.disable(h.DITHER);h.disable(h.STENCIL_TEST);h.disable(h.SCISSOR_TEST);h.GENERATE_MIPMAP_HINT&&h.hint(h.GENERATE_MIPMAP_HINT,h.FASTEST);h.disable(h.SAMPLE_ALPHA_TO_COVERAGE);h.disable(h.SAMPLE_COVERAGE);h.depthFunc(h.LEQUAL);h.clearDepth(1)}
var e=null,g=null,m=null,r=null,q=!0,f=null,x=null,B={B:function(){return e.width},R:function(){return e.height},bf:function(){return e},af:function(){return b},aa:function(){return q},flush:function(){b.flush()},yd:function(){f||(f=new Uint8Array(e.width*e.height*4));b.readPixels(0,0,e.width,e.height,b.RGBA,b.UNSIGNED_BYTE,f);return f},df:function(){return e.toDataURL("image/jpeg")},ef:function(){sa.H();g||(g=document.createElement("canvas"),m=g.getContext("2d"));g.width=e.width;g.height=e.height;
for(var h=B.yd(),w=m.createImageData(g.width,g.height),k=g.width,D=g.height,H=w.data,C=0;C<D;++C)for(var l=D-C-1,v=0;v<k;++v){var F=4*(C*k+v),J=4*(l*k+v);H[F]=h[J];H[F+1]=h[J+1];H[F+2]=h[J+2];H[F+3]=h[J+3]}m.putImageData(w,0,0);return g.toDataURL("image/png")},cf:function(h){!g&&h&&(g=document.createElement("canvas"),m=g.getContext("2d"));var w=h?g:document.createElement("canvas");w.width=e.width;w.height=e.height;(h?m:w.getContext("2d")).drawImage(e,0,0);return w},D:function(h){h.nd&&!h.ab?e=document.getElementById(h.nd):
h.ab&&(e=h.ab);e||(e=document.createElement("canvas"));e.width=h&&void 0!==h.width?h.width:512;e.height=h&&void 0!==h.height?h.height:512;"undefined"===typeof h&&(h={});void 0===h.premultipliedAlpha&&(h.premultipliedAlpha=!1);void 0===h.sc&&(h.sc=!0);void 0===h.antialias&&(h.antialias=!1);if(!b){var w={antialias:h.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:h.premultipliedAlpha,stencil:!1,depth:h.sc};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(w.antialias=!1);var k=c(w);!k&&w.antialias&&(w.antialias=!1,k=c(w));k&&(b=e.getContext("webgl2",w));b?q=!0:((b=e.getContext("webgl",w))||(b=e.getContext("experimental-webgl",w)),q=!1)}if(!b)return a("WebGL1 and 2 are not enabled");(r=b.getExtension("WEBGL_lose_context"))&&h.Cc&&(x=h.Cc,e.addEventListener("webglcontextlost",x,!1));if(!ca.D())return a("Not enough GL capabilities");d(b);z.D();S.D();return Fa.Ob(b,ca.xd())?!0:a("Cannot filter float textures")},h:function(){b&&ca.h();r&&x&&(e.removeEventListener("webglcontextlost",
x,!1),x=null);f=m=g=e=null}};return B}(),ua=function(){function a(){null===c&&("undefined"!==typeof z?c=z:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;a();return{fe:function(d){c!==d&&(c&&c.J(),c=d)},Oa:function(){return c.Oa()},ma:function(){return c.ma()},Ya:function(d){return c.Ya(d)},Fb:function(){return c.Fb()},J:function(){return c.J()},set:function(d){return c.set(d)},Xa:function(d){a();return c.Xa(d)},Db:function(d){a();return c.Db(d)},h:function(){return c.h()}}}(),Da=function(){function a(n){b.bindTexture(b.TEXTURE_2D,
n)}function c(n){O[0]=n;n=Z[0];var M=n>>16&32768,K=n>>12&2047,p=n>>23&255;return 103>p?M:142<p?M|31744|((255==p?0:1)&&n&8388607):113>p?(K|=2048,M|(K>>114-p)+(K>>113-p&1)):M=(M|p-112<<10|K>>1)+(K&1)}function d(n){var M=new Uint16Array(n.length);n.forEach(function(K,p){M[p]=c(K)});return M}function e(){if(null!==na.ob)return na.ob;var n=m(d([1,1,1,1]));return null===n?!0:na.ob=n}function g(){if(null!==na.pb)return na.pb;var n=m(new Uint8Array([255,255,255,255]));return null===n?!0:na.pb=n}function m(n){if(!ua.Oa()||
!H)return null;var M=null;try{var K=b.getError();if("FUCKING_BIG_ERROR"===K)return!1;M=G.instance({isFloat:!1,I:!0,array:n,width:1});K=b.getError();if(K!==b.NO_ERROR)return!1}catch(p){return!1}ka.H();b.viewport(0,0,1,1);b.clearColor(0,0,0,0);b.clear(b.COLOR_BUFFER_BIT);ua.set("s0");M.Mb(0);la.g(!0,!0);n=new Uint8Array(4);b.readPixels(0,0,1,1,b.RGBA,b.UNSIGNED_BYTE,n);n=.9<n[0];M.remove();ka.Y();return n}var r=0,q=null,f=0,x=null,B=null,h=null,w=null,k=null,D=null,H=!1,C=[],l={isFloat:!1,isPot:!0,
isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,G:null,Id:!1,I:!1,fa:null,Ra:4,ub:0},v=!1,F=null,J=null,u=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],t=!1,E=!1,O=new Float32Array(1),Z=new Int32Array(O.buffer),na={ob:null,pb:null},G={D:function(){H||(k=[b.RGB,null,b.RGB,b.RGBA],D=[b.RGB,null,b.RGB,b.RGBA],q=[b.TEXTURE0,b.TEXTURE1,b.TEXTURE2,b.TEXTURE3,b.TEXTURE4,b.TEXTURE5,b.TEXTURE6,b.TEXTURE7],
t="undefined"!==typeof JEContext,E="undefined"!==typeof ca,t&&JEContext.Cf()&&q.push(b.TEXTURE8,b.TEXTURE9),x=[-1,-1,-1,-1,-1,-1,-1,-1],w=[b.UNSIGNED_BYTE,b.FLOAT,b.FLOAT],H=!0)},Hd:function(){if(!B){for(var n=new Float32Array(16384),M=0;16384>M;++M)n[M]=2*Math.random()-1;B={random:G.instance({isFloat:!0,isPot:!0,array:n,width:64}),Pc:G.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}G.se()},uf:function(){return B.Pc},se:function(){w[1]=ca.mb(b)},be:function(){D=k=[b.RGBA,
b.RGBA,b.RGBA,b.RGBA]},Gf:function(n,M){z.set("s1");ka.H();var K=n.B(),p=n.R();b.viewport(0,0,K,p);n.b(0);la.g(!1,!1);b.readPixels(0,0,K,p,b.RGBA,b.UNSIGNED_BYTE,M)},ec:function(n,M,K,p,ea,va,Ba){n.activeTexture(n.TEXTURE0);var qa=n.createTexture();n.bindTexture(n.TEXTURE_2D,qa);ea=ea instanceof Float32Array?ea:new Float32Array(ea);0!==pa.Nd(ea.length)%1&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE));n.texParameteri(n.TEXTURE_2D,
n.TEXTURE_MAG_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,va);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,K,p,0,n.RGBA,n.FLOAT,ea);n.bindTexture(n.TEXTURE_2D,null);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);Ba&&(ka.Y(),z.set("s0"));n.viewport(0,0,K,p);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,M,0);n.bindTexture(n.TEXTURE_2D,qa);Ba?la.g(!0,!0):S.Ja(n);n.deleteTexture(qa);H&&(x[0]=-1,h=null,r=0)},instance:function(n){function M(A){var N=
b.getError();if("FUCKING_BIG_ERROR"===N)return!1;b.texImage2D(b.TEXTURE_2D,0,fa,da,ha,A);N=b.getError();N!==b.NO_ERROR&&da!==b.RGBA&&(da=b.RGBA,b.texImage2D(b.TEXTURE_2D,0,fa,da,ha,A));return!0}function K(){if(!Lb){a(ra);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,wa);p.isPot?(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,p.isMirrorX?b.MIRRORED_REPEAT:b.REPEAT),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,p.isMirrorY?b.MIRRORED_REPEAT:b.REPEAT)):(b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),
b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE));p.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&b.texParameterf(b.TEXTURE_2D,JEContext.ff().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.ve);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,p.isLinear?b.LINEAR:b.NEAREST);p.isLinear?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,p.isMipmap&&!Ka?b.NEAREST_MIPMAP_LINEAR:b.LINEAR):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,p.isMipmap&&!Ka?b.NEAREST_MIPMAP_NEAREST:b.NEAREST);
da=k[p.Ra-1];fa=D[p.Ra-1];ha=w[va];if(ca.aa()){var A=b.RGBA32F;da===b.RGBA&&ha===b.FLOAT?p.isMipmap||p.isLinear?fa=Fa.Ad(b):ca.Pb()?A&&(fa=A):fa=b.RGBA16F||b.RGBA:da===b.RGB&&ha===b.FLOAT&&A&&(fa=A,da=b.RGBA)}if(p.I&&!p.isFloat||p.isFloat&&p.isMipmap&&Fa.Md())(A=b.RGBA16F)&&(fa=A),ha=ca.mb(b);p.ub&&(gb=p.ub);p.isSrgb&&4===p.Ra&&(da=JEContext.sf());if(p.G)M(p.G);else if(p.url)M(Ga);else if(xa){A=xa;try{"FUCKING_BIG_ERROR"!==b.getError()&&(b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,A),b.getError()!==
b.NO_ERROR&&(b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null),b.getError()!==b.NO_ERROR&&b.texImage2D(b.TEXTURE_2D,0,b.RGBA,P,Q,0,b.RGBA,b.UNSIGNED_BYTE,null)))}catch(kc){b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null)}p.isKeepArray||(xa=null)}else A=b.getError(),"FUCKING_BIG_ERROR"!==A&&(b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null),A=b.getError(),A!==b.NO_ERROR&&(da=b.RGBA,p.I&&ha!==b.FLOAT&&(ha=b.FLOAT,b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,null))));if(p.isMipmap)if(!Ka&&Y)Y.lb(),hb=!0;
else if(Ka){A=Math.log2(Math.min(P,Q));Va=Array(1+A);Va[0]=ra;for(var N=1;N<=A;++N){var ja=Math.pow(2,N),R=P/ja;ja=Q/ja;var La=b.createTexture();a(La);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texImage2D(b.TEXTURE_2D,0,fa,R,ja,0,da,ha,null);a(null);Va[N]=La}hb=!0}a(null);x[r]=-1;wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1);ib=!0;p.fa&&Y&&(p.fa(Y),p.fa=null)}}var p=Object.assign({},l,n),ea=f++;null===p.isFlipY&&(p.isFlipY=
p.url||p.array?!0:!1);p.data&&(p.array="string"===typeof p.data?Rb(p.data):p.isFloat?new Float32Array(p.data):new Uint8Array(p.data),p.isFlipY=!1);var va=0,Ba=p.G?!0:!1,qa=null,zb=null,Mb=!1,Ab=null;p.I=p.I||p.isFloat;p.I&&(va=1);p.Id||ca.aa()||!p.isFloat||!E||ca.Pb()||(p.isFloat=!1);p.isFloat&&(va=2);p.isAnisotropicFiltering&&t&&!JEContext.wf()&&(p.isAnisotropicFiltering=!1);var ra=b.createTexture(),Ga=null,xa=!1,P=0,Q=0,ib=!1,Lb=!1,jb=!1,ya=null,Ca=null,Bb=null,Xa=null,fa=null,da=null,ha=null,wa=
p.isFlipY,$b=(n=p.I&&p.isMipmap)&&Fa.dd(),Ka=n&&$b?!0:!1,Va=null,gb=-1,hb=!1,Ma={uc:!1,Nb:null,fc:null};p.width&&(P=p.width,Q=p.height?p.height:P);var Y={get:function(){return ra},B:function(){return P},R:function(){return Q},vf:function(){return p.url},xf:function(){return p.isFloat},zf:function(){return p.I},Af:function(){return p.isLinear},lb:function(){b.generateMipmap(b.TEXTURE_2D)},bd:function(A,N){Ka?(A||(A=Y.lc()),Y.$a(N),a(Va[A]),x[N]=-1):Y.b(N)},lc:function(){-1===gb&&(gb=Math.log(P)/Math.log(2));
return gb},ud:function(A){if(Ka){A||(A=Y.lc());z.set("s11");Y.$a(0);for(var N=P,ja=Q,R=1;R<=A;++R)N/=2,ja/=2,z.za("u7",.25/N,.25/ja),b.viewport(0,0,N,ja),a(Va[R-1]),b.framebufferTexture2D(ka.Ma(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,Va[R],0),la.g(!1,1===R);x[0]=-1}else Y.lb()},$a:function(A){A!==r&&(b.activeTexture(q[A]),r=A)},b:function(A){if(!ib)return!1;Y.$a(A);if(x[A]===ea)return!1;a(ra);x[A]=ea;return!0},Mb:function(A){b.activeTexture(q[A]);r=A;a(ra);x[A]=ea},l:function(){h=Y;b.framebufferTexture2D(ka.Ma(),
b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ra,0)},P:function(){h=Y;b.viewport(0,0,P,Q);b.framebufferTexture2D(ka.Ma(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,ra,0)},Gb:G.Gb,resize:function(A,N){P=A;Q=N;K()},clone:function(A){A=G.instance({width:P,height:Q,I:p.I,isFloat:p.isFloat,isLinear:p.isLinear,isMirrorY:p.isMirrorY,isFlipY:A?!wa:wa,isPot:p.isPot});ua.set("s0");ka.Y();A.l();b.viewport(0,0,P,Q);Y.b(0);la.g(!0,!0);return A},he:function(){b.viewport(0,0,P,Q)},remove:function(){b.deleteTexture(ra);Lb=!0;C.splice(C.indexOf(Y),
1);Y=null},refresh:function(){Y.Mb(0);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);Ba?b.texImage2D(b.TEXTURE_2D,0,fa,da,b.UNSIGNED_BYTE,p.G):b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,xa);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Tb:function(){var A=P*Q*4;Ca=[new Uint8Array(A),new Uint8Array(A),new Uint8Array(A),new Uint8Array(A)];ya=[new Float32Array(Ca[0].buffer),new Float32Array(Ca[1].buffer),new Float32Array(Ca[2].buffer),new Float32Array(Ca[3].buffer)];Bb=new Uint8Array(4*A);Xa=new Float32Array(Bb.buffer);
jb=!0},Hc:function(){jb||Y.Tb();b.readPixels(0,0,P,4*Q,b.RGBA,b.UNSIGNED_BYTE,Bb);for(var A=P*Q,N=2*A,ja=3*A,R=0;R<A;++R)ya[0][R]=Xa[R],ya[1][R]=Xa[R+A],ya[2][R]=Xa[R+N],ya[3][R]=Xa[R+ja];return ya},Yd:function(){Ma.uc||(Ma.Nb=new Uint8Array(P*Q*4),Ma.fc=new Float32Array(Ma.buffer),Ma.uc=!0);b.readPixels(0,0,P,Q,b.RGBA,b.UNSIGNED_BYTE,Ma.Nb);return Ma.fc},Ub:function(A){ka.H();z.set("s12");Y.b(0);if(A)b.viewport(0,0,P,Q),z.Eb("u8",.25,.25,.25,.25),la.g(!1,!0);else for(A=0;4>A;++A)b.viewport(0,Q*A,
P,Q),z.Eb("u8",u[A]),la.g(!1,0===A)},re:function(A){var N=ha===w[0]&&!g();a(ra);wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);N?(Mb||(qa=document.createElement("canvas"),qa.width=P,qa.height=Q,zb=qa.getContext("2d"),Ab=zb.createImageData(P,Q),Mb=!0),Ab.data.set(A),zb.putImageData(Ab,0,0),b.texImage2D(b.TEXTURE_2D,0,fa,da,ha,qa)):b.texImage2D(b.TEXTURE_2D,0,fa,P,Q,0,da,ha,A);x[r]=ea;wa&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Vf:function(A,N){a(ra);N&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,
0,fa,da,ha,A);x[r]=ea;N&&b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,!1)},Lf:function(A,N){var ja=P*Q,R=4*ja;A=p.I?A?"RGBE":"JSON":"RGBA";N&&(A=N);N=ca.aa()&&!1;var La=null;switch(A){case "RGBE":La="s42";break;case "JSON":La=N?"s0":"s12";break;case "RGBA":case "RGBAARRAY":La="s6"}jb||("RGBA"===A||"RGBE"===A||"RGBAARRAY"===A?(Ca=new Uint8Array(R),jb=!0):"JSON"!==A||N||Y.Tb());ka.H();z.set(La);Y.b(0);R=null;if("RGBA"===A||"RGBE"===A||"RGBAARRAY"===A){b.viewport(0,0,P,Q);la.g(!0,!0);b.readPixels(0,0,P,Q,b.RGBA,
b.UNSIGNED_BYTE,Ca);if("RGBAARRAY"===A)return{data:Ca};v||(F=document.createElement("canvas"),J=F.getContext("2d"),v=!0);F.width=P;F.height=Q;ja=J.createImageData(P,Q);ja.data.set(Ca);J.putImageData(ja,0,0);R=F.toDataURL("image/png")}else if("JSON"===A)if(N)R=new Float32Array(ja),b.viewport(0,0,P,Q),la.g(!0,!0),b.readPixels(0,0,P,Q,b.RGBA,b.FLOAT,R);else{for(R=0;4>R;++R)b.viewport(0,Q*R,P,Q),z.Eb("u8",u[R]),la.g(!R,!R);Y.Hc();R=Array(ja);for(N=0;N<ja;++N)R[4*N]=ya[0][N],R[4*N+1]=ya[1][N],R[4*N+2]=
ya[2][N],R[4*N+3]=ya[3][N]}return{format:A,data:R,width:P,height:Q,isMirrorY:p.isMirrorY,isFlipY:"RGBA"===A?p.isFlipY:!p.isFlipY}}};p.isMipmap&&!Ka&&ib&&!hb&&(Y.lb(),hb=!0);if(p.url)a(ra),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,1,1,0,b.RGBA,b.UNSIGNED_BYTE,null),Ga=new Image,Ga.He="Anonymous",Ga.crossOrigin="Anonymous",Ga.src=p.url,Ga.onload=function(){P=Ga.width;Q=Ga.height;K()};else if(p.G){var Nb=function(){P=void 0!==p.G.videoWidth?p.G.videoWidth:p.G.width;Q=void 0!==p.G.videoHeight?p.G.videoHeight:
p.G.height;P?K():setTimeout(Nb,1)};Nb()}else p.array?(p.I&&!p.isFloat?p.array instanceof Uint16Array?(xa=p.array,K()):e()?(xa=d(p.array),K()):(K(),G.ec(b,ra,Y.B(),Y.R(),p.array,wa,!0)):(xa=p.isFloat?p.array instanceof Float32Array?p.array:new Float32Array(p.array):p.array instanceof Uint8Array?p.array:new Uint8Array(p.array),K()),p.isKeepArray||(xa&&xa!==p.array&&(xa=null),delete p.array)):K();Y.rf=Y.B;p.fa&&ib&&(p.fa(Y),p.fa=null);C.push(Y);return Y},H:function(n){n!==r&&(b.activeTexture(q[n]),r=
n);x[n]=-1;a(null)},ye:function(n){B.random.b(n)},Gb:function(){h=null;b.framebufferTexture2D(ka.Ma(),b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0)},reset:function(){for(var n=0;n<q.length;++n)x[n]=-1;r=-1},Jf:function(){r=-1},oe:function(){for(var n=0;n<q.length;++n)G.H(n)},hc:function(){B&&(B.random.remove(),B.Pc.remove())},Uf:function(n,M){if("RGBA"===n.format||"RGBE"===n.format){var K=new Image;K.src=n.data;K.onload=function(){G.instance({isMirrorY:n.isMirrorY,isFlipY:n.isFlipY,isFloat:!1,G:K,fa:function(p){if("RGBA"===
n.format)M(p);else{var ea=n.width,va=n.height,Ba=G.instance({isMirrorY:n.isMirrorY,isFloat:!0,width:ea,height:va,isFlipY:n.isFlipY});ka.Y();b.viewport(0,0,ea,va);z.set("s43");Ba.l();p.b(0);la.g(!0,!0);G.H(0);M(Ba);b.flush();setTimeout(p.remove,50)}}})}}else"JSON"===n.format?M(G.instance({isFloat:!0,isFlipY:n.isFlipY,width:n.width,height:n.height,array:new Float32Array(n.data)})):M(!1)},h:function(){h&&(sa.Y(),G.Gb(),sa.H());G.oe();C.slice(0).forEach(function(n){n.remove()});C.splice(0);H=!1;f=0;"undefined"!==
typeof Fa&&Fa.h()}};return G}(),Tb=function(){return{instance:function(a){var c=[Da.instance(a),Da.instance(a)],d=[c[1],c[0]],e=d,g={ee:function(m){e[1].l();e[0].b(m);g.Mc()},Mf:function(m){e[1].P();e[0].b(m);g.Mc()},Mc:function(){e=e===c?d:c},refresh:function(){e[0].refresh();e[1].refresh()},b:function(m){e[0].b(m)},xe:function(m){e[1].b(m)},kf:function(){return e[0]},remove:function(){e[0].remove();e[1].remove();e=null}};return g}}}(),la=function(){function a(f){var x={X:null,C:null};x.X=f.createBuffer();
f.bindBuffer(f.ARRAY_BUFFER,x.X);f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),f.STATIC_DRAW);x.C=f.createBuffer();f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,x.C);f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),f.STATIC_DRAW);return x}var c=null,d=0,e=!1,g=[],m=-2,r=-2,q={reset:function(){r=m=-2},D:function(){e||(c=a(b),q.sa(),e=!0)},instance:function(f){var x=d++,B=f.C?f.C.length:0,h="undefined"===typeof f.mode?b.STATIC_DRAW:f.mode,w=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,
w);b.bufferData(b.ARRAY_BUFFER,f.X instanceof Float32Array?f.X:new Float32Array(f.X),h);m=x;var k=null,D=null,H=null;if(f.C){k=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,k);var C=null;65536>f.C.length?(C=Uint16Array,D=b.UNSIGNED_SHORT,H=2):(C=Uint32Array,D=b.UNSIGNED_INT,H=4);C=f.C instanceof C?f.C:new C(f.C);b.bufferData(b.ELEMENT_ARRAY_BUFFER,C,h);r=x}var l={cd:function(v){m!==x&&(b.bindBuffer(b.ARRAY_BUFFER,w),m=x);v&&ua.Fb()},$c:function(){r!==x&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,
k),r=x)},bind:function(v){l.cd(v);l.$c()},Je:function(){b.drawElements(b.TRIANGLES,B,D,0)},Ke:function(v,F){b.drawElements(b.TRIANGLES,v,D,F*H)},remove:function(){b.deleteBuffer(w);f.C&&b.deleteBuffer(k);l=null}};g.push(l);return l},sa:function(){-1!==m&&(b.bindBuffer(b.ARRAY_BUFFER,c.X),m=-1);-1!==r&&(b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,c.C),r=-1)},g:function(f,x){f&&la.sa();x&&ua.ma();b.drawElements(b.TRIANGLES,3,b.UNSIGNED_SHORT,0)},Ja:function(f){f=f||b;var x=a(f);f.bindBuffer(f.ARRAY_BUFFER,
x.X);f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,x.C);ua.Ya(f);f.drawElements(f.TRIANGLES,3,f.UNSIGNED_SHORT,0);f.deleteBuffer(x.X);f.deleteBuffer(x.C);q.reset();e&&(q.sa(),ua.ma())},hc:function(){var f=b,x=c;f.deleteBuffer(x.X);f.deleteBuffer(x.C)},h:function(){q.hc();g.forEach(function(f){f.remove()});b.bindBuffer(b.ARRAY_BUFFER,null);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,null);q.reset();e=!1;g.splice(0);d=0}};return q}(),ka=function(){var a=null,c=null,d=null,e=!1,g=[],m={v:-2,dc:1},r={Oa:function(){return e},
D:function(){if(!e){a=b.createFramebuffer();var q=ca.aa();c=q&&b.DRAW_FRAMEBUFFER?b.DRAW_FRAMEBUFFER:b.FRAMEBUFFER;d=q&&b.READ_FRAMEBUFFER?b.READ_FRAMEBUFFER:b.FRAMEBUFFER;e=!0}},gf:function(){return c},Bd:function(){return d},Ma:function(){return b.FRAMEBUFFER},qf:function(){return m},$e:function(){return a},instance:function(q){void 0===q.rc&&(q.rc=!1);var f=q.ca?q.ca:null,x=q.width,B=void 0!==q.height?q.height:q.width,h=a,w=null,k=!1,D=!1,H=0;f&&(x=x?x:f.B(),B=B?B:f.R());var C={Ic:function(){k||
(h=b.createFramebuffer(),k=!0,H=m.dc++)},Tc:function(){C.Ic();C.l();w=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,w);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,x,B);b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,w);b.clearDepth(1)},bind:function(l,v){H!==m.v&&(b.bindFramebuffer(c,h),m.v=H);f&&f.l();v&&b.viewport(0,0,x,B);l&&b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT)},we:function(){H!==m.v&&(b.bindFramebuffer(c,h),m.v=H)},clear:function(){b.clear(b.COLOR_BUFFER_BIT|
b.DEPTH_BUFFER_BIT)},Ee:function(){b.clear(b.COLOR_BUFFER_BIT)},Fe:function(){b.clear(b.DEPTH_BUFFER_BIT)},he:function(){b.viewport(0,0,x,B)},l:function(){H!==m.v&&(b.bindFramebuffer(c,h),m.v=H)},rtt:function(l){f=l;m.v!==H&&(b.bindFramebuffer(b.FRAMEBUFFER,h),m.v=H);l.l()},H:function(){b.bindFramebuffer(c,null);m.v=-1},resize:function(l,v){x=l;B=v;w&&(b.bindRenderbuffer(b.RENDERBUFFER,w),b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,x,B))},remove:function(){h===a||D||(b.bindFramebuffer(c,
h),b.framebufferTexture2D(c,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,null,0),w&&b.framebufferRenderbuffer(c,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,null),b.bindFramebuffer(c,null),b.deleteFramebuffer(h),w&&b.deleteRenderbuffer(w));D=!0}};q.rc&&C.Tc();g.push(C);return C},H:function(){b.bindFramebuffer(c,null);m.v=-1},pe:function(){b.bindFramebuffer(c,null);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.viewport(0,0,ca.B(),ca.R());m.v=-1},reset:function(){m.v=-2},Y:function(){0!==m.v&&(b.bindFramebuffer(c,a),m.v=
0)},clear:function(){b.viewport(0,0,ca.B(),ca.R());b.clear(b.COLOR_BUFFER_BIT)},h:function(){r.H();g.forEach(function(q){q.remove()});b.deleteFramebuffer(a);r.reset();e=!1;g.splice(0);m.v=-2;m.dc=1}};return r}(),ca=function(){function a(){d="undefined"===typeof Ua?JEContext:Ua;e=!0}function c(l,v){for(var F=0;F<l.length;++F){var J=v.getExtension(l[F]);if(J)return J}return null}var d=null,e=!1,g=!1,m=null,r=null,q=!1,f=null,x=!1,B=null,h=!1,w=null,k=null,D={$:!0,o:!0,kb:!0},H="undefined"===typeof window?
{}:window,C={D:function(){if(e)return!0;a();var l=b;if(!g){m=C.$b(l);if((q=(H.GL_EXT_FLOAT=m)?!0:!1)||C.aa())r=C.ac(l),H.GL_EXT_FLOATLINEAR=r;g=!0}if(!h){if(f=C.Ia(l))x=!0,H.GL_EXT_HALFFLOAT=f;if(x||C.aa())B=C.bc(l),H.GL_EXT_HALFFLOATLINEAR=B;h=!0}w=C.Yb(l);H.GL_EXT_COLORBUFFERFLOAT=w;k=C.Zb(l);H.GL_EXT_COLORBUFFERHALFFLOAT=k;ka.D();Da.D();if(!C.od())return!1;la.D();Da.Hd();return!0},B:function(){e||a();return d.B()},R:function(){e||a();return d.R()},aa:function(){e||a();return d.aa()},Xb:function(l){C.Yb(l);
C.Zb(l);C.$b(l);C.ac(l);C.Ia(l);C.bc(l)},Yb:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Zb:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),$b:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),ac:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),Ia:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float",
"WEBKIT_OES_texture_half_float"]),bc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),mb:function(l){var v=C.Ia(l);return v&&v.HALF_FLOAT_OES?v.HALF_FLOAT_OES:l.HALF_FLOAT||l.FLOAT},xd:function(){return D},Pb:function(){return D.$},Ae:function(){return D.o},ze:function(){return D.kb},ba:function(l,v,F){function J(){l.bindTexture(l.TEXTURE_2D,null);l.bindFramebuffer(u,null);l.deleteTexture(O);l.deleteFramebuffer(E)}var u=l.FRAMEBUFFER,
t=l.NEAREST,E=l.createFramebuffer();l.bindFramebuffer(u,E);var O=l.createTexture();l.bindTexture(l.TEXTURE_2D,O);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,t);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,t);l.texImage2D(l.TEXTURE_2D,0,v,1,1,0,l.RGBA,F,null);l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,O,0);if(l.checkFramebufferStatus(l.READ_FRAMEBUFFER||l.FRAMEBUFFER)!==l.FRAMEBUFFER_COMPLETE)return J(),!1;ua.Db(l);l.clearColor(0,0,0,0);l.viewport(0,0,1,1);l.disable(l.DEPTH_TEST);
l.clear(l.COLOR_BUFFER_BIT);la.Ja(l);l.bindFramebuffer(u,null);ua.Xa(l);l.activeTexture(l.TEXTURE0);l.bindTexture(l.TEXTURE_2D,O);la.Ja(l);v=new Uint8Array(4);l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,v);J();return 3<Math.abs(v[0]-127)?!1:!0},bb:function(l){var v={$:!1,o:!1};l.disable(l.BLEND);l.clearColor(0,0,0,0);l.clear(l.COLOR_BUFFER_BIT);l.RGBA32F&&C.ba(l,l.RGBA32F,l.FLOAT)&&(v.$=!0);!v.$&&C.ba(l,l.RGBA,l.FLOAT)&&(v.$=!0);var F=C.mb(l);l.RGBA16F&&C.ba(l,l.RGBA16F,F)&&(v.o=!0);!v.o&&C.ba(l,
l.RGBA,F)&&(v.o=!0);!v.o&&C.ba(l,l.RGBA,l.FLOAT)&&(v.o=!0);!v.o&&l.HALF_FLOAT&&F!==l.HALF_FLOAT&&C.ba(l,l.RGBA,l.HALF_FLOAT)&&(v.o=!0);l.RGBA16F&&(!v.o&&C.ba(l,l.RGBA16F,l.FLOAT)&&(v.o=!0),!v.o&&l.HALF_FLOAT&&F!==l.HALF_FLOAT&&C.ba(l,l.RGBA16F,l.HALF_FLOAT)&&(v.o=!0));return v},pd:function(){var l=ka.instance({width:1});l.Ic();var v=Da.instance({width:1,isFloat:!0,Ra:3});l.l();v.l();b.flush();b.checkFramebufferStatus(ka.Bd())!==b.FRAMEBUFFER_COMPLETE?(Da.be(),D.kb=!1):D.kb=!0;l.remove();v.remove()},
od:function(){var l=C.bb(b);Object.assign(D,l);if(!D.$&&!D.o)return!1;C.pd();return!0},h:function(){Da.h();ua.h();ka.h();la.h();e=!1}};return C}(),S=la,sa=ka,T=Da,Fa=function(){function a(v,F,J,u){k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,u?k.NEAREST_MIPMAP_NEAREST:k.LINEAR);var t=null;if(null!==J)try{t=k.getError();if("FUCKING_BIG_ERROR"===t)return!1;k.texImage2D(k.TEXTURE_2D,0,v,2,2,0,k.RGBA,F,J);t=k.getError();if(t!==k.NO_ERROR)return!1}catch(E){return!1}u&&k.generateMipmap(k.TEXTURE_2D);
k.clear(k.COLOR_BUFFER_BIT);S.Ja(k);t=k.getError();if("FUCKING_BIG_ERROR"===t)return!1;k.readPixels(0,0,1,1,k.RGBA,k.UNSIGNED_BYTE,B);t=k.getError();t===k.INVALID_OPERATION&&"undefined"!==typeof k.PIXEL_PACK_BUFFER&&(k.bindBuffer(k.PIXEL_PACK_BUFFER,null),k.readPixels(0,0,1,1,k.RGBA,k.UNSIGNED_BYTE,B),t=k.getError());if(t!==k.NO_ERROR)return!1;if(J=0!==B[0])f.Fc=F,f.qc=v;return J}function c(v,F){return D.$&&a(v,k.FLOAT,new Float32Array(w),F)?(q=r.Jb,!0):!1}function d(v,F,J){if(!D.o)return!1;var u=
ca.Ia(k);if(u&&u.HALF_FLOAT_OES&&a(v,u.HALF_FLOAT_OES,new Uint16Array(w),F)||k.HALF_FLOAT&&a(v,k.HALF_FLOAT,new Uint16Array(w),F)||a(v,k.FLOAT,new Float32Array(w),F))return q=r.pa,!0;k.bindTexture(k.TEXTURE_2D,J);k.texImage2D(k.TEXTURE_2D,0,k.RGBA,1,1,0,k.RGBA,k.UNSIGNED_BYTE,null);k.bindFramebuffer(f.Ga,l);Da.ec(k,J,1,1,new Float32Array(w),!1,!1);k.bindFramebuffer(f.Ga,null);k.bindTexture(k.TEXTURE_2D,J);return a(v,null,null,F)?(q=r.pa,!0):!1}function e(v,F,J){x=!0;if(d(v,!0,J)||c(F,!0))return!0;
x=!1;return d(v,!1,J)||c(F,!1)?!0:!1}function g(v){if(q===r.J){k=v||b;q=r.RGBA8;x=!0;ca.Xb(k);D||(D=ca.bb(k));sa.reset();l=k.createFramebuffer();f.Ga=k.DRAW_FRAMEBUFFER||k.FRAMEBUFFER;k.bindFramebuffer(f.Ga,null);k.clearColor(0,0,0,0);k.viewport(0,0,1,1);z.J();H=z.Xa(k);v=k.createTexture();k.activeTexture(k.TEXTURE0);k.bindTexture(k.TEXTURE_2D,v);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.REPEAT);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.REPEAT);k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,
k.NEAREST);C=v;var F=v=k.RGBA,J=k.RGBA16F,u=k.RGBA32F;u&&(v=u);J&&(F=J);if((J||u)&&e(F,v,C))return m(),!0;v=F=k.RGBA;if(e(F,v,C))return m(),!0;q=r.RGBA8;m();return!1}}function m(){k.deleteProgram(H.ha);k.deleteTexture(C);C=H=null}var r={J:-1,Jb:3,pa:2,RGBA8:0},q=r.J,f={Fc:null,qc:null,Ga:null},x=!0,B=new Uint8Array(4),h=[.8,1,.8,1],w=h.concat(h,h,h),k=null,D=null,H=null,C=null,l=null;return{dd:function(v){g(v);return x},Ob:function(v,F){q===r.J&&(typeof("undefined"!==F)&&(D=F),g(v));return q!==r.RGBA8},
yf:function(v){g(v);return q===r.Jb},Md:function(v){g(v);return q===r.pa},hf:function(v){g(v);return f.Fc},Ad:function(v){g(v);return f.qc},h:function(){k=null;x=!0;q=r.J;D=null}}}(),ac=function(){return{instance:function(a){var c=T.instance(a.alpha),d=T.instance(a.beta);return{rd:function(){c.b(1);d.b(2)}}}}}(),Pb=function(){return{instance:function(a){var c=null,d=!1,e=!1,g=null,m=!1,r=!1,q=null,f="undefined"===typeof a.preprocessing?!1:a.preprocessing,x="undefined"===typeof a.preprocessingSize?
a.size:a.preprocessingSize;a.mask&&(d=!0,W&&void 0!==W.Zc&&(a.mask=W.Zc+a.mask),c=T.instance({isFloat:!1,url:a.mask}));var B=!1;a.customInputShader&&(B="s44",z.Kb({name:"_",id:B,a:a.customInputShader,c:["uSource"],precision:"lowp"}),z.L(B,[{type:"1i",name:"_",value:0}]));switch(f){case "sobel":q="s31";m=!0;break;case "meanNormalization":q="s32";m=!0;break;case "grayScale":q="s28";m=!1;break;case "grayScaleTilt":q="s29";r=!0;m=!1;break;case "rgbGrayTilt":q="s30";r=!0;m=!1;break;case "copy":q=B?B:"s0";
break;case "inputLightRegulation":q=B?B:"s28";g=bc.instance({pc:x,Ec:a.size,Ac:a.nBlurPass,Ld:!1});e=!0;break;case "direct":case "none":q=!1;break;default:q="s3"}r&&z.L(q,[{name:"u26",type:"1f",value:a.tilt}]);d&&(q+="Mask");var h=T.instance({isFloat:!1,isPot:!1,width:a.size}),w={B:function(){return x},nb:function(){return w.B()},Dd:function(){return e?g.mc():h},K:function(){sa.Y();q&&(z.set(q),m&&z.A("u27",1/a.size),h.P(),d&&c.b(1),S.g(!1,!1),h.b(0),e&&g.process(h))},h:function(){h.remove();d&&c.remove()}};
return w}}}(),Qb=function(){return{instance:function(a){"undefined"===typeof a.disableNormalize&&(a.disableNormalize=!1);var c={input:null,ka:null,rb:null,U:null,Ta:null,yb:null,zb:null},d=null,e=[],g=[],m=!1,r=null,q=!0,f=-1,x=a.isReorganize?a.isReorganize:!1,B=a.kernelsNumber?!0:!1,h=a.dynPelu?ac.instance(a.dynPelu):!1,w=h?!0:!1,k={isEnabled:!1};a.Kd?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.Ua.nb(),q=!1):"full"===a.connectivityUp&&(a.sparsity=a.Ua.nb());var D={elu:"s15",elu01:"s16",
relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",dynPelu:"s17"}[a.activation],H=a.sparsity*a.sparsity,C=!1,l=a.size,v="";if(a.maxPooling){switch(a.maxPooling.size){case 2:v="s33";break;case 4:v="s34"}C=!0;l/=a.maxPooling.size;c.yb=T.instance({isFloat:!0,isPot:!1,width:l})}var F=void 0!==a.Td&&a.Td?!0:!1,J=null,u=null,t=null;if(F){J="s45"+a.index.toString();z.oc("s45",J,[((a.normalization.n-1)/2).toFixed(1)]);z.L(J,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/a.size,1/
a.size]},{type:"1f",name:"u6",value:a.normalization.alpha},{type:"1f",name:"u9",value:a.normalization.beta},{type:"1f",name:"u31",value:a.normalization.k}]);var E={isFloat:!0,isPot:!0,width:a.size};u=T.instance(E);t=T.instance(E)}var O=-1,Z=null;q&&(c.U=T.instance({isFloat:!0,isPot:!1,width:a.size}));c.ka=T.instance(a.bias);var na={B:function(){return a.size},nb:function(){return l},ic:function(){return a.classesCount},ad:function(G){d.b(G)},Wd:function(){a.remap&&a.remap.isEnabled&&(k={isEnabled:!0,
Pd:T.instance({isFloat:!1,isFlipY:!1,array:new Uint8Array(a.remap.maskTexture.data),width:a.remap.maskTexture.width,isPot:!1}),layers:a.remap.layers.map(function(G){return a.parent.Cd(G)}),depth:a.remap.depth})},de:function(){switch(a.connectivityUp){case "direct":Z=cc.instance(a.connectivity);break;case "square":Z=dc.instance(a.connectivity);break;case "squareFast":Z=ec.instance(a.connectivity,a.activation);break;case "full":Z=fc.instance(a.connectivity);break;case "conv":f=a.kernelsNumber,Z=gc.instance(a.connectivity),
x&&(c.Ta=T.instance({width:l,isFloat:!0,isFlipY:!1,isPot:!1}))}if(Z.na){var G=a.size*a.sparsity;O=Math.log(G/a.size)/Math.log(2);c.input=T.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:G,ub:O});c.rb=T.instance({isFloat:!0,isPot:!0,width:a.size})}},K:function(G){d=G;Z.na?(c.input.P(),B&&c.ka.b(2),Z.K(k),c.input.b(0),c.input.ud(O),c.rb.P(),B?z.set("s0"):(z.set("s27"),z.A("u25",H),c.ka.b(1)),c.input.bd(O,0),S.g(!1,!1),z.set(D),F?u.l():c.U.l(),c.rb.b(0),w&&h.rd(),S.g(!1,!1)):(c.U.P(),c.ka.b(1),Z.K());
F&&(z.set(J),t.l(),u.b(0),S.g(!1,!1),z.set("s46"),z.A("u6",1),c.U.l(),t.b(1),S.g(!1,!1));if(q)return C?(c.yb.P(),c.U.b(0),z.set(v),z.za("u7",1/a.size,1/a.size),S.g(!1,!1),G=c.yb):G=c.U,G.b(0),x&&(c.Ta.l(),z.set("s21"),z.za("u12",f,l/f),S.g(!1,!1),G=c.Ta,c.Ta.b(0)),G;G=c.U;a.disableNormalize||(z.set("gpuRawAvg"===m?"s8":"s7"),z.A("u4",1/a.size),c.zb.P(),c.U.b(0),S.g(!1,!1),G=c.zb);switch(m){case "cpuRGBA2Float":G.Ub(!1);G=na.Xd(G);r(G);break;case "cpuMeanFloat":G.Ub(!0);G=G.Yd();r(G);break;case "gpuRawAvg":case "gpuRaw":G.b(0);
case "none":r(G)}return!1},md:function(G){G&&"undefined"!==typeof G.Dc&&(m=G.Dc,r=G.Ud);c.U=T.instance({isFloat:!0,isPot:!0,isMipmap:!1,width:a.size});G="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var n=0,M=0,K=0;n<G;++n)e.push(M+(a.size-1-K)*a.size),g.push([-1,-1,-1,-1]),++M,M===a.size&&(M=0,++K);a.disableNormalize||(c.zb=T.instance({isFloat:!0,isPot:!0,width:a.size}))},Xd:function(G){var n=G.Hc();e.forEach(function(M,K){g[K][0]=n[0][M];g[K][1]=n[1][M];g[K][2]=
n[2][M];g[K][3]=n[3][M]});return g},h:function(){for(var G in c){var n=c[G];n&&n.remove()}Z&&(Z.h(),Z=null)}};a.Ua&&na.de(a.Ua);return na}}}();Cb.Vb=function(a){a.forEach(function(c){c.kd&&T.Vb(c.kd.Wf);c.ka&&T.Vb(c.ka)})};var cc=function(){return{instance:function(a){var c=T.instance(a.weights);delete a.weights.data;return{na:!0,La:function(){return 1},h:function(){c.remove()},Gd:function(){return c},K:function(){z.set("s26");c.b(1);S.g(!1,!1)}}}}}(),fc=function(){return{instance:function(a){var c=
a.fromLayerSize,d=T.instance(a.weights);delete a.weights.data;return{na:!0,La:function(){return c},h:function(){d.remove()},K:function(e){if(e.isEnabled){z.set("s24");e.Pd.b(3);var g,m=Math.min(e.layers.length,e.depth);for(g=0;g<m;++g)e.layers[g].ad(4+g)}else z.set("s23");z.A("u16",a.toLayerSize);d.b(1);S.g(!1,!1)}}}}}(),dc=function(){return{instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,e=a.toSparsity,g=e*d,m=g/c,r=c/d,q=0,f=0,x=0,B=Array(e*d*e*d*4),h=Array(e*d*e*d*4),w=Array(c*c),
k=0;k<w.length;++k)w[k]=0;k=Math.floor(e/2);for(var D=.5/d,H=.5/c,C=.5/g,l=0;l<d;++l)for(var v=Math.round(l*r),F=0;F<d;++F){var J=Math.round(F*r),u=l/d,t=F/d;u+=D;t+=D;for(var E=0;E<e;++E){var O=v+E-k;0>O&&(O+=c);O>=c&&(O-=c);for(var Z=0;Z<e;++Z){var na=q/g,G=f/g,n=J+Z-k;0>n&&(n+=c);n>=c&&(n-=c);var M=O/c,K=n/c;G=1-G-1/g;M+=H;K+=H;na+=C;G+=C;var p=l*e+E,ea=F*e+Z;ea=d*e-ea-1;p=ea*d*e+p;B[4*p]=na;B[4*p+1]=G;B[4*p+2]=M;B[4*p+3]=K;K=w[n*c+O]++;p=K%m;M=O*m+p;n=n*m+(K-p)/m;n=c*m-1-n;n=n*c*m+M;h[4*n]=na;
h[4*n+1]=G;h[4*n+2]=u;h[4*n+3]=t;++q>=g&&(q=0,++f);++x}}}w=null;var va=T.instance(a.weights);delete a.weights.data;var Ba=T.instance({width:g,isFloat:!0,array:new Float32Array(h),isPot:!0});h=null;var qa=T.instance({width:g,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;return{na:!0,La:function(){return m},h:function(){Ba.remove();qa.remove();va.remove()},K:function(){z.set("s22");va.b(1);qa.b(2);S.g(!1,!1)}}}}}(),gc=function(){return{instance:function(a){var c=a.kernelsNumber,d=a.toSparsity,
e=d*a.toLayerSize/a.fromLayerSize,g=T.instance(a.weights);delete a.weights.data;return{na:!0,La:function(){return e},tf:function(){return d},Gd:function(){return g},h:function(){g.remove()},K:function(){z.set("s25");z.A("u22",c);z.A("u23",d);z.A("u16",a.toLayerSize);z.A("u24",a.fromLayerSize);g.b(1);S.g(!1,!1)}}}}}(),ec=function(){return{instance:function(a,c){var d=a.fromLayerSize,e=a.toLayerSize,g=a.toSparsity,m=a.stride?a.stride:1,r=g*e/d,q=e<d,f=d/e,x=T.instance(a.weights);delete a.weights.data;
var B="s47"+[d.toString(),e.toString(),g.toString(),m.toString(),c].join("_");z.sd(B)||(a=Zb.vd(c,"gl_FragColor","gl_FragColor"),e=[{type:"1f",name:"u16",value:e},{type:"1f",name:"u30",value:m}],q&&e.push({type:"1f",name:"u24",value:d}),d=[(q?r:g).toFixed(1),a],q&&d.push(f.toFixed(1)),z.oc(q?"s39":"s38",B,d),z.L(B,e.concat([{type:"1i",name:"u14",value:0},{type:"1i",name:"u21",value:1},{type:"1i",name:"u13",value:3}])));return{na:!1,La:function(){return r},h:function(){x.remove()},K:function(){z.set(B);
x.b(3);S.g(!1,!1)}}}}}(),bc=function(){return{instance:function(a){var c=a.Ac?a.Ac:3,d=a.pc?a.pc:64,e=a.Ec?a.Ec:64,g=a.Ld?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var m=T.instance(a),r=T.instance(a),q=T.instance(a),f=T.instance(a),x=T.instance({isFloat:!0,width:e,isPot:!1,isFlipY:!1}),B=1/d;return{process:function(h){z.set("s35");f.l();S.g(g,!1);z.set("s36");for(var w=0;w<c;++w)m.l(),z.za("u7",B,0),S.g(g,!1),q.l(),f.b(0),S.g(g,!1),r.l(),m.b(0),z.za("u7",0,B),S.g(g,!1),f.l(),q.b(0),S.g(g,!1),
w!==c-1&&r.b(0);z.set("s37");x.l();h.b(0);r.b(1);f.b(2);S.g(g,!1);x.b(0)},mc:function(){return x}}}}}(),V={Fd:function(){return V.Sb()?document.createElement("video"):!1},va:function(a,c){a[c]=!0;a.setAttribute(c,"true")},gd:function(){var a=!1,c=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(c)||
/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(c.substr(0,
4)))a=!0;return a},Qb:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},wd:function(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]},vc:function(){try{return window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(a){return window.innerHeight>window.innerWidth}},fd:function(){return V.Rb()||V.Qb()},Rb:function(){var a=navigator.userAgent.toLowerCase();return-1!==
a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1},Ye:function(){return V.gd()?V.vc()?window.innerHeight/window.innerWidth*45:45:45},Sb:function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1},pause:function(a){a.pause()},Kf:function(a){a.play()},release:function(a){a.pause();a.videoStream&&a.videoStream.stop();a.videoStream=null},jd:function(a){if(!a)return a;var c=!1;if(a.video){var d=function(e){var g={};"undefined"!==typeof e.min&&(g.min=e.min);"undefined"!==typeof e.max&&
(g.max=e.max);"undefined"!==typeof e.ideal&&(g.ideal=e.ideal);return g};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=a.video.facingMode)}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&(c.deviceId=a.deviceId);return c},Nc:function(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a},ld:function(a){function c(h){return[480,
576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(w,k){return Math.abs(w-h)-Math.abs(k-h)})}function d(h){var w=V.jd(a);e.push(h(w))}var e=[];if(!a||!a.video)return e;if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var g=c(a.video.width.ideal).slice(0,3),m=c(a.video.height.ideal).slice(0,3),r={},q=0;for(r.ea=void 0;q<g.length;r={ea:r.ea},++q){r.ea=g[q];var f={},x=0;for(f.da=void 0;x<m.length;f={da:f.da},++x)if(f.da=m[x],r.ea!==a.video.width.ideal||
f.da!==a.video.height.ideal){var B=Math.max(r.ea,f.da)/Math.min(r.ea,f.da);B<4/3-.1||B>16/9+.1||d(function(h,w){return function(k){k.video.width.ideal=h.ea;k.video.height.ideal=w.da;return k}}(r,f))}}}d(function(h){return V.Nc(h)})}a.video.width&&a.video.height&&(a.video.width.ideal&&a.video.height.ideal&&d(function(h){delete h.video.width.ideal;delete h.video.height.ideal;return h}),d(function(h){delete h.video.width;delete h.video.height;return h}));a.video.facingMode&&(d(function(h){delete h.video.facingMode;
return h}),a.video.width&&a.video.height&&d(function(h){V.Nc(h);delete h.video.facingMode;return h}));e.push({audio:a.audio,video:!0});return e},ke:function(a){if(V.vc()){if(!a||!a.video)return!1;var c=a.video.width,d=a.video.height;if(!c||!d)return!1;if(c.ideal&&d.ideal&&c.ideal>d.ideal)return a.video.height=c,a.video.width=d,!0}return!1},Qa:function(a){a.volume=0;V.va(a,"muted");if(V.Rb()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",
c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;V.va(a,"muted")},5)}},Oc:function(a,c,d){return new Promise(function(e,g){if(a.srcObject&&a.srcObject.getVideoTracks){var m=a.srcObject.getVideoTracks();1!==m.length?g("INVALID_TRACKNUMBER"):(m=m[0],c?V.get(a,e,g,d):(m.stop(),e()))}else g("BAD_IMPLEMENTATION")})},nc:function(a,c,d,e){function g(r){m||(m=!0,d(r))}var m=!1;return navigator.mediaDevices.getUserMedia(e).then(function(r){function q(){setTimeout(function(){if(a.currentTime){var f=
a.videoWidth,x=a.videoHeight;if(0===f||0===x)g("VIDEO_NULLSIZE");else{f&&(a.style.width=f.toString()+"px");x&&(a.style.height=x.toString()+"px");f={ed:null,ie:null,Qd:null};try{var B=r.getVideoTracks()[0];B&&(f.Qd=B,f.ed=B.getCapabilities(),f.ie=B.getSettings())}catch(h){}V.fd()?a.parentNode&&null!==a.parentNode?(m||c(a,r,f),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),V.Qa(a),m||c(a,r,f),setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";
a.style.bottom="0px";a.style.right="0px";V.Qa(a);setTimeout(function(){a.play()},100)},80)):m||c(a,r,f)}}else g("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof a.srcObject?a.srcObject=r:(a.src=window.URL.createObjectURL(r),a.videoStream=r);V.Qa(a);a.addEventListener("loadeddata",function(){var f=a.play();V.Qa(a);"undefined"===typeof f?q():f.then(function(){q()}).catch(function(){g("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(r){g(r)})},get:function(a,c,d,e){if(!a)return d&&d("VIDEO_NOTPROVIDED"),
!1;if(!V.Sb())return d&&d("MEDIASTREAMAPI_NOTFOUND"),!1;if(e&&e.video){if(V.Qb()){var g=V.wd();(12>g[0]||12===g[0]&&2>g[1])&&V.ke(e)}e.video.width&&e.video.width.ideal&&(a.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(a.style.height=e.video.height.ideal+"px")}V.va(a,"autoplay");V.va(a,"playsinline");e&&e.audio?a.volume=0:V.va(a,"muted");V.nc(a,c,function(){function m(q){if(0===q.length)d("INVALID_FALLBACKCONSTRAINTS");else{var f=q.shift();V.nc(a,c,function(){m(q)},f)}}
var r=V.ld(e);m(r)},e)},Ed:function(a){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return a(!1,"NOTSUPPORTED"),!1;navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(d){return d.kind&&-1!==d.kind.toLowerCase().indexOf("video")&&d.label&&d.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")})},Be:function(a,c,d){var e={};e[c]=d;c=[];c.push(e);a.applyConstraints({advanced:c}).catch(function(){})}},
za=function(){var a={n:5,vb:1,xc:0,Ka:[30,45],Ha:[2,200],k:.7,qe:200,Vd:.05},c=-1,d=null,e=-1,g=-1,m=0,r=-1,q=-1,f=0,x=0,B=a.Ha[1],h={kc:function(){switch(c){case -1:return-1;case 0:return q+d.xc;case 1:return f}},D:function(w){d=Object.assign({},a,w);r=q=d.vb;c=0},le:function(w){w=("undefined"===typeof w?Date.now():w)||0;var k=Math.min(Math.max(w-x,d.Ha[0]),d.Ha[1]);B=k;x=w;var D=-1===e?0:d.k;e=Math.min(Math.max(1E3/k,5),120)*(1-D)+e*D;w-g>d.qe&&5<++m&&(k=d.k,r=r*(1-k)+(e<d.Ka[0]?q-1:e>d.Ka[1]?q+
1:q)*k,Math.abs(r-q)>1-d.Vd&&(k=Math.min(Math.max(Math.round(r),0),d.n-1),k!==q&&(r=q=k,e=(d.Ka[1]-d.Ka[0])/2)),g=w)},Jc:function(w){f=w;c=1},Qc:function(){c=0;h.reset()},reset:function(){B=a.Ha[1];g=e=-1;m=0},zd:function(){return B}};return h}(),W={save:"NNC.json",Lb:0,Yc:25,Za:[2,7],Zd:{minScale:.15,maxScale:.6,borderWidth:.2,borderHeight:.2,nStepsX:6,nStepsY:5,nStepsScale:3,nDetectsPerLoop:-1},me:50,zc:.5,yc:.4,Rd:8,Sc:.8,Rc:1,je:{translationFactorRange:[.0015,
.005],rotationFactorRange:[.003,.02],qualityFactorRange:[.9,.98],alphaRange:[.05,1]},Ba:[.65,1,.262],ia:[.092,.092,.3],Vc:.2,Xc:2,Wc:.1,Sd:8,Bc:1,td:eb.Pa.bind(null,.3,.7),te:20,Lc:3},ma={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:480,maxWidth:1280,minHeight:480,maxHeight:1280,rotate:0,flipX:!1},ba={wb:-3,Od:-1,error:-2,ready:1,play:2,pause:3},ia=ba.wb,y=null,hc={tb:!1,element:null,ca:null,W:null,u:[0,0],F:[.5,.5],m:[.5,0,0,.5],Va:0,ua:null,sb:!1},L=null,ic={ta:null,Ea:null,antialias:!0,
Ib:"./",oa:null,Z:null,Ca:W.Lb,Gc:W.Lb,Na:!1,la:!1},Aa=null,aa=null,ta=null;var wb=Qa=nb=mb=lb=kb=bb=ab=$a=0;var Ta=1;var xb=Pa=Za=Ya=Oa=Na=0;var Sa={Cb:-1,cb:-1},U=null,jc={N:0,O:0,u:[0,0],xa:null},X={Aa:null,buffer:null,ia:null,Ba:null,T:W.Bc,wa:null},Wa=null,oa=null,db=null,Ra=null,I={i:1,ga:0,M:null,tc:!1,wc:0,xb:0},sb=[],tb=[],Ob={VERSION:"1.3.5",init:function(a){function c(){ia!==ba.error&&2===++e&&(Ja(),Jb(),Ia(),L.ta&&(ia=ba.ready,L.ta(!1,{GL:b,canvasElement:L.Z,videoTexture:y.W.get(),maxFacesDetected:I.i,
videoElement:y.element}),qb()),pb())}if(ia!==ba.wb)return a.callbackReady&&a.callbackReady("ALREADY_INITIALIZED"),!1;ia=ba.Od;y=Object.assign({},hc);L=Object.assign({},ic);U=Object.assign({},jc);I.M=[0];X.ia=W.ia.slice(0);X.Ba=W.Ba.slice(0);"undefined"!==typeof a.antialias&&(L.antialias=a.antialias);a.callbackReady&&(L.ta=a.callbackReady);a.callbackTrack&&(L.Ea=a.callbackTrack);a.nExpressions&&(X.T=a.nExpressions);a.expressionsEasings&&(X.wa=a.expressionsEasings);"undefined"!==typeof a.animateDelay&&
(L.Ca=a.animateDelay);"undefined"!==typeof a.NNCpath&&(L.Ib=a.NNCpath);"undefined"!==typeof a.NNC&&(L.oa=a.NNC);"undefined"!==typeof a.maxFacesDetected&&(I.i=Math.max(1,a.maxFacesDetected));"undefined"!==typeof a.followZRot&&(L.la=a.followZRot?!0:!1);if(I.i>W.Rd)return Ha("MAXFACES_TOOHIGH"),!1;if(!a.canvasId&&!a.canvas)return Ha("NO_CANVASID"),!1;L.Z=a.canvas?a.canvas:document.getElementById(a.canvasId);if(!L.Z)return Ha("INVALID_CANVASID"),!1;U.N=L.Z.width;U.O=L.Z.height;if(!U.N||!U.O)return Ha("INVALID_CANVASDIMENSIONS"),
!1;for(var d=0;d<I.i;++d)sb.push(new Float32Array(W.Sd)),tb.push(0);za.D({vb:0,n:W.Za[1]-W.Za[0]+1,xc:W.Za[0]});aa=Object.create(W.Zd);a.scanSettings&&(Object.assign(aa,a.scanSettings),-1!==aa.nDetectsPerLoop?za.Jc(aa.nDetectsPerLoop):za.Qc());ta=Object.create(W.je);a.stabilizationSettings&&Object.assign(ta,a.stabilizationSettings);var e=0;a.videoSettings&&a.videoSettings.videoElement?fb(a.videoSettings.videoElement,c):(a.videoSettings&&Object.assign(ma,a.videoSettings),Kb(a.onWebcamAsk,a.onWebcamGet,
function(g){fb(g,c)}));Vb(function(g){if(!Wb())return!1;Aa=new Cb({});Aa.ae(g.layers);Aa.ce({Dc:"gpuRawAvg",Ud:Yb});z.Uc([{id:"s50",name:"_",ja:"attribute vec2 a0;uniform mat2 u32;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=vec2(.5,.5)+u32*a0*vec2(1.,-1.);}",Da:["a0"],qa:[2],a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",c:["u1","u32"],precision:"lowp"},{id:"s51",name:"_",a:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
ja:"attribute vec2 a0;uniform sampler2D u33;uniform vec2 u34;uniform float u35,u36,u37;varying vec2 vv0;void main(){vec4 a=texture2D(u33,vec2(.17,u35));vec2 f=a.gb,g=a.a*u34,b=a0;b.x*=u37;float c=cos(u36),d=sin(u36);vec2 h=mat2(c,d,-d,c)*b;vv0=f+h*.5*g,gl_Position=vec4(a0,0.,1.);}",Da:["a0"],qa:[2],c:"u1 u33 u34 u35 u36 u37".split(" "),precision:"lowp"},{id:"s52",name:"_",a:"uniform sampler2D u38,u33;uniform vec3 u39,u40;uniform float u41,u42,u43,u35,u44,u36,u45;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 f=texture2D(u38,vec2(.625,.625)),g=texture2D(u38,vec2(.875,.625)),a=texture2D(u33,vec2(.17,u35));float b=dot(f,e),h=dot(g,e);bool i=b>u42&&b>h+u43;i?a.r=2.:a.r>u41?a.r=0.:a.r>1.9?a.r+=1.:0.,a.r*=u44;if(a.r<.9)a=vec4(1.,u39);else{a.r*=step(1.9,a.r);float j=dot(e,texture2D(u38,vec2(.875,.875))),k=dot(e,texture2D(u38,vec2(.125,.625))),l=dot(e,texture2D(u38,vec2(.375,.625))),c=cos(u36),d=sin(u36);vec2 m=mat2(c,d*u45,-d/u45,c)*vec2(j,k);a.gba+=vec3(m,l)*u40*a.a;}gl_FragColor=a;}",
ja:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"u38 u33 u39 u41 u40 u44 u36 u45 u42 u43 u35".split(" ")},{id:"s53",name:"_",ja:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",a:"uniform sampler2D u38;const vec4 e=vec4(.25,.25,.25,.25);const vec3 f=vec3(.5,.5,.5);void main(){float a=dot(e,texture2D(u38,vec2(.125,.875))),b=dot(e,texture2D(u38,vec2(.375,.875))),c=dot(e,texture2D(u38,vec2(.625,.875))),d=dot(e,texture2D(u38,vec2(.625,.625)));vec3 g=vec3(a,b,c)*.5+f;gl_FragColor=vec4(g,d);}",
c:["u38"]},{id:"s54",name:"_",ja:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",a:"uniform sampler2D u38;const vec4 e=vec4(.25,.25,.25,.25);void main(){float a=dot(e,texture2D(u38,vec2(.375,.375))),b=dot(e,texture2D(u38,vec2(.625,.375))),c=dot(e,texture2D(u38,vec2(.875,.375))),d=dot(e,texture2D(u38,vec2(.125,.125)));gl_FragColor=vec4(a,b,c,d);}",c:["u38"]},{id:"s49",name:"_",a:"uniform sampler2D u33;uniform vec2 u46;uniform float u47;varying vec2 vv0;void main(){float f=step(.5,mod(gl_FragCoord.y+1.5,2.)),c=step(.33,vv0.x);vec4 a=texture2D(u33,vv0+u46);a.a=mix(a.a*u47,a.a,c);vec4 d=floor(255.*a),g=255.*(255.*a-d),b=mix(d,g,f)/255.;b.x=mix(step(a.x,1.5),b.x,c),gl_FragColor=b;}",
c:["u33","u47","u46"]}]);Fb();Ub();vb();ub();c()});return!0},destroy:function(){return new Promise(function(a,c){Ob.toggle_pause(!0,!0).catch(function(){c()}).then(function(){Aa&&Aa.h();Ua.h();Aa=oa=Wa=null;sb.splice(0);tb.splice(0);ia=ba.wb;a()})})},toggle_pause:function(a,c){if(!cb())return Promise.reject();var d=null;d=c?V.Oc(y.element,!a,y.ua):Promise.resolve();a?Eb():d.then(function(){pb()});return d},update_videoSettings:function(a){Eb();return new Promise(function(c){V.Oc(y.element,!1,y.ua).then(function(){Object.assign(ma,
a);Kb(null,null,function(d){fb(d,function(){Ja();Ia();pb();c()})})})})},toggle_slow:function(a){cb()&&ia===ba.play&&(a&&!L.Na?(L.Gc=L.Ca,aa.nDetectsPerLoop=1,this.set_animateDelay(100),L.Na=!0):!a&&L.Na&&(aa.nDetectsPerLoop=-1,this.set_animateDelay(L.Gc),L.Na=!1))},set_animateDelay:function(a){L.Ca=a},resize:function(){if(!cb())return!1;var a=L.Z.width,c=L.Z.height;if(!yb()&&a===U.N&&c===U.O)return!1;U.N=a;U.O=c;vb();ub();Ja();Ia();y.W&&y.W.resize(U.N,U.O);return!0},set_inputTexture:function(a,c,
d){y.u[0]=c;y.u[1]=d;y.tb=!0;Ja();qb();Ia();z.set("s50");y.W.P();b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,a);S.g(!0,!0)},reset_GLState:function(){qb();U.xa.remove();X.Aa.remove();Fb()},render_video:function(){sa.H();z.set("s1");b.viewport(0,0,U.N,U.O);y.W.b(0);S.g(!0,!0)},reset_inputTexture:function(){yb();y.tb=!1;Ja();Ia()},get_videoDevices:function(a){return V.Ed(a)},set_scanSettings:function(a){Object.assign(aa,a);-1!==aa.nDetectsPerLoop?za.Jc(aa.nDetectsPerLoop):za.Qc();vb();ub()},
set_stabilizationSettings:function(a){Object.assign(ta,a)},set_videoOrientation:function(a,c){cb()&&(ma.flipX=c,ma.rotate=a,Ja(),Ia())},update_videoElement:function(a,c){fb(a?a:y.element,function(){Jb();Ja();Ia();c&&c()})}};return Ob};window.JEEFACEFILTERAPI=window.JEEFACEFILTERAPIGEN();
;if(typeof(module)!=='undefined'){module.exports=window.JEEFACEFILTERAPI;}
window.JEEFACEFILTERAPI.FAKEDOM=FAKEDOM;